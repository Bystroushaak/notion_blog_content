<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Apple keyboard and Linux Mint 13</title>
  <link rel="stylesheet" type="text/css" href="../../style.css">
  <link rel="alternate" type="application/atom+xml" href="https://blog.rfox.eu/atom.xml">
  <link rel="shortcut icon" href="/favicon.ico">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:creator" content="@Bystroushaak">
  <meta name="twitter:title" content="Apple keyboard and Linux Mint 13">
  <meta name="twitter:description" content="Two days ago I finally received my &quot;new&quot; wireless Apple keyboard I bought on Aukro. Czech Post took its time - 6 days for a distance of 200 kilometers. But hey, what can you expect from a state-owned company. But this blogpost isn't about Czech Post, it is about the Apple keyboard and Linux Mint 13.">
  <meta name="twitter:image" content="https://blog.rfox.eu/en/Hardware/Apple_keyboard_and_Linux_Mint_13/Untitled.png">
  <script src="../../scripts.js"></script>
  <meta name="description" content="Two days ago I finally received my &amp;quote;new&amp;quote; wireless Apple keyboard I bought on Aukro. Czech Post took its time - 6 days for a distance of 200 kilometers. But hey, what can you expect from a state-owned company. But this blogpost isn't about Czech Post, it is about the Apple keyboard and Linux Mint 13.">
  <meta name="keywords" content="hardware,keyboard,m0wFG3PRCoJVTs7JcgBwsOXb3U7yPxBB"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <div>
      <a href="https://blog.rfox.eu/atom.xml"><img src="../../rss_icon.png" style="width: 3em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://twitter.com/Bystroushaak"><img src="../../twitter_icon.png" style="width: 3em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://www.patreon.com/bePatron?u=2618881"><img src="../../patreon.png" style="width: 3em;"></a>
    </div>
    <h3>New posts</h3>
    <div id="last_five_top">
      <ul>
        <li>
          <a href="../Stories/War_stories_Romanian_Infocenter_aka_the_pontaj_story.html" title="War stories: Romanian Infocenter aka the pontaj story">War stories: Romanian Infocenter aka the pontaj story</a>
        </li>
        <li>
          <a href="../Technological_marvels/SLAM.html" title="SLAM">SLAM</a>
        </li>
        <li>
          <a href="../3D_printing/3D_printing_exhibit_2_Window_shield_for_portable_air_conditioner.html" title="3D printing exhibit 2; Window shield for portable air conditioner">3D printing exhibit 2; Window shield for portable air conditioner</a>
        </li>
        <li>
          <a href="../../Paperclips/Weird_invitations.html" title="Weird invitations">Weird invitations</a>
        </li>
        <li>
          <a href="../Philosophy/Creating_spaces_by_opening_dimensions.html" title="Creating spaces by opening dimensions">Creating spaces by opening dimensions</a>
        </li>
        <li>
          <a href="../Stories/HireRight_experience_spoiler_it_was_bad.html" title="HireRight experience (spoiler; it was bad)">HireRight experience (spoiler; it was bad)</a>
        </li>
        <li>
          <a href="../Explorations/List_of_notionso_python_API_libraries_2022-04.html" title="List of notion.so python API libraries 2022-04">List of notion.so python API libraries 2022-04</a>
        </li>
        <li>
          <a href="../Weekly_updates/Newsletter_2022-02-20_Small_projects.html" title="Newsletter 2022-02-20; Small projects">Newsletter 2022-02-20; Small projects</a>
        </li>
        <li>
          <a href="../Organization_of_information/How_I_use_personal_wiki.html" title="How I use personal wiki">How I use personal wiki</a>
        </li>
        <li>
          <a href="../3D_modeling/Antenna_from_my_dreams_3D_render.html" title="Antenna from my dreams (3D render)">Antenna from my dreams (3D render)</a>
        </li>
      </ul>
    </div>& <a href="../../Changelog.html" title="Changelog">more</a>
    <div>
      <h3>Tags</h3>
      <p><a href="../../Tags/hardware.html" title="hardware">hardware</a>, <a href="../../Tags/keyboard.html" title="keyboard">keyboard</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../3D_modeling.html" title="3D modeling">ðŸ“‚ 3D modeling</a>
        </li>
        <li>
          <a href="../3D_printing.html" title="3D printing">ðŸ“‚ 3D printing</a>
        </li>
        <li>
          <a href="../About_this_blog.html" title="About this blog">ðŸ“‚ About this blog</a>
        </li>
        <li>
          <a href="../Books.html" title="Books">ðŸ“‚ Books</a>
        </li>
        <li>
          <a href="../Explorations.html" title="Explorations">ðŸ“‚ Explorations</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">ðŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../Improvements.html" title="Improvements">ðŸ“‚ Improvements</a>
        </li>
        <li>
          <a href="../Organization_of_information.html" title="Organization of information">ðŸ“‚ Organization of information</a>
        </li>
        <li>
          <a href="../Philosophy.html" title="Philosophy">ðŸ“‚ Philosophy</a>
        </li>
        <li>
          <a href="../Programming.html" title="Programming">ðŸ“‚ Programming</a>
        </li>
        <li>
          <a href="../Stories.html" title="Stories">ðŸ“‚ Stories</a>
        </li>
        <li>
          <a href="../Technological_marvels.html" title="Technological marvels">ðŸ“‚ Technological marvels</a>
        </li>
        <li>
          <a href="../Weekly_updates.html" title="Weekly updates">ðŸ“‚ Weekly updates</a>
        </li>
        <li>
          <a href="../index.html" title="English section">ðŸ“‚ English section</a>
        </li>
      </ul>
    </div>
  </div><a href="../../index.html" class="breadcrumb" title="Bystroushaak's blog">Bystroushaak's blog</a> / <a href="../index.html" class="breadcrumb" title="English section">English section</a> / <a href="index.html" class="breadcrumb" title="Hardware">Hardware</a> / Apple keyboard and Linux Mint 13
  <article id="6fbdb8f7-084b-4f46-9771-80963d238829" class="page sans">
    <header>
      <h1 class="page-title">Apple keyboard and Linux Mint 13</h1>
    </header>
    <div class="page-body">
      <p id="c42a4bd6-8570-4582-9d93-0460270274a5" class=""><time>@2013/11/02</time></p>
      <p id="5b1b5a0a-0850-4149-982c-b46661fa85e2" class="">Two days ago I finally received my "new" wireless Apple keyboard I bought on Aukro. Czech Post took its time - 6 days for a distance of <a href="http://www.mapy.cz/#!q=pardubice&amp;t=r&amp;x=15.308643&amp;y=50.364174&amp;z=8&amp;rp=%7B%22criterion%22%3A%22fast%22%7D&amp;rc=15.767501_50.024744_14.001231_50.682334&amp;rl=Pardubice%2C%20okres%20Pardubice_%C4%8Dtvr%C5%A5%20%C3%9Ast%C3%AD%20nad%20Labem-m%C4%9Bsto%2C%20%C3%9Ast%C3%AD%20nad%20Labem%2C%20okres%20%C3%9Ast%C3%AD%20nad%20Labem">200 kilometers</a>. But hey, what can you expect from a state-owned company. But this blogpost isn't about Czech Post, it is about the Apple keyboard and Linux Mint 13.</p>
      <h1 id="3aa81e42-3ef6-4ca2-ae4f-0a4bca2da3da" class="">The keyboard</h1>
      <p id="3dbfbd32-3078-462b-a2a2-dd76114687a7" class="">I've got only the keyboard. The seller didn't send anything else in the package - no original box, no papers or other usual crap - only the keyboard and two rechargeable NiMH AA batteries.</p>
      <figure id="f31d8000-bcf7-4b6b-b137-0f637e4dd74f" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled.png" title="Untitled.png"><img style="width:1024px" src="Apple_keyboard_and_Linux_Mint_13/Untitled.png"></a>
      </figure>
      <figure id="027a6a71-b35a-4729-9592-20af2ab755c3" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_1.png" title="Untitled_1.png"><img style="width:1024px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_1.png"></a>
      </figure>
      <div id="c23e792f-033e-4f93-99ab-b6dd64fc4878" class="column-list">
        <div id="a18ce54c-ef06-42bc-b189-1630286e65af" style="width:50%" class="column">
          <figure id="a489f995-792f-4c7b-bd6c-091e50ba092d" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_2.png" title="Untitled_2.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_2_thumb.jpg"></a>
          </figure>
        </div>
        <div id="d1082b07-f60a-4e22-bf64-a1a1a20faf57" style="width:50%" class="column">
          <figure id="65173549-f53f-416b-b004-b27318eb9ffc" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_3.png" title="Untitled_3.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_3_thumb.jpg"></a>
          </figure>
        </div>
      </div>
      <div id="2f86a056-07e3-48a4-88aa-52e216963bd0" class="column-list">
        <div id="18d652a0-b9a0-4e72-b912-95aa9a499337" style="width:50%" class="column">
          <figure id="38ed36d6-59a0-4b17-9ad2-e89a079e8dec" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_4.png" title="Untitled_4.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_4_thumb.jpg"></a>
          </figure>
        </div>
        <div id="d29aab37-93bb-4bc5-8ee6-a54cbe6054a9" style="width:50%" class="column">
          <figure id="2f202320-a446-4b9f-a110-086ba662b23c" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_5.png" title="Untitled_5.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_5_thumb.jpg"></a>
          </figure>
        </div>
      </div>
      <div id="ed1d18bc-d539-4309-9cd4-3c6d98c933b4" class="column-list">
        <div id="0f7d49f1-e520-4dcc-8277-17c39f6855d6" style="width:50%" class="column">
          <figure id="80d53af3-5542-4a77-9c2e-3587b3fcc72a" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_6.png" title="Untitled_6.png"><img style="width:1024px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_6.png"></a>
          </figure>
        </div>
        <div id="8d174315-a90d-41ca-969d-b56019cdf279" style="width:50%" class="column">
          <figure id="dc59e0d9-7d21-4a1d-a44d-46e8fd434eaa" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_7.png" title="Untitled_7.png"><img style="width:1024px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_7.png"></a>
          </figure>
        </div>
      </div>
      <p id="877d74d1-680f-47a5-bd88-f528899c1ae4" class="">The keyboard is nice and small, but surprisingly not as small as it looks on the photos. It's slightly bigger than a netbook keyboard on Asus EEE 1000h which I used to write almost a half of my blogs. So far, I've had no problems with the size and I find writing on the keyboard very comfortable.</p>
      <div id="26d863f3-2f86-4acf-8458-eb73019d80f1" class="column-list">
        <div id="dc2c6143-fe5e-4ff0-90bc-03816d7b29cf" style="width:50%" class="column">
          <figure id="aaa10ee5-70e1-489f-91d8-399366d599ad" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_8.png" title="Untitled_8.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_8_thumb.jpg"></a>
          </figure>
        </div>
        <div id="92172cfe-450e-41d2-8b3b-b24a4ab8456e" style="width:50%" class="column">
          <figure id="0578a114-43ba-4cf1-b7ea-de85b354801c" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_9.png" title="Untitled_9.png"><img style="width:1204px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_9_thumb.jpg"></a>
          </figure>
        </div>
      </div>
      <div id="0b8a2109-1515-4fce-aa9e-e737d337681f" class="column-list">
        <div id="43ece495-4f98-4573-8403-e1f218a6f9e8" style="width:50%" class="column">
          <figure id="0025b7e6-5d74-4c82-997e-5991997b85ca" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_10.png" title="Untitled_10.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_10_thumb.jpg"></a>
          </figure>
        </div>
        <div id="a9c59a35-f6a5-4da3-b009-240f452dcfd0" style="width:50%" class="column">
          <figure id="7b480d50-e570-4d1d-ac0e-ce0d0556160d" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/201562-apple-keyboard-and-linux-mint-13-5393612423746963048.gif" title="201562-apple-keyboard-and-linux-mint-13-5393612423746963048.gif"><img style="width:600px" src="Apple_keyboard_and_Linux_Mint_13/201562-apple-keyboard-and-linux-mint-13-5393612423746963048.gif"></a>
          </figure>
        </div>
      </div>
      <p id="616ca463-1c5a-4bd3-b620-5af926ac0d37" class="">The next thing that strikes me is its un-bendability. It almost looks fragile. But it is not at all. It's one big piece of solid metal (aluminium). Notebook keyboards of the same size are usually bendable and flexible. This keyboard won't bend/twist even a little bit.</p>
      <div id="ed4e4e5a-8aee-4b0f-9b9c-f409de14985a" class="column-list">
        <div id="92e37e7d-5904-4d22-afae-24b969fad9de" style="width:33.333333333333336%" class="column">
          <figure id="0d5d012b-6bce-4a53-bd20-5e44572621bb" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_11.png" title="Untitled_11.png"><img style="width:1200px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_11_thumb.jpg"></a>
          </figure>
        </div>
        <div id="28b4ef2a-c9bd-41ab-971f-3394f95a9ec8" style="width:33.333333333333336%" class="column">
          <figure id="061eec7b-3e1a-4420-a5aa-d9c2cb4a3d09" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_12.png" title="Untitled_12.png"><img style="width:1024px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_12.png"></a>
          </figure>
        </div>
        <div id="8fd38e94-f408-486b-8046-f14a2b129925" style="width:33.33333333333333%" class="column">
          <figure id="4ded0515-2c4b-4ad8-be09-f971327070b0" class="image">
            <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_13.png" title="Untitled_13.png"><img style="width:400px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_13.png"></a>
          </figure>
        </div>
      </div>
      <p id="c394503a-977d-403c-ab52-73dd6bc9ef3a" class="">A nice feature is the keyboard's portability. It is small and wireless, so you can just lay in a bed, maximize the font size on your LCD and write from bed. This may be even more useful in combination with <a href="http://en.wikipedia.org/wiki/LCD_projector">projector</a>.</p>
      <h2 id="a6ca2394-4093-4369-9faf-36b59484fece" class="">Why Apple keyboard?</h2>
      <p id="eadad6a5-f68e-46c8-af38-dfb288687095" class="">My Asus EEE 1000h I mentioned earlier is getting old. I am thinking about buying an older Macbook Air on Aukro. You can buy a used one from 8000 to 12000 CZK (417 - 625 USD at the current exchange rate: 1USD = 19.1CZK).</p>
      <p id="c9f42ed1-b40c-4d40-9040-fb3dedcbfdae" class="">Practically only other alternative is Zenbook, but they are even more expensive and you can't find them on Aukro that easily.</p>
      <p id="3b080ebb-e32e-4f94-a3ff-89597991f461" class="">Two weeks ago, I almost bought one Macbook Air in an auction. Then I realized that I don't really know how comfortable the keyboard is. What if I bought the Macbook Air but the keyboard turned out to be a total disaster? I need to be able to write a lot of text on my netbook. I've decided to buy the external Apple keyboard as a betatest - if I'm satisfied I would buy the Air. If I'm not, I would sell the keyboard back on Aukro - Apple products are in demand so there should be no problem reselling.</p>
      <p id="791eb768-8e81-4201-9e00-ba24c3fb691b" class="">Two persons I know use Apple keyboards (Air and an external USB version) and both are praising them, so I decided to give this little experiment the green light and ordered one practically unused keyboard.</p>
      <h1 id="f157a87f-9cea-4142-9b9a-1209c2d370e4" class="">Linux Mint 13</h1>
      <p id="2cf45ea8-b6ba-4123-b5cc-9c30fc2c212c" class="">It's not that hard to make keyboard work on Mint 13. Default Bluetooth manager is broken and pretty crappy, so you just have to install <code>blueman</code> and maybe <code>gnome-bluetooth</code> from package manager. Blueman is basically the same thing as default Bluetooth manager, but not terribly outdated and mostly working. Default Mate applet doesn't work in my environment at all.</p>
      <figure id="9f068851-7da1-42f8-8c9f-ccfdd0320551" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_14.png" title="Untitled_14.png"><img style="width:585px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_14.png"></a>
      </figure>
      <p id="bb6b53e8-ba35-4ba5-a717-f1240ac8a2c5" class="">Blueman applet can be started from System menu, or as <code>blueman-applet</code> command in terminal. Then you can just connect the keyboard in <code>Setup New Device</code> submenu.</p>
      <p id="dbb9ff52-1c35-4f43-b549-5a5a4411159a" class="">Pairing is simple, you just choose PIN (ala 2222), type it on keyboard and press enter, and everything should work. That's all.</p>
      <h1 id="aaa983e1-13fa-4d93-9de2-8a8352023f35" class="">Layout problems</h1>
      <p id="03dda8fb-bbe0-40b0-9498-dc2d399054e9" class="">Default layout sucks and nobody, and I really mean nobody, can ever convince me otherwise. Even if John Carmack came to me and said its the best thing in the world which makes him a great programmer, I would tell him to go fuck himself.</p>
      <figure id="4e3b5b81-aa93-457a-8e6e-12e4dd5de1b2" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_15.png" title="Untitled_15.png"><img style="width:1170px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_15.png"></a>
      </figure>
      <p id="722978f6-9bf6-4ef6-8baa-04f79d76463c" class="">It sucks, so let's go to make it better.</p>
      <figure id="d8dc0ebc-8a92-4ba0-bdb4-8168a15a84b9" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_16.png" title="Untitled_16.png"><img style="width:999px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_16.png"></a>
      </figure>
      <h2 id="276d0578-091d-415a-9276-b2336756d099" class="">Fixing the layout</h2>
      <p id="eb7a7e1a-eaf4-4ef5-b98c-0d00916d472d" class="">FN key can't be modified in userspace because it is not sent to X. You have to apply patch to <code>hid-apple</code> module and recompile it. Other keys can be swapped with <code>xmodmap</code>.</p>
      <p id="5a15dd7f-370c-4f17-abbb-e8db87ebfa42" class="">There is few notes in <a href="https://help.ubuntu.com/community/AppleKeyboard">ubuntu documentation</a>, but the text is outdated and incomplete.</p>
      <h3 id="4af66800-4a8d-4790-ae35-6a936a9da746" class="">Source codes</h3>
      <p id="57908851-41b5-4b9e-bce2-2984ed311af7" class="">I've put the sources for whole process here: <a href="https://github.com/Bystroushaak/apple_keyboard">https://github.com/Bystroushaak/apple_keyboard</a></p>
      <h3 id="8b961334-8fcc-4e68-bc11-46bb79a56334" class="">Compiling hid-apple module</h3>
      <p id="4ad7812e-f2bf-4a6d-ac71-404cf268e629" class="">Described process is based on this post: <a href="http://ubuntuforums.org/showthread.php?t=2146492&amp;p=12676248#post12676248">http://ubuntuforums.org/showthread.php?t=2146492&amp;p=12676248#post12676248</a>. There is also source of the patched module, but you have to register there to be able to download it.</p>
      <p id="2f5e45da-498c-4331-b8b1-cd9a8efe6f44" class="">I've spend a LOT of time by trying to compile the module this way. Problem is, that Linux Mint 13 uses older kernel than described in post and I never compiled kernel module before.</p>
      <p id="5ca23353-9f0d-4713-b7a6-09f4f3efabcd" class="">Whole thing is even more complicated: <code>aptitude</code> downloads only <code>3.2.0-23</code> kernel source and I had some difficulties to make it work, because I am using <code>3.2.0-54-generic</code>. I didn't study it that hard (I was trying to make keyboard work - lot of googling), so there may be some way around it, like using proper headers, or applying some patch which will update it to <code>3.2.0-54</code>. I've tried some things and failed, mainly because my inexperience with linux kernel and how it should be compiled.</p>
      <p id="1d71f2d2-ee73-4702-8cf7-80f20f9523fc" class="">What I found working is to download ubuntu sources from their <code>git</code> repo, run few <code>make</code> commands over them and thats it. When I tried same thing with sources downloaded using <code>apt-get source</code>, it failed with lot of strange, cryptic and basically un-googlable messages from <code>make</code>.</p>
      <p id="108c941c-0549-4797-8ebe-f4c883c13c31" class="">Here is my script, which will clone sources, make branch from tag matching your kernel, replace source with patched one, compile module, load it into memory, and put it into <code>initramfs</code>. It is mostly automatic, you will just have to reply to <code>sudo</code> prompt few times.</p>
      <pre id="5db8e423-87fd-486c-a5cc-562a602d896c" class="code code-wrap"><code>#! /usr/bin/env bash
# Apple wireless keyboard module installation script
# by Bystroushaak (bystrousak@kitakitsune.org)
 
if [ ! -d ubuntu-precise ]; then
    git clone git://kernel.ubuntu.com/ubuntu/ubuntu-precise.git ubuntu-precise
fi
 
cd ubuntu-precise
 
# check for changes in repository
git checkout master
git pull
 
# create branch from tag in
VER=`uname -r | sed -e s/-generic//`
BRANCH=`git tag | grep $VER | head -n 1`
 
BRANCH_PRESENT=`git branch | grep "$VER"`
if [ -z $BRANCH_PRESENT ]; then
    git checkout -b "apple_keyboard_$VER" "$BRANCH"
else
    git checkout "apple_keyboard_$VER"
fi
 
# copy patched file
cp ../hid-apple.c drivers/hid/hid-apple.c
 
# make prerequisities
make oldconfig
make prepare
timeout 1m make # just to make all proper tools
 
# compile all modules
cd drivers/hid
make -C /lib/modules/`uname -r`/build  M=`pwd`  modules
 
# copy new module into proper directory
OLDD=`pwd`
cd /lib/modules/`uname -r`/kernel/drivers/hid/
sudo cp hid-apple.ko hid-apple.ko_
sudo cp $OLDD/hid-apple.ko .
 
# config apple keyboard to usable mode
echo "options hid_apple fnmode=2 swapctrlfn=1 use_ejectcd_as_delete=1" | sudo tee -a /etc/modprobe.d/hid_apple.conf
 
# reload driver
sudo modprobe -r hid_apple
sudo modprobe hid_apple
 
# put driver into kernel
sudo update-initramfs -u</code></pre>
      <h3 id="3e19cb80-ddc5-427d-ab30-ece53b9a18d4" class="">xmodmap</h3>
      <p id="7f725740-38f5-49cf-96f0-e4be2b26155b" class="">After you get the <code>hid-apple</code> module working, you will have to change the behavior of other keys on the keyboard. That can be easily done using a program called <code>xmodmap</code>, which allows changing layout of keyboard.</p>
      <p id="641b71da-7d79-4ff8-9852-82e31a0f1b6e" class="">Here is the content of <code>.xmodmap</code> file, which you are expected to put into your <code>home</code> directory:</p>
      <pre id="da0d1a3a-3a9e-44f0-818b-34177c513d2a" class="code code-wrap"><code>! define left and right ctrl
clear control
keycode 37  = Control_L NoSymbol Control_L NoSymbol Control_L
keycode 108 = Control_R NoSymbol Control_R NoSymbol Control_R
add control = Control_L Control_R

! disable nonbreakable space
keycode 65 = space space

! switch right cmd with alt/ISO_Level3_Shift
clear mod4
clear mod5
keycode 134 = ISO_Level3_Shift
add mod5 = ISO_Level3_Shift

! switch left super and alt
clear Mod1
remove mod1 = Alt_L
remove mod4 = Super_L
add mod4 = Alt_L
add mod1 = Super_L</code></pre>
      <p id="26f51d63-e9a6-4a6e-bd1b-6f08717dd67e" class="">When you want to change the default behavior of the Apple keyboard, just run the command with file as parameter:</p>
      <p id="bc476ad3-f54d-43f9-8033-29537b383634" class=""><code>xmodmap ~/.xmodmap</code></p>
      <p id="5012fa08-8b4f-4e06-a7b4-e8050db3e5d1" class="">The changes in <code>.xmodmap</code> will only stay until you log out from your system, so if you would like to make them permanent, put the command into programs which are loaded automatically when your GUI session starts.</p>
      <figure id="41a4b630-1ba8-48bc-bad0-5f92d264f99c" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_17.png" title="Untitled_17.png"><img style="width:369px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_17.png"></a>
      </figure>
      <figure id="9d66493b-3b69-432a-9ebe-a551076176c9" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_18.png" title="Untitled_18.png"><img style="width:448px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_18.png"></a>
      </figure>
      <p id="98758b66-1532-4113-841c-850939709640" class="">If you encounter problems with layout, you can just type <code>setxkbmap -layout cz</code> into terminal and it will reset the layout into defaut. If you are using a different keyboard map than Czech, you may probably want to change the <code>cz</code> parameter to your country code shortcut (<code>en</code> for english): <code>setxkbmap -layout en</code>.</p>
      <h2 id="92deb352-a4b4-4d91-8b2b-06ab1f514a3e" class="">Known bugs</h2>
      <h3 id="9685f127-0610-48cc-b8ab-1c68caa842b1" class="">CTRL+LSHIFT+t</h3>
      <p id="0c41b700-dbde-47ee-a199-0cdda2ca0ac4" class="">There is one big mystery - why the <code>CTRL+LSHIFT+t</code> shortcut doesn't work. Every other shortcut works, every combination of <code>CTRL+LSHIFT+char</code> works, but not with '<code>t</code>'. You have to use <code>CTRL+RSHIFT+t</code> to get it to work (for example, in firefox to open a closed tab).</p>
      <p id="410e1139-103d-475e-92b8-f538bfdb7941" class="">I don't know why it didn't work - it just didn't. Maybe it is something in the linux <code>hid-apple</code> driver, or maybe the switch matrix in the keyboard is designed to suppress this combination. Maybe it is some strange hidden system menu shortcut, or whatever.</p>
      <p id="8ae5a1a2-b934-497e-98ba-5488d1144dc4" class="">If you found what it is, please, share that knowledge in comments, or here: <a href="http://www.abclinuxu.cz/poradna/linux/show/384016">http://www.abclinuxu.cz/poradna/linux/show/384016</a></p>
      <h3 id="fe85d680-face-4b6a-a589-4aca3e3430f4" class="">CTRL+ALT+Fx</h3>
      <p id="25df5a6a-9de6-4d4a-977b-8687249d44be" class="">If you want to use this keyboard combination to switch into console, it won't work. I don't know exactly why. If you switch with another keyboard, there is no problem - it works properly, you can even switch from console back to GUI, but not from GUI to console.</p>
      <h3 id="b2825247-e944-4705-b4b8-b31028711964" class="">Wake from RAM</h3>
      <p id="fcad3fb2-2d35-4cd2-8439-547096926ffa" class="">If you somehow suspend your computer into RAM, you won't be able to wake it with this keyboard. You have to use something else - mouse buttons, another keyboard, power switch..</p>
      <p id="2ae1b937-1968-4306-a96d-0a0b6219b485" class="">When the computer wakes up, give it few seconds and then press "power" button on your keyboard - it should get sync automatically.</p>
      <h3 id="5beb1264-27f4-4fcf-a9a4-4f057879d091" class="">Printscreen</h3>
      <p id="d1251493-7a16-4e1f-939e-5cc42bbf0226" class="">Printscreen doesn't work because there is no key for it. You could probably add some key shortcut via <code>xmodmap</code>, but you can do it much easier in GUI. Go to <em>System/Settings/Keyboard shortcuts</em> menu and remap <em>Take a screenshot</em>, or adding your own call to <code>mate-screenshot</code>.</p>
      <figure id="bcb3b3c3-7960-4bb4-956a-a5e5879c5a0c" class="image">
        <a href="Apple_keyboard_and_Linux_Mint_13/Untitled_19.png" title="Untitled_19.png"><img style="width:641px" src="Apple_keyboard_and_Linux_Mint_13/Untitled_19.png"></a>
      </figure>
      <h2 id="0bc74743-b5a4-491d-8514-2d4b83f2f56b" class="">Result</h2>
      <p id="278db3c5-a171-4262-af66-ef8b9ec79134" class="">I've decided to keep the keyboard. It's actually quite nice, and writing is pleasurable. It is also definitely less exhausting for my fingers compared to mechanical keyboard with Cherry MX blue switches.</p>
      <p id="cbdc2ead-9bd3-4c7c-8877-68e8cea42b2f" class="">This blog was written on the keyboard. It has something around 10kB of text, and it came from me smoothly. With Blackwidow, I am able to <a href="http://10fastfingers.com/typing-test/czech">write</a> ~68 words per minute. First results on Apple keyboard are around 80 wpm.</p>
      <h1 id="625b4416-36e7-427e-a6f1-22eb6e885213" class="">English</h1>
      <p id="acd16734-da13-4e89-bffb-5459f28a340c" class="">I've written this in English, because I've spend almost whole day googling how to change the layout to accommodate my needs. I'd noticed, that lot of people were asking same question and usually got no, or only partial answer. Maybe this will serve them and save them lot of time and frustration.</p>
      <h2 id="471b6f85-db98-4ec2-b33b-b334f0064c5e" class="">My English skill</h2>
      <p id="34718cb3-2fa7-4e36-a6cb-a286ff0f8441" class="">This is the biggest chunk of text I've ever written in English so far. That's because I officially don't know English. I have no idea what I am doing, I am just using phrases which are emerging into my consciousness.</p>
      <p id="ea042623-3986-48ef-bffb-0acfafc894e8" class="">I've learned English statistically, by watching LOT of movies in original dabbing and later by reading articles at the Internet. I have no trouble to read (and enjoy) book written in English, but I know almost nothing about grammar, so there may (and will) be lot of typos and strangely structured sentences.</p>
      <p id="4f87dfb0-cace-4329-b729-a292ac217d01" class="">I was afraid to write in English. It is common fear which many people I know are suffering. Some <a href="http://en.wikipedia.org/wiki/Talk%3ACzech_language#The_complexity_of_the_Czech_language">say</a>, that Czech language is very hard. <em>Grammar nazis</em> aren't just common among Czech people - it is something like national tradition everyone hates, but do anyway. I've decided to ignore this.</p>
      <p id="6d60646a-2325-4546-9088-023fef370b37" class="">It's childish not to use another language just for fear that you will be criticized and corrected in discussion. You can't learn language without practicing. It is impossible. I have the right to be wrong because I am just a beginner, who just taught himself another language. That should be a great feeling, not something to be ashamed of.</p>
      <p id="00b2c484-fe6b-4c1b-a2fc-e6914cf3128d" class="">If you have any problem with grammar in any of my articles, send me patch of HTML source, or piss off. That's my license agreement.</p>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <hr>
    <p>Did you enjoy the blogpost? Here are other posts from this blog:</p>
    <div id="last_five_bottom">
      <ul>
        <li>
          <a href="../Stories/War_stories_Romanian_Infocenter_aka_the_pontaj_story.html" title="War stories: Romanian Infocenter aka the pontaj story">War stories: Romanian Infocenter aka the pontaj story</a>
        </li>
        <li>
          <a href="../Technological_marvels/SLAM.html" title="SLAM">SLAM</a>
        </li>
        <li>
          <a href="../3D_printing/3D_printing_exhibit_2_Window_shield_for_portable_air_conditioner.html" title="3D printing exhibit 2; Window shield for portable air conditioner">3D printing exhibit 2; Window shield for portable air conditioner</a>
        </li>
        <li>
          <a href="../../Paperclips/Weird_invitations.html" title="Weird invitations">Weird invitations</a>
        </li>
        <li>
          <a href="../Philosophy/Creating_spaces_by_opening_dimensions.html" title="Creating spaces by opening dimensions">Creating spaces by opening dimensions</a>
        </li>
        <li>
          <a href="../Stories/HireRight_experience_spoiler_it_was_bad.html" title="HireRight experience (spoiler; it was bad)">HireRight experience (spoiler; it was bad)</a>
        </li>
        <li>
          <a href="../Explorations/List_of_notionso_python_API_libraries_2022-04.html" title="List of notion.so python API libraries 2022-04">List of notion.so python API libraries 2022-04</a>
        </li>
        <li>
          <a href="../Weekly_updates/Newsletter_2022-02-20_Small_projects.html" title="Newsletter 2022-02-20; Small projects">Newsletter 2022-02-20; Small projects</a>
        </li>
        <li>
          <a href="../Organization_of_information/How_I_use_personal_wiki.html" title="How I use personal wiki">How I use personal wiki</a>
        </li>
        <li>
          <a href="../3D_modeling/Antenna_from_my_dreams_3D_render.html" title="Antenna from my dreams (3D render)">Antenna from my dreams (3D render)</a>
        </li>
      </ul>
    </div>
    <p>You can find <a href="../../Changelog.html" title="Changelog">many more in changelog</a>..</p>
    <div>
      <h3>Tags</h3>
      <p><a href="../../Tags/hardware.html" title="hardware">hardware</a>, <a href="../../Tags/keyboard.html" title="keyboard">keyboard</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../3D_modeling.html" title="3D modeling">ðŸ“‚ 3D modeling</a>
        </li>
        <li>
          <a href="../3D_printing.html" title="3D printing">ðŸ“‚ 3D printing</a>
        </li>
        <li>
          <a href="../About_this_blog.html" title="About this blog">ðŸ“‚ About this blog</a>
        </li>
        <li>
          <a href="../Books.html" title="Books">ðŸ“‚ Books</a>
        </li>
        <li>
          <a href="../Explorations.html" title="Explorations">ðŸ“‚ Explorations</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">ðŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../Improvements.html" title="Improvements">ðŸ“‚ Improvements</a>
        </li>
        <li>
          <a href="../Organization_of_information.html" title="Organization of information">ðŸ“‚ Organization of information</a>
        </li>
        <li>
          <a href="../Philosophy.html" title="Philosophy">ðŸ“‚ Philosophy</a>
        </li>
        <li>
          <a href="../Programming.html" title="Programming">ðŸ“‚ Programming</a>
        </li>
        <li>
          <a href="../Stories.html" title="Stories">ðŸ“‚ Stories</a>
        </li>
        <li>
          <a href="../Technological_marvels.html" title="Technological marvels">ðŸ“‚ Technological marvels</a>
        </li>
        <li>
          <a href="../Weekly_updates.html" title="Weekly updates">ðŸ“‚ Weekly updates</a>
        </li>
        <li>
          <a href="../index.html" title="English section">ðŸ“‚ English section</a>
        </li>
      </ul>
    </div>
    <h3>Follow this blog</h3>
    <div>
      <a href="https://blog.rfox.eu/atom.xml"><img src="../../rss_icon.png" style="width: 5em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://twitter.com/Bystroushaak"><img src="../../twitter_icon.png" style="width: 5em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://www.patreon.com/bePatron?u=2618881"><img src="../../patreon.png" style="width: 5em;"></a>
    </div>
  </div>
</body>
</html>
