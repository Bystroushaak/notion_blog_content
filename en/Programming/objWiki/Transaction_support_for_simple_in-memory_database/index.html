<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Transaction support for simple in-memory database</title>
  <link rel="stylesheet" type="text/css" href="../../../../style.css">
  <link rel="alternate" type="application/atom+xml" href="https://blog.rfox.eu/atom.xml">
  <link rel="shortcut icon" href="/favicon.ico">
  <style>
  pre { line-height: 125%; }
  td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
  span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
  td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
  span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
  .hll { background-color: #ffffcc }
  .c { color: #3D7B7B; font-style: italic } /* Comment */
  .err { border: 1px solid #FF0000 } /* Error */
  .k { color: #008000; font-weight: bold } /* Keyword */
  .o { color: #666666 } /* Operator */
  .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
  .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
  .cp { color: #9C6500 } /* Comment.Preproc */
  .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
  .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
  .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
  .gd { color: #A00000 } /* Generic.Deleted */
  .ge { font-style: italic } /* Generic.Emph */
  .gr { color: #E40000 } /* Generic.Error */
  .gh { color: #000080; font-weight: bold } /* Generic.Heading */
  .gi { color: #008400 } /* Generic.Inserted */
  .go { color: #717171 } /* Generic.Output */
  .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
  .gs { font-weight: bold } /* Generic.Strong */
  .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
  .gt { color: #0044DD } /* Generic.Traceback */
  .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
  .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
  .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
  .kp { color: #008000 } /* Keyword.Pseudo */
  .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
  .kt { color: #B00040 } /* Keyword.Type */
  .m { color: #666666 } /* Literal.Number */
  .s { color: #BA2121 } /* Literal.String */
  .na { color: #687822 } /* Name.Attribute */
  .nb { color: #008000 } /* Name.Builtin */
  .nc { color: #0000FF; font-weight: bold } /* Name.Class */
  .no { color: #880000 } /* Name.Constant */
  .nd { color: #AA22FF } /* Name.Decorator */
  .ni { color: #717171; font-weight: bold } /* Name.Entity */
  .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
  .nf { color: #0000FF } /* Name.Function */
  .nl { color: #767600 } /* Name.Label */
  .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
  .nt { color: #008000; font-weight: bold } /* Name.Tag */
  .nv { color: #19177C } /* Name.Variable */
  .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
  .w { color: #bbbbbb } /* Text.Whitespace */
  .mb { color: #666666 } /* Literal.Number.Bin */
  .mf { color: #666666 } /* Literal.Number.Float */
  .mh { color: #666666 } /* Literal.Number.Hex */
  .mi { color: #666666 } /* Literal.Number.Integer */
  .mo { color: #666666 } /* Literal.Number.Oct */
  .sa { color: #BA2121 } /* Literal.String.Affix */
  .sb { color: #BA2121 } /* Literal.String.Backtick */
  .sc { color: #BA2121 } /* Literal.String.Char */
  .dl { color: #BA2121 } /* Literal.String.Delimiter */
  .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
  .s2 { color: #BA2121 } /* Literal.String.Double */
  .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
  .sh { color: #BA2121 } /* Literal.String.Heredoc */
  .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
  .sx { color: #008000 } /* Literal.String.Other */
  .sr { color: #A45A77 } /* Literal.String.Regex */
  .s1 { color: #BA2121 } /* Literal.String.Single */
  .ss { color: #19177C } /* Literal.String.Symbol */
  .bp { color: #008000 } /* Name.Builtin.Pseudo */
  .fm { color: #0000FF } /* Name.Function.Magic */
  .vc { color: #19177C } /* Name.Variable.Class */
  .vg { color: #19177C } /* Name.Variable.Global */
  .vi { color: #19177C } /* Name.Variable.Instance */
  .vm { color: #19177C } /* Name.Variable.Magic */
  .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:creator" content="@Bystroushaak">
  <meta name="twitter:title" content="Transaction support for simple in-memory database">
  <meta name="twitter:description" content="I've implemented transaction support with atomic commits and rollbacks for simple in-memory database I am using in objWiki.">
  <meta name="twitter:image" content="https://blog.rfox.eu/en/Programming/objWiki/Transaction_support_for_simple_in-memory_database/flat_tree.png">
  <script src="../../../../scripts.js"></script>
  <meta name="description" content="I've implemented transaction support with atomic commits and rollbacks for simple in-memory database I am using in objWiki.">
  <meta name="keywords" content="python,transactions,objWiki,m0wFG3PRCoJVTs7JcgBwsOXb3U7yPxBB"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <div>
      <a href="https://blog.rfox.eu/atom.xml"><img src="../../../../rss_icon.png" style="width: 3em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://twitter.com/Bystroushaak"><img src="../../../../twitter_icon.png" style="width: 3em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://www.patreon.com/bePatron?u=2618881"><img src="../../../../patreon.png" style="width: 3em;"></a>
    </div>
    <h3>New posts</h3>
    <div id="last_five_top">
      <ul>
        <li>
          <a href="../../../Hardware/SolarPi_experiment_1_The_PiJuice_Fiasco.html" title="SolarPi experiment 1: The PiJuice Fiasco">SolarPi experiment 1: The PiJuice Fiasco</a>
        </li>
        <li>
          <a href="../Inspiration_for_objWiki.html" title="Inspiration for objWiki">Inspiration for objWiki</a>
        </li>
        <li>
          <a href="../../../../Paperclips/Control_panels_-_alt_interface.html" title="Control panels / alt interface">Control panels / alt interface</a>
        </li>
        <li>
          <a href="../../../Stories/War_stories_Romanian_Infocenter_aka_the_pontaj_story.html" title="War stories: Romanian Infocenter aka the pontaj story">War stories: Romanian Infocenter aka the pontaj story</a>
        </li>
        <li>
          <a href="../../../Technological_marvels/SLAM.html" title="SLAM">SLAM</a>
        </li>
        <li>
          <a href="../../../3D_printing/3D_printing_exhibit_2_Window_shield_for_portable_air_conditioner.html" title="3D printing exhibit 2; Window shield for portable air conditioner">3D printing exhibit 2; Window shield for portable air conditioner</a>
        </li>
        <li>
          <a href="../../../../Paperclips/Weird_invitations.html" title="Weird invitations">Weird invitations</a>
        </li>
        <li>
          <a href="../../../Philosophy/Creating_spaces_by_opening_dimensions.html" title="Creating spaces by opening dimensions">Creating spaces by opening dimensions</a>
        </li>
        <li>
          <a href="../../../Stories/HireRight_experience_spoiler_it_was_bad.html" title="HireRight experience (spoiler; it was bad)">HireRight experience (spoiler; it was bad)</a>
        </li>
        <li>
          <a href="../../../Explorations/List_of_notionso_python_API_libraries_2022-04.html" title="List of notion.so python API libraries 2022-04">List of notion.so python API libraries 2022-04</a>
        </li>
      </ul>
    </div>& <a href="../../../../Changelog.html" title="Changelog">more</a>
    <div id="links_from_other_pages">
      <h3>Links to this page:</h3>
      <ul>
        <li>
          <a href="../../../Weekly_updates/Lifelog_2020-05-25_Work_in_progress_everywhere.html" title="Lifelog 2020-05-25; Work in progress everywhere">Lifelog 2020-05-25; Work in progress everywhere</a>
        </li>
      </ul>
    </div>
    <div>
      <h3>Tags</h3>
      <p><a href="../../../../Tags/objwiki.html" title="objwiki">objWiki</a>, <a href="../../../../Tags/python.html" title="python">python</a>, <a href="../../../../Tags/transactions.html" title="transactions">transactions</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../../../3D_modeling.html" title="3D modeling">ðŸ“‚ 3D modeling</a>
        </li>
        <li>
          <a href="../../../3D_printing.html" title="3D printing">ðŸ“‚ 3D printing</a>
        </li>
        <li>
          <a href="../../../About_this_blog.html" title="About this blog">ðŸ“‚ About this blog</a>
        </li>
        <li>
          <a href="../../../Books.html" title="Books">ðŸ“‚ Books</a>
        </li>
        <li>
          <a href="../../../Explorations.html" title="Explorations">ðŸ“‚ Explorations</a>
        </li>
        <li>
          <a href="../../../Hardware.html" title="Hardware">ðŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../../../Improvements.html" title="Improvements">ðŸ“‚ Improvements</a>
        </li>
        <li>
          <a href="../../../Organization_of_information.html" title="Organization of information">ðŸ“‚ Organization of information</a>
        </li>
        <li>
          <a href="../../../Philosophy.html" title="Philosophy">ðŸ“‚ Philosophy</a>
        </li>
        <li>
          <a href="../../../Programming.html" title="Programming">ðŸ“‚ Programming</a>
        </li>
        <li>
          <a href="../../../Stories.html" title="Stories">ðŸ“‚ Stories</a>
        </li>
        <li>
          <a href="../../../Technological_marvels.html" title="Technological marvels">ðŸ“‚ Technological marvels</a>
        </li>
        <li>
          <a href="../../../Weekly_updates.html" title="Weekly updates">ðŸ“‚ Weekly updates</a>
        </li>
        <li>
          <a href="../../../index.html" title="English section">ðŸ“‚ English section</a>
        </li>
      </ul>
    </div>
  </div><a href="../../../../index.html" class="breadcrumb" title="Bystroushaak's blog">Bystroushaak's blog</a> / <a href="../../../index.html" class="breadcrumb" title="English section">English section</a> / <a href="../../index.html" class="breadcrumb" title="Programming">Programming</a> / <a href="../index.html" class="breadcrumb" title="objWiki">objWiki</a> / Transaction support for simple in-memory database
  <article id="12b1c93c-940b-4870-a1b7-f178d2b4e5e7" class="page sans">
    <header>
      <h1 class="page-title">Transaction support for simple in-memory database</h1>
    </header>
    <div class="page-body">
      <p id="2f2dcc79-9e1f-4195-8f92-ffbc14a4ef3c" class=""><time>@2020/04/19 â†’ 2020/04/26</time></p>
      <p id="7028b3e5-cee0-409c-9c5b-292aa26b8937" class="">Notes from the implementation of the transaction support to the objWiki.</p>
      <p id="75beec49-b246-46b1-b108-9de27900f253" class="">At the moment, objWiki uses a simple tree structure, where NodeTree stores a flat list of Nodes. Node can each hold a list of Inputs, and anot list of (sub)Nodes.</p>
      <figure id="a6cfca66-2123-4dba-a987-036e567ce9ac" class="image">
        <a href="long_tree.png" title="long_tree.png"><img style="width:132px" src="long_tree.png"></a>
      </figure>
      <p id="fc31bcf8-2557-4ca8-b634-46d9aa80adbf" class="">or more conveniently:</p>
      <figure id="4f2ccc88-022a-42b4-81d8-094c968cb620" class="image">
        <a href="flat_tree.png" title="flat_tree.png"><img style="width:624px" src="flat_tree.png"></a>
      </figure>
      <p id="99cd586a-ae75-43a1-8451-51816f3b9d66" class="">Purpose of this page is to collect all kinds of transaction mechanisms I can think of, that can be implemented on this kind of database.</p>
      <p id="889df6f2-d969-4ffb-8e22-9e2f59cfab5d" class="">By Transaction is understood database transaction mechanism, with two-phase commit protocol and rollbacks.</p>
      <p id="4aedd3fa-a77a-4ec9-9154-e64ef047122c" class="">Example: When two clients work on the same node, and then they both call <code>.commit()</code>, second transaction fails, and he second client has to repeat it. First transaction finishes successfully, as it is oldest. After that, first client's changes are now part of the database and second client has to repeat the transaction.</p>
      <h1 id="d63b2a04-4b8c-4891-ba55-8cf0745179b5" class="">Approaches</h1>
      <h2 id="11307d4c-4499-4b15-a1ec-8f7174703682" class="">Copy on write</h2>
      <p id="2beac2f1-8f56-4d04-b79b-06fd26ede07c" class="">Some kind of COW support. Writing creates copy, which is then diffed.</p>
      <h3 id="dd267259-303b-49ed-9255-014a8108f1d3" class="">Pros</h3>
      <ul id="f4232a2a-5539-401d-8075-3fc7e91440db" class="bulleted-list">
        <li style="list-style-type:disc">Doesn't require so much space in memory.</li>
      </ul>
      <h3 id="c1981dc9-8bff-4d51-9115-c42fa4d4660b" class="">Cons</h3>
      <ul id="203be53a-9a52-47de-80e1-b5b9ae0bd66f" class="bulleted-list">
        <li style="list-style-type:disc">Requires COW structure. I am not sure how to do that right now.
          <ul id="7ed7458b-8f87-45e5-ab57-2f818c085a3b" class="bulleted-list">
            <li style="list-style-type:circle">Hmm, there is <code>.get_copy()</code> method that returns copy, maybe do this for all elements?</li>
          </ul>
        </li>
      </ul>
      <ul id="07c0c2bb-1a29-4cfa-b396-877913882046" class="bulleted-list">
        <li style="list-style-type:disc">Requires tree diff. Maybe just some marking of changed objects (should be known from the COW).</li>
      </ul>
      <ul id="ef3afc27-2953-4978-a785-efaf47aa4781" class="bulleted-list">
        <li style="list-style-type:disc">I've just gave up after toying with the <code>weakref</code> and <code>gc</code> modules for a while.</li>
      </ul>
      <h2 id="03654fdd-3885-4a65-82d1-5021a17e7626" class="">Journal, mark & transaction error</h2>
      <p id="5a7f4105-373c-45d7-8f25-db8ca3f61807" class="">Work on the original tree and mark every node that was changed. If you find an already changed element, rollback everything from journal and cancel the transaction. Or depending on the strategy, cancel the other transaction.</p>
      <p id="3f63a9b3-721d-4401-8137-29f5ad6d7e31" class="">Journal can be a list of closures with inverse operations. Should be simple.</p>
      <h3 id="708401b7-6e34-408d-91cb-1c2dde02539d" class="">Pros</h3>
      <ul id="507d9c5e-0a7f-46e0-9c71-e7b2b3d61c2e" class="bulleted-list">
        <li style="list-style-type:disc">Memory cheap.</li>
      </ul>
      <ul id="8ca3e954-2591-4af3-9bea-1307bf8586f1" class="bulleted-list">
        <li style="list-style-type:disc">Doesn't require diff.</li>
      </ul>
      <h3 id="8191ad1e-11a5-4af3-802a-a98a8b34867a" class="">Cons</h3>
      <ul id="326b5e76-d98a-4bfd-98e2-1e808d8038d1" class="bulleted-list">
        <li style="list-style-type:disc">Requires rollback journal for each operation.</li>
      </ul>
      <ul id="9ac5f571-dcf4-4151-9d46-065b8f702eda" class="bulleted-list">
        <li style="list-style-type:disc">Requires some kind of shadow structure.</li>
      </ul>
      <h2 id="06d4a7ad-978d-4961-95f8-ddc7c6ebfdff" class="">Deep copy, then diff</h2>
      <p id="8327adb5-6bed-41fd-8775-6486d04aa73e" class="">Just deep copy the whole tree, work on it, then diff it and merge it back.</p>
      <p id="223778ad-7933-4a51-9430-fc4e82cbd683" class="">Maybe the deep copy could be created from partially loaded nodes, which are copied on the fly only when the transaction actually touches them.</p>
      <figure id="b59352cf-6e06-4194-8bca-e4671f350dc1" class="image">
        <a href="lazy_tree.png" title="lazy_tree.png"><img style="width:672px" src="lazy_tree.png"></a>
      </figure>
      <h3 id="819bba77-c05c-4b43-be0d-1987abe9021a" class="">Pros</h3>
      <ul id="5f834602-36c7-4d54-878c-b1063610c025" class="bulleted-list">
        <li style="list-style-type:disc">Relatively simple.</li>
      </ul>
      <h3 id="ad90820a-f9ef-420a-a5b1-19a22e4d5a40" class="">Cons</h3>
      <ul id="0dd6fbf3-3a2c-465a-9d3c-6bd205eb6db1" class="bulleted-list">
        <li style="list-style-type:disc">Requires a lot of memory in the not-lazy-loaded scenario.</li>
      </ul>
      <ul id="7b342ec8-e1be-447e-9449-f0e65f395663" class="bulleted-list">
        <li style="list-style-type:disc">Copy is probably slow.</li>
      </ul>
      <ul id="ee2a45e0-7648-49ff-90b8-9f3a432b9425" class="bulleted-list">
        <li style="list-style-type:disc">Slow diff (you have to compare whole tree - could be improved with indexing).</li>
      </ul>
      <h1 id="c7633c94-85a7-4927-bfae-d359d5866865" class="">Problems</h1>
      <p id="aa41abd3-af46-4431-addc-7859a4149ca1" class="">True <em>Copy on write</em> is hard to implement in python, because you can't really work with garbage collector and weak references in good enough granularity. It would probably be possible, but quick research proved that I don't see clear path toward this goal.</p>
      <p id="fbf078aa-3af3-4c7b-b61d-2c767390fa9a" class="">I've tried to implement <em>Journaling</em> approach, that is to define <em>rollback</em> operation for all actions that are possible with the NodeTree and Nodes and Input. It worked in principle, but it was way too hard to define inverse operation for each action, and so the probability of bug is relatively high. And also because you have to somehow allow storing transactions in the tree and there may be multiple transactions in place at one moment, whole thing complicates a lot and you end up with the partial copy of the tree anyway.</p>
      <p id="33ba30eb-2138-4224-9fad-dd589c666d7a" class="">In the end, I've decided to focus on the <em>Deep copy</em> approach. I create a copy of the tree, which automatically notices the changes that were made. Theese changes are stored in the transaction. When client calls <code>.commit()</code> on the transaction, <em>transaction manager</em> checks whether the transaction conflicts with others and if not, copy is merged back into the original tree, with as little changes as possible.</p>
      <h1 id="c0c68f6f-0998-4ae9-b76f-42a05e77f876" class="">Implementation</h1>
      <h2 id="299d9f09-20da-4271-8789-b9b94087ba41" class="">Transaction</h2>
      <p id="47343645-39b7-4024-bf41-ed50ea99aa10" class="">Transaction is just simple container for the UUID's of changed stuff:</p>
      <pre class="code"><code><span class="k">class</span> <span class="nc">TransactionConflict</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Transaction</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_manager</span><span class="p">,</span> <span class="n">abort_immediately</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creation_ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_manager</span> <span class="o">=</span> <span class="n">transaction_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transactions_to_consider</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_read</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_write</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed_objects</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">invalid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finished</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_immediately</span> <span class="o">=</span> <span class="n">abort_immediately</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">transaction_manager</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">_clone</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_manager</span><span class="o">.</span><span class="n">validate_and_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">invalid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finished</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_immediately</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_finished_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transactions_to_consider</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">collides_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>  <span class="c1"># single way non-transitional?</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_read</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">touched_uuids_write</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_write</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">touched_uuids_write</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">add_r</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">abort_immediately</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TransactionConflict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_read</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_w</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">abort_immediately</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TransactionConflict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">touched_uuids_write</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</code></pre>
      <p id="5479f126-9b89-4dbd-83f6-93fa49019dd1" class="">It is used in such way, that all datastructures that wish to offer transaction support add their UUID to the transaction by calling <code>.add_r()</code> or <code>.add_w()</code> methods.</p>
      <p id="5c20ee1a-0f01-4322-9d26-be3d8baa4ead" class="">Most important method is <code>.collides_with()</code> , which gets another transaction as parameter and if other transaction written into set of UUIDs that this trasnsaction have read from or written to, it returns <code>True</code>.</p>
      <h2 id="da66e340-2f0d-4809-8b56-702011af61a2" class="">TransactionManager</h2>
      <pre class="code"><code><span class="k">class</span> <span class="nc">TransactionManager</span><span class="p">:</span>
    <span class="n">tree</span><span class="p">:</span> <span class="n">NodeTree</span>
    <span class="n">active_transactions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Transaction</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">get_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Transaction</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">t</span>

    <span class="k">def</span> <span class="nf">validate_and_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">transaction</span><span class="o">.</span><span class="n">invalid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

        <span class="c1"># transactions that finished in the lifetime of this one</span>
        <span class="k">for</span> <span class="n">finished_transaction</span> <span class="ow">in</span> <span class="n">transaction</span><span class="o">.</span><span class="n">transactions_to_consider</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transaction</span><span class="o">.</span><span class="n">collides_with</span><span class="p">(</span><span class="n">finished_transaction</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

        <span class="c1"># transactions that begun before this one</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">prior_transaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="p">[:</span><span class="n">index</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">transaction</span><span class="o">.</span><span class="n">collides_with</span><span class="p">(</span><span class="n">prior_transaction</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>  <span class="c1"># or invalidate prior?</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">finished</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_merge_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

        <span class="c1"># set this as already finished in still running</span>
        <span class="k">for</span> <span class="n">active_transaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="p">:</span>
            <span class="n">active_transaction</span><span class="o">.</span><span class="n">add_finished_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_invalidate_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
        <span class="n">transaction</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_transactions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">TransactionConflict</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_merge_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">_merge_with</span><span class="p">(</span><span class="n">transaction</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">reindex_node_directory</span><span class="p">()</span>
</code></pre>
      <p id="b8e4c7a4-689e-41b8-a9ac-81dfddc5f577" class=""><code>TransactionManager</code> provides and tracks transactions. Most interesting method is <code>.validate_and_commit()</code>, which gets a transaction as parameter and checks whether it doesn't conflict with previously finished transactions. Then with actually running transactions, that are older than this one. If there is no conflict, the tree in this transaction is merged to the main tree and transaction is stored in all other transactions, so they would look into it when they are committed.</p>
      <h2 id="9889fc56-3fcb-422d-9bc7-f19d24a02258" class="">Read/write tracking</h2>
      <p id="a684b140-ecca-42f8-9fe3-c69ec237a7f7" class="">For tracking access to the data structures used in my simple in-memory database, I've created two monstrosities:</p>
      <pre class="code"><code><span class="k">class</span> <span class="nc">TrackingList</span><span class="p">(</span><span class="n">UserList</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initlist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transaction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">initlist</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_uuid</span> <span class="o">=</span> <span class="n">uuid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="o">=</span> <span class="n">transaction</span>

    <span class="k">def</span> <span class="nf">_add_r</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">add_r</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_uuid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_w</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">add_w</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_uuid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_log_all_uuids_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">track</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">"all_uuids"</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">uuid</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">all_uuids</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">add_w</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_r</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_log_all_uuids_in</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_log_all_uuids_in</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__delitem__</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_r</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_r</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_w</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</code></pre>
      <p id="15827488-15be-4476-8fbc-5b8bd61da859" class="">This is a list, that works as a standard <code>list</code>, but it also tracks all access and stores uuids of the added / changed / removed elements to the transactions.</p>
      <p id="a054e979-a934-4bd5-961f-39a5a026784b" class="">Second monstrosity is <code>Clonable</code> class, which I won't post here. Basically, it is an ABC class, that implements <code>.__getattribute__()</code> and <code>.__setattr__()</code> which do track access to all properties and store it to the transaction.</p>
      <p id="f9fc368e-2069-407a-b7da-0da0a00b70de" class=""><code>Clonable</code> is not explained here, because it also creates partial copies of the trees, which are dynamically loaded from the original tree on the fly. This is to save memory and CPU time by not creating full copy of the tree for each transaction.</p>
      <h2 id="efaf7afb-b678-4d1c-9c64-8e96f06c1824" class="">Merge</h2>
      <p id="8ff3997b-ad41-42aa-b535-b7f0b3b38dc0" class="">Merge could be implemented simply by replacing the original tree with updated one, but I've wanted to keep as much as possible from the original tree. This is because of the references other transactions / parts of the system may use, which would be suddenly invalid.</p>
      <p id="a6d2d63e-fd8a-4752-8c99-eb64af3f66d5" class="">Thus, it ended up being a little too complicated recursive replacement of only those parts of the tree, that really changed, but there is nothing really interesting about it. Just recursively call <code>._merge()</code> for the tree, and if it is new item, use it, and if its old, changed, item, merge it.</p>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <hr>
    <p>Did you enjoy the blogpost? Here are other posts from this blog:</p>
    <div id="last_five_bottom">
      <ul>
        <li>
          <a href="../../../Hardware/SolarPi_experiment_1_The_PiJuice_Fiasco.html" title="SolarPi experiment 1: The PiJuice Fiasco">SolarPi experiment 1: The PiJuice Fiasco</a>
        </li>
        <li>
          <a href="../Inspiration_for_objWiki.html" title="Inspiration for objWiki">Inspiration for objWiki</a>
        </li>
        <li>
          <a href="../../../../Paperclips/Control_panels_-_alt_interface.html" title="Control panels / alt interface">Control panels / alt interface</a>
        </li>
        <li>
          <a href="../../../Stories/War_stories_Romanian_Infocenter_aka_the_pontaj_story.html" title="War stories: Romanian Infocenter aka the pontaj story">War stories: Romanian Infocenter aka the pontaj story</a>
        </li>
        <li>
          <a href="../../../Technological_marvels/SLAM.html" title="SLAM">SLAM</a>
        </li>
        <li>
          <a href="../../../3D_printing/3D_printing_exhibit_2_Window_shield_for_portable_air_conditioner.html" title="3D printing exhibit 2; Window shield for portable air conditioner">3D printing exhibit 2; Window shield for portable air conditioner</a>
        </li>
        <li>
          <a href="../../../../Paperclips/Weird_invitations.html" title="Weird invitations">Weird invitations</a>
        </li>
        <li>
          <a href="../../../Philosophy/Creating_spaces_by_opening_dimensions.html" title="Creating spaces by opening dimensions">Creating spaces by opening dimensions</a>
        </li>
        <li>
          <a href="../../../Stories/HireRight_experience_spoiler_it_was_bad.html" title="HireRight experience (spoiler; it was bad)">HireRight experience (spoiler; it was bad)</a>
        </li>
        <li>
          <a href="../../../Explorations/List_of_notionso_python_API_libraries_2022-04.html" title="List of notion.so python API libraries 2022-04">List of notion.so python API libraries 2022-04</a>
        </li>
      </ul>
    </div>
    <p>You can find <a href="../../../../Changelog.html" title="Changelog">many more in changelog</a>..</p>
    <div id="links_from_other_pages">
      <h3>Links to this page:</h3>
      <ul>
        <li>
          <a href="../../../Weekly_updates/Lifelog_2020-05-25_Work_in_progress_everywhere.html" title="Lifelog 2020-05-25; Work in progress everywhere">Lifelog 2020-05-25; Work in progress everywhere</a>
        </li>
      </ul>
    </div>
    <div>
      <h3>Tags</h3>
      <p><a href="../../../../Tags/objwiki.html" title="objwiki">objWiki</a>, <a href="../../../../Tags/python.html" title="python">python</a>, <a href="../../../../Tags/transactions.html" title="transactions">transactions</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../../../3D_modeling.html" title="3D modeling">ðŸ“‚ 3D modeling</a>
        </li>
        <li>
          <a href="../../../3D_printing.html" title="3D printing">ðŸ“‚ 3D printing</a>
        </li>
        <li>
          <a href="../../../About_this_blog.html" title="About this blog">ðŸ“‚ About this blog</a>
        </li>
        <li>
          <a href="../../../Books.html" title="Books">ðŸ“‚ Books</a>
        </li>
        <li>
          <a href="../../../Explorations.html" title="Explorations">ðŸ“‚ Explorations</a>
        </li>
        <li>
          <a href="../../../Hardware.html" title="Hardware">ðŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../../../Improvements.html" title="Improvements">ðŸ“‚ Improvements</a>
        </li>
        <li>
          <a href="../../../Organization_of_information.html" title="Organization of information">ðŸ“‚ Organization of information</a>
        </li>
        <li>
          <a href="../../../Philosophy.html" title="Philosophy">ðŸ“‚ Philosophy</a>
        </li>
        <li>
          <a href="../../../Programming.html" title="Programming">ðŸ“‚ Programming</a>
        </li>
        <li>
          <a href="../../../Stories.html" title="Stories">ðŸ“‚ Stories</a>
        </li>
        <li>
          <a href="../../../Technological_marvels.html" title="Technological marvels">ðŸ“‚ Technological marvels</a>
        </li>
        <li>
          <a href="../../../Weekly_updates.html" title="Weekly updates">ðŸ“‚ Weekly updates</a>
        </li>
        <li>
          <a href="../../../index.html" title="English section">ðŸ“‚ English section</a>
        </li>
      </ul>
    </div>
    <h3>Follow this blog</h3>
    <div>
      <a href="https://blog.rfox.eu/atom.xml"><img src="../../../../rss_icon.png" style="width: 5em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://twitter.com/Bystroushaak"><img src="../../../../twitter_icon.png" style="width: 5em;"></a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<a href="https://www.patreon.com/bePatron?u=2618881"><img src="../../../../patreon.png" style="width: 5em;"></a>
    </div>
  </div>
</body>
</html>
