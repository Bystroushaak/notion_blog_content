<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Jak se p√≠≈°e programovac√≠ jazyk 6: Kompil√°tor AST do bytecode</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css">
  <link rel="alternate" type="application/atom+xml" href="https://blog.rfox.eu/atom_cz.xml">
  <link rel="shortcut icon" href="/favicon.ico">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:title" content="Jak se p√≠≈°e programovac√≠ jazyk 6: Kompil√°tor AST do bytecode">
  <meta name="twitter:description" content="V minul√©m d√≠le jsem rozepsal jak vypadaj√≠ moje bajtk√≥dy. Jak se k nim ale dostat? P≈ôes moje p≈Øvodn√≠ obavy se uk√°zalo, ≈æe neoptimalizuj√≠c√≠ kompil√°tor je v p≈ô√≠padƒõ, ≈æe existuje abstraktn√≠ syntaktick√Ω strom kr√°snƒõ jednoduch√Ω.">
  <script src="../../../scripts.js"></script>
  <meta name="description" content="V minul√©m d√≠le jsem rozepsal jak vypadaj√≠ moje bajtk√≥dy. Jak se k nim ale dostat? P≈ôes moje p≈Øvodn√≠ obavy se uk√°zalo, ≈æe neoptimalizuj√≠c√≠ kompil√°tor je v p≈ô√≠padƒõ, ≈æe existuje abstraktn√≠ syntaktick√Ω strom kr√°snƒõ jednoduch√Ω."><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img style="width: 3em;" src="../../../rss_icon.png"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img style="width: 3em;" src="../../../twitter_icon.png"></a></span>
    <div id="last_five_top">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hled√°n√≠ program√°torsk√© pr√°ce 2021/4">Algoritmus hled√°n√≠ program√°torsk√© pr√°ce 2021/4</a>
        </li>
        <li>
          <a href="../../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="Nastaven√≠ Blenderu pro 3D tisk">Nastaven√≠ Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../../3D_modelovani/Geometricky_stred_Prahy.html" title="Geometrick√Ω st≈ôed Prahy">Geometrick√Ω st≈ôed Prahy</a>
        </li>
        <li>
          <a href="../../../Utrzky/Posta_poezie.html" title="Po≈°ta (poezie)"><span class="icon">üóíÔ∏è</span>Po≈°ta (poezie)</a>
        </li>
        <li>
          <a href="../../Ostatni/Statni_zklamani.html" title="St√°tn√≠ zklam√°n√≠">St√°tn√≠ zklam√°n√≠</a>
        </li>
        <li>
          <a href="../../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; Dr≈æ√°k na sluch√°tka">3D TODO list 1; Dr≈æ√°k na sluch√°tka</a>
        </li>
        <li>
          <a href="../../Ostatni/Dva_podvodnici.html" title="Dva podvodn√≠ci">Dva podvodn√≠ci</a>
        </li>
        <li>
          <a href="../../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tisk√°rna Pr≈Ø≈°a MK3S+; sestaven√≠ a prvn√≠ tisk">3D tisk√°rna Pr≈Ø≈°a MK3S+; sestaven√≠ a prvn√≠ tisk</a>
        </li>
      </ul>& <a href="../../../Zmeny.html" title="Zmƒõny">more</a>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../../Povidky.html" title="Pov√≠dky">üìÇ Pov√≠dky</a>
        </li>
        <li>
          <a href="../../Programovani.html" title="Programov√°n√≠">üìÇ Programov√°n√≠</a>
        </li>
        <li>
          <a href="../../Crypto.html" title="Crypto">üìÇ Crypto</a>
        </li>
        <li>
          <a href="../../Ostatni.html" title="Ostatn√≠">üìÇ Ostatn√≠</a>
        </li>
        <li>
          <a href="../../Knihy.html" title="Knihy">üìÇ Knihy</a>
        </li>
        <li>
          <a href="../../Predstaveni.html" title="P≈ôedstaven√≠">üìÇ P≈ôedstaven√≠</a>
        </li>
        <li>
          <a href="../../Abclinuxu.html" title="Abclinuxu">üìÇ Abclinuxu</a>
        </li>
        <li>
          <a href="../../Hardware.html" title="Hardware">üìÇ Hardware</a>
        </li>
        <li>
          <a href="../../3D_modelovani.html" title="3D modelov√°n√≠">üìÇ 3D modelov√°n√≠</a>
        </li>
        <li>
          <a href="../../3D_tisk.html" title="3D tisk">üìÇ 3D tisk</a>
        </li>
        <li>
          <a href="../../Hrbitov.html" title="H≈ôbitov">üìÇ H≈ôbitov</a>
        </li>
        <li>
          <a href="../../index.html" title="Czech section">üìÇ Czech section</a>
        </li>
      </ul>
    </div>
  </div><a class="breadcrumb" href="../../../index.html" title="Bystroushaak's blog">Bystroushaak's blog</a> / <a class="breadcrumb" href="../../index.html" title="Czech section">Czech section</a> / <a class="breadcrumb" href="../index.html" title="Programov√°n√≠">Programov√°n√≠</a> / <a class="breadcrumb" href="index.html" title="Jak se p√≠≈°e programovac√≠ jazyk">Jak se p√≠≈°e programovac√≠ jazyk</a> / Jak se p√≠≈°e programovac√≠ jazyk 6: Kompil√°tor AST do bytecode
  <article id="e4f94696-f96d-4eb9-9aac-5367d4fde57e" class="page sans">
    <header>
      <h1 class="page-title">Jak se p√≠≈°e programovac√≠ jazyk 6: Kompil√°tor AST do bytecode</h1>
    </header>
    <div class="page-body">
      <p id="25551eb7-9571-40f3-822a-323f15fa8257" class=""><time>@2019/05/05</time></p>
      <p id="06b981b6-11e1-4166-b266-d6f820709a23" class="">V minul√©m d√≠le jsem rozepsal jak vypadaj√≠ moje bajtk√≥dy. Jak se k nim ale dostat? P≈ôes moje p≈Øvodn√≠ obavy se uk√°zalo, ≈æe neoptimalizuj√≠c√≠ kompil√°tor je v p≈ô√≠padƒõ, ≈æe existuje abstraktn√≠ syntaktick√Ω strom kr√°snƒõ jednoduch√Ω.</p>
      <p id="84648165-d96a-49e8-9742-c8d881b7d98e" class="">Ke ka≈æd√©mu prvku AST stromu jsem p≈ôidal metodu <code>.compile(code_context)</code>, kter√° do <code>code_context</code> objektu zkompiluje sebe sama, tedy vlo≈æ√≠ do nƒõj pat≈ôiƒçn√© liter√°ly a do bajtk√≥du vlo≈æ√≠ instrukce pro jejich pou≈æit√≠.</p>
      <p id="d7ee5d94-98f9-4631-8189-544f3058f4e5" class="">Nap≈ô√≠klad pro objekt Self to vypad√° takto:</p>
      <pre id="538da0a5-908b-4882-bd84-218b2633b1fd" class="code"><code>def compile(self, context):
    context.add_bytecode(BYTECODE_PUSH_SELF)

    return context</code></pre>
      <p id="07842f2b-a801-4f61-8782-2f3871c99e31" class="">Pro objekt p≈ôedstavuj√≠c√≠ ƒç√≠sla u≈æ je to trochu slo≈æitƒõj≈°√≠, nebo≈• je t≈ôeba prvnƒõ ƒç√≠slo vlo≈æit do seznamu liter√°l≈Ø:</p>
      <pre id="b003cb46-6589-4615-8bc8-4337cd69c13e" class="code"><code>def compile(self, context):
    index = context.add_literal_int(self.value)

    context.add_bytecode(BYTECODE_PUSH_LITERAL)
    context.add_bytecode(LITERAL_TYPE_INT)
    context.add_bytecode(index)

    return context</code></pre>
      <p id="a36a9bfa-8de2-477c-ae05-7284b64c93e9" class="">V bajtk√≥du je vlo≈æen√° instrukce <code>PUSH_LITERAL</code>, pot√© typ liter√°lu a jeho index.</p>
      <p id="0cac3d2a-733e-4be5-b2cf-daf053e81ff2" class="">U bin√°rn√≠ zpr√°vy je kr√°snƒõ vidƒõt, jak se prvnƒõ zkompiluje ƒçemu se m√° zpr√°va poslat a pot√© teprve samotn√° zpr√°va:</p>
      <pre id="11141ccb-64ed-4405-ae2f-46ece5f26df2" class="code"><code>def compile(self, context):
    context.add_literal_str_push_bytecode(self.name)

    self.parameter.compile(context)

    context.add_bytecode(BYTECODE_SEND)
    context.add_bytecode(SEND_TYPE_BINARY)
    context.add_bytecode(1)

    return context</code></pre>
      <p id="c9d20504-883e-4f25-a3c8-fe8d5447421e" class="">Prvnƒõ se resolvne n√°zev, pot√© se zkompiluje obsah parametru a pot√© se tento obsah po≈°le objektu na n√°zvu. Posledn√≠ ≈ô√°dek <code>context.add_bytecode(1)</code> urƒçuje poƒçet parametr≈Ø, co≈æ je u bin√°rn√≠ch zpr√°v v≈ædy jeden.</p>
      <p id="f1ac4587-f8e1-4575-a166-d19eb9ecce71" class="">Kr√°snƒõ se to kombinuje s objektem <code>Send</code>, kter√Ω specifikuje fakt ≈æe se m√° nƒõco nƒõƒçemu poslat:</p>
      <pre id="3774aea8-4624-452f-82e6-66d6ddf66f1a" class="code"><code>def compile(self, context):
    self.obj.compile(context)
    self.msg.compile(context)

    return context</code></pre>
      <p id="3097d9d1-d4cc-43d9-b69a-8d664f946bb4" class="">Prvnƒõ zkompiluj objekt kter√©mu bude nƒõco pos√≠lat, co≈æ mu≈æe b√Ωt t≈ôeba <code>Self</code>, pot√© samotnou zpr√°vu, co≈æ m≈Ø≈æe b√Ωt t≈ôeba v√Ω≈°e uveden√° <code>BinaryMessage</code>.</p>
      <p id="a57d7ca2-05a0-4eea-b8bc-5d4b4a253ad1" class="">Asi nejzaj√≠mavƒõj≈°√≠m a nejslo≈æitƒõj≈°√≠m na zkompilov√°n√≠ se uk√°zal <code>Object</code>:</p>
      <pre id="1fd0cd19-f004-46f6-b686-8c39a8efaff8" class="code"><code>def _add_slot_to_bytecode(self, context, name, value):
    boxed_name = String(name)
    boxed_name.compile(context)

    value.compile(context)

    context.add_bytecode(BYTECODE_ADD_SLOT)

def compile(self, context):
    obj = ObjectRepresentation()
    obj.meta_set_ast(self)
    obj.meta_set_parameters(self.params)

    index = context.add_literal_obj(obj)
    context.add_bytecode(BYTECODE_PUSH_LITERAL)
    context.add_bytecode(LITERAL_TYPE_OBJ)
    context.add_bytecode(index)

    for name, value in self.slots.iteritems():
        self._add_slot_to_bytecode(context, name, value)
        context.add_bytecode(SLOT_NORMAL)

    for name, value in self.parents.iteritems():
        self._add_slot_to_bytecode(context, name, value)
        context.add_bytecode(SLOT_PARENT)

    if self.code:
        new_context = CodeContext()
        obj.meta_set_code_context(new_context)
        for item in self.code:
            item.compile(new_context)

        obj.map.code_context = new_context

    return context</code></pre>
      <p id="809c8a1d-6bee-4284-a4c4-3931f6c3f50d" class="">Slo≈æitost je do velk√© m√≠ry d√°na t√≠m, ≈æe jsem se rozhodl, ≈æe objektov√© liter√°ly budu vkl√°dat mezi liter√°ly jako pomƒõrnƒõ jednoduch√© objekty, kter√© nemaj√≠ nic moc kromƒõ parametr≈Ø p≈ôedvyplnƒõno. Vyplnƒõn√≠ prob√≠h√° ve chv√≠li, kdy je objekt vytvo≈ôen.</p>
      <p id="7a7a064f-3089-4cf5-9ec8-9e9125728206" class="">V√Ω≈°e je mo≈æn√© vidƒõt, ≈æe je nejd≈ô√≠v vytvo≈ôen pr√°zdn√Ω objekt, do kter√©ho je ulo≈æena jen AST reprezentace pro pozdƒõj≈°√≠ referenci a seznam parametr≈Ø, kter√© p≈ôij√≠m√°. Cel√Ω zbytek je pak dod√°n a≈æ dynamicky za bƒõhu - v≈°echny <em>sloty</em>, v≈°echny <em>parent sloty</em> a samoz≈ôejmƒõ kdy≈æ obsahuje k√≥d, tak je v≈°e rekurzivnƒõ provedeno i pro k√≥d.</p>
      <h2 id="0b1d8784-e493-4fd2-9dca-f3c92615bde4" class="">Disassembler</h2>
      <p id="13dd82c1-e853-4a5f-804f-d24d4dd32448" class="">Kdy≈æ u≈æ jsem mƒõl hotov√Ω trivi√°ln√≠ kompil√°tor, rozhodl jsem se tak√© napsat si k nƒõmu jednoduch√Ω <a href="https://cs.wikipedia.org/wiki/Disassembler">disassembler</a> (ehm, <em>dis-bytecode-r</em>), tedy nƒõco co mi ƒçitelnƒõji zobraz√≠ zkompilovan√Ω k√≥d. V podstatƒõ to funguje inverznƒõ ke kompil√°toru; postupnƒõ bere instrukce a jejich parametry a p≈ôekl√°d√° je na mnemotechnick√© zkratky instrukc√≠:</p>
      <p id="5643f58e-7675-4972-87eb-501674b5bf65" class="">Napsal jsem to cel√© maxim√°lnƒõ trivi√°lnƒõ:</p>
      <pre id="241b863b-5f5b-429c-a46a-ccffd2298eea" class="code"><code>def _compute_index(bytecodes_len, bytecodes):
    return str(bytecodes_len - len(bytecodes))


def disassemble(bytecodes_bytearray):
    disassembled = []

    bytecodes = [ord(c) for c in bytecodes_bytearray]
    bytecodes_len = len(bytecodes)
    while bytecodes:
        index = _compute_index(bytecodes_len, bytecodes)
        bytecode = bytecodes.pop(0)

        if bytecode == BYTECODE_SEND:
            send_type = bytecodes.pop(0)

            send_type_str = {
                SEND_TYPE_UNARY: "UNARY",
                SEND_TYPE_BINARY: "BINARY",
                SEND_TYPE_KEYWORD: "KEYWORD",
                SEND_TYPE_UNARY_RESEND: "UNARY_RESEND",
                SEND_TYPE_KEYWORD_RESEND: "KEYWORD_RESEND",
            }[send_type]

            number_of_params = bytecodes.pop(0)

            disassembled.append([
                index,
                "SEND",
                "type:" + send_type_str,
                "params:" + str(number_of_params)
            ])
            continue

        elif bytecode == BYTECODE_PUSH_SELF:
            disassembled.append([
                index,
                "PUSH_SELF"
            ])
            continue

        elif bytecode == BYTECODE_PUSH_LITERAL:
            literal_type = bytecodes.pop(0)
            literal_index = bytecodes.pop(0)

            literal_type_str = {
                LITERAL_TYPE_NIL: "NIL",
                LITERAL_TYPE_INT: "INT",
                LITERAL_TYPE_STR: "STR",
                LITERAL_TYPE_OBJ: "OBJ",
                LITERAL_TYPE_FLOAT: "FLOAT",
                LITERAL_TYPE_BLOCK: "BLOCK",
                LITERAL_TYPE_ASSIGNMENT: "ASSIGNMENT",
            }[literal_type]

            disassembled.append([
                index,
                "PUSH_LITERAL",
                "type:" + literal_type_str,
                "index:" + str(literal_index)
            ])
            continue

        elif bytecode == BYTECODE_RETURN_TOP:
            disassembled.append([
                index,
                "RETURN_TOP"
            ])
            continue

        elif bytecode == BYTECODE_RETURN_IMPLICIT:
            disassembled.append([
                index,
                "RETURN_IMPLICIT"
            ])
            continue

        elif bytecode == BYTECODE_ADD_SLOT:
            slot_type = bytecodes.pop(0)
            slot_type_str = {
                SLOT_NORMAL: "SLOT_NORMAL",
                SLOT_PARENT: "SLOT_PARENT",
            }[slot_type]

            disassembled.append([
                index,
                "ADD_SLOT",
                "type:" + slot_type_str,
            ])
            continue

    return disassembled</code></pre>
      <p id="6f643ce9-434a-4b75-b16f-b834fb2855f6" class="">Pokud se nƒõkomu zd√° ten k√≥d trochu divn√Ω a ≈ô√≠k√° si proƒç jsem t≈ôeba nepou≈æil tuple m√≠sto list≈Ø, nebo proƒç tam ≈°a≈°√≠m s p≈ôetypov√°v√°n√≠m na stringy, tak odpovƒõƒè je <a href="Jak_se_pise_programovaci_jazyk_35_RPython.html" title="Jak se p√≠≈°e programovac√≠ jazyk 3.5: RPython">Jak se p√≠≈°e programovac√≠ jazyk 3.5: RPython</a>. V√Ωsledek vypad√° zabalen√Ω v samotn√© Selfov√© syntaxi nap≈ô√≠klad takto:</p>
      <pre id="b15577f4-f867-4dd7-85eb-bee3b4b4bde1" class="code code-wrap"><code>(|
  literals = (| l &lt;- dict clone. |
    l
      at: 0 Put: "ObjBox(Object(slots={benchmark: Object(slots={i: IntNumber(0), i:: AssignmentPrimitive()}, code=[Send(obj=Block(code=[Send(obj=Send(obj=Self(), msg=Message(i)), msg=BinaryMessage(name=&lt;, parameter=IntNumber(1000000)))]), msg=KeywordMessage(name=whileTrue:, parameters=[Block(code=[Send(obj=Self(), msg=KeywordMessage(name=i:, parameters=[Send(obj=Send(obj=Self(), msg=Message(i)), msg=BinaryMessage(name=+, parameter=IntNumber(1)))]))])]))]), run_benchmark: Object(slots={start_time: Nil(), start_time:: AssignmentPrimitive(), end_time: Nil(), end_time:: AssignmentPrimitive()}, code=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(interpreter)), msg=KeywordMessage(name=runScript:, parameters=['objects/stdlib.tself'])), Send(obj=Self(), msg=KeywordMessage(name=start_time:, parameters=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(time)), msg=Message(timestamp))])), Send(obj=Self(), msg=Message(benchmark)), Send(obj=Self(), msg=KeywordMessage(name=end_time:, parameters=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(time)), msg=Message(timestamp))])), Send(obj=Send(obj=Send(obj=Send(obj=Send(obj=Self(), msg=Message(end_time)), msg=BinaryMessage(name=-, parameter=Send(obj=Self(), msg=Message(start_time)))), msg=Message(asString)), msg=BinaryMessage(name=+, parameter='
')), msg=Message(print))])}))";
      at: 1 Put: "StrBox(benchmark)";
      at: 2 Put: "ObjBox(Object(slots={i: IntNumber(0), i:: AssignmentPrimitive()}, code=[Send(obj=Block(code=[Send(obj=Send(obj=Self(), msg=Message(i)), msg=BinaryMessage(name=&lt;, parameter=IntNumber(1000000)))]), msg=KeywordMessage(name=whileTrue:, parameters=[Block(code=[Send(obj=Self(), msg=KeywordMessage(name=i:, parameters=[Send(obj=Send(obj=Self(), msg=Message(i)), msg=BinaryMessage(name=+, parameter=IntNumber(1)))]))])]))]))";
      at: 3 Put: "StrBox(i)";
      at: 4 Put: "IntBox(0)";
      at: 5 Put: "StrBox(i:)";
      at: 6 Put: "StrBox(run_benchmark)";
      at: 7 Put: "ObjBox(Object(slots={start_time: Nil(), start_time:: AssignmentPrimitive(), end_time: Nil(), end_time:: AssignmentPrimitive()}, code=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(interpreter)), msg=KeywordMessage(name=runScript:, parameters=['objects/stdlib.tself'])), Send(obj=Self(), msg=KeywordMessage(name=start_time:, parameters=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(time)), msg=Message(timestamp))])), Send(obj=Self(), msg=Message(benchmark)), Send(obj=Self(), msg=KeywordMessage(name=end_time:, parameters=[Send(obj=Send(obj=Send(obj=Self(), msg=Message(primitives)), msg=Message(time)), msg=Message(timestamp))])), Send(obj=Send(obj=Send(obj=Send(obj=Send(obj=Self(), msg=Message(end_time)), msg=BinaryMessage(name=-, parameter=Send(obj=Self(), msg=Message(start_time)))), msg=Message(asString)), msg=BinaryMessage(name=+, parameter='
')), msg=Message(print))]))";
      at: 8 Put: "StrBox(start_time)";
      at: 9 Put: "StrBox(start_time:)";
      at: 10 Put: "StrBox(end_time)";
      at: 11 Put: "StrBox(end_time:)".
  ).

  disassembled = (||
    ("0", "PUSH_LITERAL", "type:OBJ", "index:0"), 
    ("3", "PUSH_LITERAL", "type:STR", "index:1"), 
    ("6", "PUSH_LITERAL", "type:OBJ", "index:2"), 
    ("9", "PUSH_LITERAL", "type:STR", "index:3"), 
    ("12", "PUSH_LITERAL", "type:INT", "index:4"), 
    ("15", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("17", "PUSH_LITERAL", "type:STR", "index:5"), 
    ("20", "PUSH_LITERAL", "type:ASSIGNMENT", "index:0"), 
    ("23", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("25", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("27", "PUSH_LITERAL", "type:STR", "index:6"), 
    ("30", "PUSH_LITERAL", "type:OBJ", "index:7"), 
    ("33", "PUSH_LITERAL", "type:STR", "index:8"), 
    ("36", "PUSH_LITERAL", "type:NIL", "index:0"), 
    ("39", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("41", "PUSH_LITERAL", "type:STR", "index:9"), 
    ("44", "PUSH_LITERAL", "type:ASSIGNMENT", "index:0"), 
    ("47", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("49", "PUSH_LITERAL", "type:STR", "index:10"), 
    ("52", "PUSH_LITERAL", "type:NIL", "index:0"), 
    ("55", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("57", "PUSH_LITERAL", "type:STR", "index:11"), 
    ("60", "PUSH_LITERAL", "type:ASSIGNMENT", "index:0"), 
    ("63", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("65", "ADD_SLOT", "type:SLOT_NORMAL"), 
    ("67", "PUSH_LITERAL", "type:STR", "index:6"), 
    ("70", "SEND", "type:UNARY", "params:0"), 
    ("73", "RETURN_TOP"), 
    ("74", "RETURN_TOP"), 
    ("75", "RETURN_TOP"), 
    ("76", "RETURN_TOP")
  ).

bytecodes = (||
    3, 3, 0, 3, 2, 1, 3, 3, 2, 3, 2, 3, 3, 1, 4, 6, 0, 3, 2, 5, 3, 6, 0, 6, 0, 6, 0, 3, 2, 6, 3, 3, 7, 3, 2, 8, 3, 0, 0, 6, 0, 3, 2, 9, 3, 6, 0, 6, 0, 3, 2, 10, 3, 0, 0, 6, 0, 3, 2, 11, 3, 6, 0, 6, 0, 6, 0, 3, 2, 6, 0, 0, 0, 4, 4, 4, 4
).</code></pre>
      <p id="06a88559-47a4-47b8-bb14-d8f7f641a1e9" class="">P≈Øvodnƒõ jsem mƒõl v√Ωsledek obalen v JSONu, ale nakonec mi kamar√°d p≈ôipomnƒõl, ≈æe souƒç√°st√≠ experimentu s tinySelfem je vyzkou≈°et pou≈æ√≠vat jeho <em>objektov√© liter√°ly</em>, ƒçeho≈æ je v√Ωsledkem v√Ω≈°e uveden√Ω v√Ωpis.</p>
      <p id="59c4ff31-53a0-460f-8d5d-08b4039cdf7f" class="">Tedy interpreter vypisuje jako debug vƒõci v syntaxi sama sebe. Nutno dodat, ≈æe je to zat√≠m neotestovan√©, nebo≈• ve chv√≠li kdy byl tento blog naps√°n nebyly v tinySelfu podporov√°ny ani pole, ani slovn√≠ky a jedn√° se tedy sp√≠≈° jen o takov√Ω n√°st≈ôel. Tomu taky odpov√≠daj√≠ ty AST stringy na zaƒç√°tku, kter√© jsou silnƒõ nep≈ôehledn√©, a kter√© to bude cht√≠t ƒçasem urƒçitƒõ vylep≈°it.</p>
      <h2 id="c813a69b-6160-46d5-9245-cc28c251929b" class="">Pokraƒçov√°n√≠</h2>
      <p id="1b38e7ef-4f13-440b-92a5-e4f6c4896060" class="">P≈ô√≠≈°tƒõ se u≈æ koneƒçnƒõ pod√≠v√°me jak vlastnƒõ uvnit≈ô vypad√° interpreter a smyƒçka vykon√°v√°n√≠ p≈ô√≠kaz≈Ø.</p>
      <h2 id="8a1ebe2d-a766-4c3b-9721-8130381fd00b" class="">Relevantn√≠ diskuze</h2>
      <ul id="5d9f8259-ebc1-4dff-aa38-09d4fa398ec9" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.abclinuxu.cz/blog/bystroushaak/2019/5/jak-se-pise-programovaci-jazyk-6-kompilator-ast-do-bytecode">Jak se p√≠≈°e programovac√≠ jazyk 6: Kompil√°tor AST do bytecode</a> (abclinuxu)
        </li>
      </ul>
      <p id="4d95eeb8-94a0-435c-919e-56042931e8a3" class=""></p>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img style="width: 3em;" src="../../../rss_icon.png"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img style="width: 3em;" src="../../../twitter_icon.png"></a></span>
    <div id="last_five_bottom">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hled√°n√≠ program√°torsk√© pr√°ce 2021/4">Algoritmus hled√°n√≠ program√°torsk√© pr√°ce 2021/4</a>
        </li>
        <li>
          <a href="../../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="Nastaven√≠ Blenderu pro 3D tisk">Nastaven√≠ Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../../3D_modelovani/Geometricky_stred_Prahy.html" title="Geometrick√Ω st≈ôed Prahy">Geometrick√Ω st≈ôed Prahy</a>
        </li>
        <li>
          <a href="../../../Utrzky/Posta_poezie.html" title="Po≈°ta (poezie)"><span class="icon">üóíÔ∏è</span>Po≈°ta (poezie)</a>
        </li>
        <li>
          <a href="../../Ostatni/Statni_zklamani.html" title="St√°tn√≠ zklam√°n√≠">St√°tn√≠ zklam√°n√≠</a>
        </li>
        <li>
          <a href="../../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; Dr≈æ√°k na sluch√°tka">3D TODO list 1; Dr≈æ√°k na sluch√°tka</a>
        </li>
        <li>
          <a href="../../Ostatni/Dva_podvodnici.html" title="Dva podvodn√≠ci">Dva podvodn√≠ci</a>
        </li>
        <li>
          <a href="../../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tisk√°rna Pr≈Ø≈°a MK3S+; sestaven√≠ a prvn√≠ tisk">3D tisk√°rna Pr≈Ø≈°a MK3S+; sestaven√≠ a prvn√≠ tisk</a>
        </li>
      </ul>& <a href="../../../Zmeny.html" title="Zmƒõny">more</a>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../../Povidky.html" title="Pov√≠dky">üìÇ Pov√≠dky</a>
        </li>
        <li>
          <a href="../../Programovani.html" title="Programov√°n√≠">üìÇ Programov√°n√≠</a>
        </li>
        <li>
          <a href="../../Crypto.html" title="Crypto">üìÇ Crypto</a>
        </li>
        <li>
          <a href="../../Ostatni.html" title="Ostatn√≠">üìÇ Ostatn√≠</a>
        </li>
        <li>
          <a href="../../Knihy.html" title="Knihy">üìÇ Knihy</a>
        </li>
        <li>
          <a href="../../Predstaveni.html" title="P≈ôedstaven√≠">üìÇ P≈ôedstaven√≠</a>
        </li>
        <li>
          <a href="../../Abclinuxu.html" title="Abclinuxu">üìÇ Abclinuxu</a>
        </li>
        <li>
          <a href="../../Hardware.html" title="Hardware">üìÇ Hardware</a>
        </li>
        <li>
          <a href="../../3D_modelovani.html" title="3D modelov√°n√≠">üìÇ 3D modelov√°n√≠</a>
        </li>
        <li>
          <a href="../../3D_tisk.html" title="3D tisk">üìÇ 3D tisk</a>
        </li>
        <li>
          <a href="../../Hrbitov.html" title="H≈ôbitov">üìÇ H≈ôbitov</a>
        </li>
        <li>
          <a href="../../index.html" title="Czech section">üìÇ Czech section</a>
        </li>
      </ul>
    </div>
  </div>
</body>
</html>
