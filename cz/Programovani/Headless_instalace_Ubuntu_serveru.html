<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Headless instalace Ubuntu serveru</title>
  <link rel="stylesheet" type="text/css" href="../../style.css">
  <link rel="alternate" type="application/atom+xml" href="https://blog.rfox.eu/atom_cz.xml">
  <link rel="shortcut icon" href="/favicon.ico">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:creator" content="@Bystroushaak">
  <meta name="twitter:title" content="Headless instalace Ubuntu serveru">
  <meta name="twitter:description" content="Dnes se podÃ­vÃ¡me na to jak nainstalovat linux na stroj, ke kterÃ©mu nenÃ­ k dispozici ani klÃ¡vesnice, ani monitor. Aby to nebylo tak jednoduchÃ©, tak to vÅ¡echno bude nainstalovÃ¡no do Å¡ifrovanÃ©ho kontejneru, ke kterÃ©mu se po rebootu zadÃ¡vÃ¡ heslo pÅ™es SSH.">
  <meta name="twitter:image" content="https://blog.rfox.eu/cz/Programovani/Headless_instalace_Ubuntu_serveru/Untitled_thumb.jpg">
  <script src="../../scripts.js"></script>
  <meta name="description" content="Dnes se podÃ­vÃ¡me na to jak nainstalovat linux na stroj, ke kterÃ©mu nenÃ­ k dispozici ani klÃ¡vesnice, ani monitor. Aby to nebylo tak jednoduchÃ©, tak to vÅ¡echno bude nainstalovÃ¡no do Å¡ifrovanÃ©ho kontejneru, ke kterÃ©mu se po rebootu zadÃ¡vÃ¡ heslo pÅ™es SSH.">
  <meta name="keywords" content="ubuntu,sifrovani,m0wFG3PRCoJVTs7JcgBwsOXb3U7yPxBB"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img style="width: 3em;" src="../../rss_icon.png"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img style="width: 3em;" src="../../twitter_icon.png"></a></span>
    <div id="last_five_top">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hledÃ¡nÃ­ programÃ¡torskÃ© prÃ¡ce 2021/4">Algoritmus hledÃ¡nÃ­ programÃ¡torskÃ© prÃ¡ce 2021/4</a>
        </li>
        <li>
          <a href="../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="NastavenÃ­ Blenderu pro 3D tisk">NastavenÃ­ Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../3D_modelovani/Geometricky_stred_Prahy.html" title="GeometrickÃ½ stÅ™ed Prahy">GeometrickÃ½ stÅ™ed Prahy</a>
        </li>
        <li>
          <a href="../../Utrzky/Posta_poezie.html" title="PoÅ¡ta (poezie)"><span class="icon">ğŸ—’ï¸</span>PoÅ¡ta (poezie)</a>
        </li>
        <li>
          <a href="../Ostatni/Statni_zklamani.html" title="StÃ¡tnÃ­ zklamÃ¡nÃ­">StÃ¡tnÃ­ zklamÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; DrÅ¾Ã¡k na sluchÃ¡tka">3D TODO list 1; DrÅ¾Ã¡k na sluchÃ¡tka</a>
        </li>
        <li>
          <a href="../Ostatni/Dva_podvodnici.html" title="Dva podvodnÃ­ci">Dva podvodnÃ­ci</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tiskÃ¡rna PrÅ¯Å¡a MK3S+; sestavenÃ­ a prvnÃ­ tisk">3D tiskÃ¡rna PrÅ¯Å¡a MK3S+; sestavenÃ­ a prvnÃ­ tisk</a>
        </li>
      </ul>& <a href="../../Zmeny.html" title="ZmÄ›ny">more</a>
    </div>
    <div>
      <h3>Tagy</h3>
      <p><a href="../../Tagy/sifrovani.html" title="sifrovani">sifrovani</a>, <a href="../../Tagy/ubuntu.html" title="ubuntu">ubuntu</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../Povidky.html" title="PovÃ­dky">ğŸ“‚ PovÃ­dky</a>
        </li>
        <li>
          <a href="../Programovani.html" title="ProgramovÃ¡nÃ­">ğŸ“‚ ProgramovÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../Crypto.html" title="Crypto">ğŸ“‚ Crypto</a>
        </li>
        <li>
          <a href="../Ostatni.html" title="OstatnÃ­">ğŸ“‚ OstatnÃ­</a>
        </li>
        <li>
          <a href="../Knihy.html" title="Knihy">ğŸ“‚ Knihy</a>
        </li>
        <li>
          <a href="../Predstaveni.html" title="PÅ™edstavenÃ­">ğŸ“‚ PÅ™edstavenÃ­</a>
        </li>
        <li>
          <a href="../Abclinuxu.html" title="Abclinuxu">ğŸ“‚ Abclinuxu</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">ğŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../3D_modelovani.html" title="3D modelovÃ¡nÃ­">ğŸ“‚ 3D modelovÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../3D_tisk.html" title="3D tisk">ğŸ“‚ 3D tisk</a>
        </li>
        <li>
          <a href="../Hrbitov.html" title="HÅ™bitov">ğŸ“‚ HÅ™bitov</a>
        </li>
        <li>
          <a href="../index.html" title="Czech section">ğŸ“‚ Czech section</a>
        </li>
      </ul>
    </div>
  </div><a class="breadcrumb" href="../../index.html" title="Bystroushaak's blog">Bystroushaak's blog</a> / <a class="breadcrumb" href="../index.html" title="Czech section">Czech section</a> / <a class="breadcrumb" href="index.html" title="ProgramovÃ¡nÃ­">ProgramovÃ¡nÃ­</a> / Headless instalace Ubuntu serveru
  <article id="64d64145-9b80-4fbd-a2f5-e370262e853a" class="page sans">
    <header>
      <h1 class="page-title">Headless instalace Ubuntu serveru</h1>
    </header>
    <div class="page-body">
      <p id="890542ce-324c-4ed8-ae57-38bb4ae4d7c7" class=""><time>@2014/08/18</time></p>
      <p id="e7af3279-b9f9-450f-a83f-caadb70b2ee2" class="">Dnes se podÃ­vÃ¡me na to jak nainstalovat linux na stroj, ke kterÃ©mu nenÃ­ k dispozici ani klÃ¡vesnice, ani monitor. Aby to nebylo tak jednoduchÃ©, tak to vÅ¡echno bude nainstalovÃ¡no do Å¡ifrovanÃ©ho kontejneru, ke kterÃ©mu se po rebootu zadÃ¡vÃ¡ heslo pÅ™es SSH.</p>
      <h1 id="d755c0a0-f555-458d-9498-4a7cde5fb0f2" class="">Motivace</h1>
      <p id="b62bbf41-9ec7-42bd-b52a-5fbea6bf2841" class="">Jak Å™Ã­kÃ¡val mÅ¯j oblÃ­benÃ½ uÄitel na stÅ™ednÃ­ Å¡kole: <em>â€Doba je zlÃ¡, ne-li kritickÃ¡â€œ</em>. NSA Å¡mÃ­ruje kde se dÃ¡, ale i ostatnÃ­ orgÃ¡ny se uÅ¾ pomalu zaÄÃ­najÃ­ orientovat ve svÄ›tÄ› informaÄnÃ­ch technologiÃ­. PodnikovÃ¡ Å¡pionÃ¡Å¾, vÅ¡eobecnÃ¡ paranoia. PÅ™esto skoro kamkoliv pÅ™ijdu, tak staÄÃ­ nabootovat <em>live</em> distribuci Linuxu a bÄ›hem pÃ¡r minut si mÅ¯Å¾u dÄ›lat s nainstalovanÃ½m systÃ©mem <a href="https://github.com/secretsquirrel/the-backdoor-factory">co chci</a> - pÅ™idÃ¡vat tam soubory, mazat a upravovat stÃ¡vajÃ­cÃ­, Äi si kopÃ­rovat citlivÃ¡ data. Proto tedy Å¡ifrovanÃ½ disk.</p>
      <figure id="e78b6cef-499e-4ec3-859a-067adae8adae" class="image">
        <a href="Headless_instalace_Ubuntu_serveru/Untitled.png" title="Untitled.png"><img style="width:1950px" src="Headless_instalace_Ubuntu_serveru/Untitled_thumb.jpg"></a>
      </figure>
      <p id="71d58a74-59ef-4d8f-b554-266bbcfbc63d" class="">NevÃ­m kde mÃ¡te server vy, jÃ¡ mÃ¡m jeden pod dÅ™ezem a druhÃ½ kdesi v cloudu u poskytovatele. Oboje dvoje je relativnÄ› Å¡patnÄ› dostupnÃ© - pod dÅ™ezem je nedostatek zÃ¡suvek a pÅ™enÃ¡Å¡et server Äi monitory se mi nechtÄ›lo. Do cloudu mÄ› pro zmÄ›nu nikdo fyzicky nepustÃ­. Proto tedy <em>headless</em> instalace.</p>
      <h1 id="32004bd5-7440-48da-b005-2f1f0b21a6be" class="">early-ssh</h1>
      <p id="ffe683f0-a1d2-4be5-89be-21bd9c7ed7f8" class="">Na internetu se dÃ¡ najÃ­t odkaz na balÃ­Äek <code>early-ssh</code>, kterÃ½ ÃºdajnÄ› dÄ›lÃ¡ vÃ­ce/mÃ©nÄ› vÅ¡echno zde popsanÃ©, co se <code>dropbear</code>u tÃ½Äe (<em>headless</em> instalaci vÃ¡m nevyrobÃ­).</p>
      <p id="52d9c45a-4729-43e1-8ddb-d0fdc48013ae" class="">Pokud na nÄ›j narazÃ­te, rozhodnÄ› ho <strong>nepouÅ¾Ã­vejte</strong>! JednÃ¡ se o neudrÅ¾ovanÃ½ a velmi rozbitÃ½ script, kterÃ½ nejenÅ¾e nefunguje, ale mÃ¡ tendence navÃ­c rozbÃ­t i nÄ›kterÃ© potenciÃ¡lnÄ› obtÃ­Å¾nÄ› opravitelnÃ© vÄ›ci (<code>initramfs</code>).</p>
      <h1 id="511f6714-de80-4ec8-a070-0431f78044fc" class="">ShrnutÃ­ postupu</h1>
      <p id="fe228ca9-187e-4acd-afd9-3346596ff0cd" class="">VÅ¡e nÃ­Å¾e popsÃ¡no bylo odzkouÅ¡eno v systÃ©mu <a href="http://www.linux-mint-czech.cz/">Linux Mint</a> zaloÅ¾enÃ©m na <a href="http://www.ubuntu.cz/">Ubuntu</a>, se standardnÃ­ softwarovou vÃ½bavou.</p>
      <p id="6a01b271-c040-48ac-963a-66fc36fdce60" class="">1. StaÅ¾enÃ­ souÄasnÃ©ho <a href="http://www.ubuntu.cz/ziskejte/stahnout#tabs-3">serverovÃ©ho</a> 64b instalÃ¡toru Ubuntu 14.04, coÅ¾ je LTS (Long Time Support) verze s dlouhodobou podporou. Ubuntu pouÅ¾Ã­vÃ¡m protoÅ¾e je uÅ¾ivatelsky pÅ™Ã­jemnÃ© a je pro nÄ›j dostupno asi nejvÃ­c balÃ­ÄkÅ¯ software. TakÃ© je to relativnÄ› jednoduchÃ¡ a blbuvzdornÃ¡ distribuce, se kterou mÃ¡m na serveru dost zkuÅ¡enostÃ­.</p>
      <p id="648d8151-1e97-44f1-a997-2833d7b75b14" class="">2. RozbalenÃ­ staÅ¾enÃ©ho ISO souboru na disk, pÅ™idÃ¡nÃ­ <a href="https://wiki.debian.org/DebianInstaller/Preseed">preseed souboru</a> a nÄ›kolika dalÅ¡Ã­ch scriptÅ¯. Tento krok zajistÃ­, Å¾e instalÃ¡tor nebude vyÅ¾adovat interaktivnÃ­ pÅ™Ã­tomnost uÅ¾ivatele na vstupnÄ› vÃ½stupnÃ­ch zaÅ™Ã­zenÃ­ch serveru (monitor, klÃ¡vesnice). MÃ­sto toho bude spuÅ¡tÄ›no <code>SSH</code> s textovÃ½m dialogovÃ½m menu, pÅ™es kterÃ© je moÅ¾nÃ© dÃ¡le postupovat v instalaci.</p>
      <p id="9cefe67f-4006-4185-b76f-228fdfca127d" class="">3. VytvoÅ™enÃ­ novÃ©ho ISO souboru z modifikovanÃ½ch komponent.</p>
      <p id="3b0b46f3-8c17-4aa2-bcd5-283bb57e063c" class="">4. Instalace systÃ©mu na disk. V tomto kroku nainstaluji Ubuntu na disk. Na konci se spustÃ­ <em>preseed</em> konfigurace, kterÃ¡ zajistÃ­ instalaci <a href="https://matt.ucc.asn.au/dropbear/dropbear.html">dropbearu</a> (miniaturnÃ­ SSH server) a jeho pÅ™idÃ¡nÃ­ do <code>initramfs</code>, aby startoval bÄ›hem Å¾Ã¡dosti o zadÃ¡nÃ­ hesla k disku. DÃ¡le je zde upravenÃ­ <a href="https://cs.wikipedia.org/wiki/GRUB">grubu</a> aby pÅ™eskakoval interaktivnÃ­ menu, nastavenÃ­ portu pro <code>dropbear</code> a tak dÃ¡le.</p>
      <p id="3849c406-8c8f-42c1-a595-ec28bee39a65" class="">5. ZadÃ¡nÃ­ hesla pro Å¡ifrovanÃ½ disk. CelÃ¡ procedura nenÃ­ tak jednoduchÃ¡ a uÅ¾ivatelsky pÅ™Ã­vÄ›tivÃ¡, jak by mohla, proto je jÃ­ vÄ›novÃ¡n vÄ›tÅ¡Ã­ prostor.</p>
      <h2 id="c60b43b7-d2a1-49e7-941e-1cbc6bdefb7c" class="">UpozornÄ›nÃ­</h2>
      <p id="c64199ab-1298-40a3-883d-58dd469f7dea" class="">V prÅ¯bÄ›hu ÄlÃ¡nku budeme konfigurovat tÅ™i rÅ¯znÃ© SSH servery/sessiony:</p>
      <ol type="1" id="fb0517b5-6275-4197-9333-d8eb29de2b65" class="numbered-list" start="1">
        <li><strong>Preseed</strong> netinstall konzole. TÃ­mto se pÅ™ipojujeme na proces instalace.</li>
      </ol>
      <ol type="1" id="8b5f95f1-38a5-494d-aca2-727d37959faf" class="numbered-list" start="2">
        <li><strong>Dropbear</strong> SSH server, kterÃ½ slouÅ¾Ã­ k zadÃ¡nÃ­ hesla k Å¡ifrovanÃ©mu disku. PouÅ¾Ã­vÃ¡me certifikÃ¡t (heslo se nejspÃ­Å¡ ani nedÃ¡ pouÅ¾Ã­t, zkouÅ¡el jsem, ale nepochodil).</li>
      </ol>
      <ol type="1" id="ef1901ab-dd5d-4f9f-9887-9953e4c5cae8" class="numbered-list" start="3">
        <li><strong>OpenSSH</strong> server, kterÃ½ bÄ›Å¾Ã­ po <em>bootu</em> a odemÄenÃ­ disku na serveru.</li>
      </ol>
      <h1 id="6fb7ef43-9ace-4ac3-8b5c-648134ac1563" class="">Postup Ãºprav</h1>
      <h2 id="c1ae3113-b925-4eb8-ad91-4ef222e25f7b" class="">InstalaÄnÃ­ mÃ©dium</h2>
      <p id="a2c4635b-8879-4357-9aad-985ad51e3967" class="">ZaÄnÄ›me staÅ¾enÃ­m instalaÄnÃ­ho mÃ©dia. CelÃ½ postup mÃ¡m odzkouÅ¡enÃ½ na 64b verzi a je moÅ¾nÃ©, Å¾e nÄ›kterÃ© detaily, hlavnÄ› co se tÃ½Äe <em>preseed</em> souboru a cest, kterÃ© jsou v nÄ›m specifikovanÃ©, mohou bÃ½t odliÅ¡nÃ©.</p>
      <pre id="d374a6fb-3e14-4c44-b565-f770d686bce8" class="code code-wrap"><code>wget -c http://releases.ubuntu.com/trusty/ubuntu-14.04.1-server-amd64.iso</code></pre>
      <p id="34d695cc-23f0-4959-aedd-956ce5c8c69d" class="">DÃ¡le je dobrÃ© se ujistit, Å¾e mÃ¡te nainstalovanÃ½ program <a href="https://www.notion.so/software/soubory/vypalovani/mkisofs">mkisofs</a>, kterÃ½ je pouÅ¾it k opÄ›tovnÃ©mu sestavenÃ­ ISO souboru po jeho rozbalenÃ­:</p>
      <pre id="85da1d1c-31b4-41e7-8a64-764074b9fb25" class="code code-wrap"><code>sudo aptitude install mkisofs</code></pre>
      <h2 id="ae13d9ad-133e-44d6-862f-0d67d891513f" class="">UpravenÃ­ instalace</h2>
      <p id="f784b37d-4d1c-4bfa-90f7-d0c3e4848b69" class="">Ze vÅ¡eho nejdÅ™Ã­ve si vytvoÅ™Ã­m dva adresÃ¡Å™e a pÅ™epnu se na <code>root</code>a, abych nemusel neustÃ¡le opisovat <code>sudo</code>:</p>
      <pre id="5fe12222-81cd-43f5-93cb-84e90e51eeac" class="code code-wrap"><code>mkdir ubuntu_iso
mkdir headless_ubuntu
sudo su</code></pre>
      <p id="cb78e35a-22dd-4e0d-88cb-53e82f5379a1" class="">NynÃ­ je na Äase si vybalit obsah ISO souboru do samostatnÃ©ho adresÃ¡Å™e, aby bylo moÅ¾nÃ© provÃ©st vÅ¡echny nutnÃ© Ãºpravy.</p>
      <pre id="f9ab7b58-41bd-4d66-8b4f-3310454a60c7" class="code code-wrap"><code>mount -o loop ubuntu-14.04.1-server-amd64.iso ubuntu_iso/
cp -rT ubuntu_iso/ headless_ubuntu/
umount ubuntu_iso
rm -r ubuntu_iso
 
cd headless_ubuntu/</code></pre>
      <h3 id="97a1ea15-7a8a-431d-a1dc-ea1fcbbabdb7" class="">authorized_keys</h3>
      <p id="b95aca80-366d-41fb-980d-665a15523f39" class="">Naprostou nutnostÃ­ je pÅ™idat soubor <code>preseed/authorized_keys</code>, kterÃ½ je pouÅ¾it <code>dropbear</code>em pro zpÅ™Ã­stupnÄ›nÃ­ konzole, kam zadÃ¡vÃ¡te heslo k disku. Do tohoto souboru nakopÃ­rujte vÃ¡Å¡ veÅ™ejnÃ½ klÃ­Ä, kterÃ½ vÄ›tÅ¡inou najdete v <code>~/.ssh/id_dsa.pub</code>.</p>
      <p id="d651eac8-9792-43a2-928c-588f55e9999f" class="">ZkopÃ­rovat ho mÅ¯Å¾ete napÅ™Ã­klad tÃ­mto pÅ™Ã­kazem:</p>
      <pre id="42b43881-7425-4c05-b21b-7ace294836cb" class="code code-wrap"><code>cat ~/.ssh/id_dsa.pub &gt;&gt; preseed/authorized_keys</code></pre>
      <p id="dd5d25be-09c7-49e5-9705-2e6aaf97f3f2" class="">UpozornÄ›nÃ­: Pokud tento soubor nebude vytvoÅ™en, nebude moÅ¾nÃ© ani vzdÃ¡lenÄ› odemknout Å¡ifrovanÃ½ disk. ZkouÅ¡el jsem si hrÃ¡t s nastavenÃ­m <code>dropbear</code>u a donutit ho pouÅ¾Ã­vat heslo, ale bezÃºspÄ›Å¡nÄ›.</p>
      <p id="3819adfb-78ff-471a-a997-b1ef2d192586" class="">PoznÃ¡mka: Pokud nemÃ¡te soubor <code>~/.ssh/id_dsa.pub</code>, je moÅ¾nÃ©, Å¾e je uloÅ¾en jinde, nebo Å¾e jeÅ¡tÄ› nebyl vygenerovÃ¡n. Jak na to zjistÃ­te napÅ™Ã­klad zde: <a href="http://www.root.cz/clanky/jak-se-prihlasovat-na-ssh-bez-zadavani-hesla/">Jak se pÅ™ihlaÅ¡ovat na</a> <a href="http://www.root.cz/clanky/jak-se-prihlasovat-na-ssh-bez-zadavani-hesla/"><code>SSH</code></a> <a href="http://www.root.cz/clanky/jak-se-prihlasovat-na-ssh-bez-zadavani-hesla/">bez zadÃ¡vÃ¡nÃ­ hesla</a>.</p>
      <h3 id="2737502d-e6c0-47d2-a890-1a1cf5a01048" class="">isolinux.cfg</h3>
      <p id="0ef5c6e5-134a-4235-8731-5160320517a3" class="">DÃ¡le je zapotÅ™ebÃ­ upravit jeden soubor a vytvoÅ™it dalÅ¡Ã­ dva. ZaÄnÄ›me Ãºpravou souboru <code>isolinux/isolinux.cfg</code>, kterÃ½ je moÅ¾nÃ© celÃ½ pÅ™epsat, proto jsem vÅ¡e shrnul do jednoho pÅ™Ã­kazu, jenÅ¾ staÄÃ­ zkopÃ­rovat do konzole:</p>
      <pre id="cc5ee988-3e0b-490d-a27c-2249dfb1008c" class="code code-wrap"><code>cat &gt; isolinux/isolinux.cfg &lt;&lt;EOF
F9 f9.txt
F0 f10.txt
 
prompt 0
timeout 0
 
DEFAULT netconsole
 
LABEL netconsole
    kernel /install/vmlinuz
    append auto=true vga=normal file=/cdrom/preseed/preseed.seed initrd=/install/initrd.gz locale=cs_CZ console-keymaps-at/keymap=cz-lat2
EOF</code></pre>
      <h3 id="61fe448d-d4b4-4714-abf8-5f0af549f921" class="">unlock.sh</h3>
      <p id="84a70d29-fb10-447b-b6e7-3c6a3d321c15" class="">Hodit se nÃ¡m bude takÃ© soubor <code>preseed/unlock.sh</code>, kterÃ½ slouÅ¾Ã­ k odemÄenÃ­ Å¡ifrovanÃ©ho disku. NenÃ­ toho zde moc k vidÄ›nÃ­ a tak jsem opÄ›t soubor upravil do tvaru, kterÃ½ je moÅ¾nÃ© jednoduÅ¡e vloÅ¾it do terminÃ¡lu a vytvoÅ™it ho tak automaticky:</p>
      <pre id="20cbe48d-dd83-4a71-89dc-04026ff852fe" class="code code-wrap"><code>cat &gt; preseed/unlock.sh &lt;&lt;EOF
#!/bin/sh
kill -9 `ps | grep "/bin/sh" | grep cryptroot | cut -d " " -f 3`
 
echo "Please wait, this will take some time (35s).."
sleep 35
 
/scripts/local-top/cryptroot
kill -9 `ps | grep "/bin/sh" | grep -v grep | cut -d " " -f 3`
EOF</code></pre>
      <h3 id="965bcfb4-1fe6-494f-928f-6c72b9436087" class="">preseed.seed</h3>
      <p id="fec3a582-69eb-4228-bc02-dc5080916280" class="">NynÃ­ pÅ™ichÃ¡zÃ­ na Å™adu prvnÃ­ ÄÃ¡st instalace, kde je zapotÅ™ebÃ­ dÃ¡vat dÅ¯kladnÃ½ pozor na to co dÄ›lÃ¡te. VytvoÅ™te soubor <code>preseed/preseed.seed</code> (doporuÄuji pouÅ¾Ã­t editor, protoÅ¾e pravdÄ›podobnÄ› budete chtÃ­t zmÄ›nit nÄ›kterÃ© detaily) s nÃ¡sledujÃ­cÃ­m obsahem:</p>
      <pre id="c4f2c359-d089-4bf3-a8bf-53d35fd680c1" class="code code-wrap"><code>d-i debian-installer/locale          string    cs_CZ
 
# PodstatnÃ© je hlavnÄ› NEWMACHINE, neboÅ¥ bude nastaveno jako hostname novÃ©ho stroje
d-i debconf/priority                 select    critical
d-i auto-install/enabled             boolean   true
d-i netcfg/choose_interface          select    auto
d-i netcfg/get_hostname              string    NEWMACHINE
 
# Instalace potÅ™ebnÃ½ch balÃ­ÄkÅ¯ pro pÅ™ipojenÃ­ po SSH
d-i preseed/early_command            string    anna-install network-console
d-i pkgsel/include                   string    openssh-server build-essential
d-i anna/choose_modules              string    network-console
 
# NastavenÃ­ hesla uÅ¾ivatele SSH sessiony
d-i network-console/password         password  r00tme
d-i network-console/password-again   password  r00tme
 
# Pokud dÃ¡vÃ¡te pÅ™ednost ruÄnÃ­mu nastavenÃ­ sÃ­tÄ›:
#d-i netcfg/disable_dhcp             boolean   true
 
# DefaultnÄ› je pouÅ¾ito DHCP. Pokud chcete pouÅ¾Ã­t statickÃ© nastavenÃ­,
# odkomentujte Å™Ã¡dky dole.
#d-i netcfg/dhcp_failed              note
#d-i netcfg/dhcp_options             select    Configure network manually
#d-i netcfg/get_nameservers          string    10.0.0.1
#d-i netcfg/get_ipaddress            string    10.0.0.20
#d-i netcfg/get_netmask              string    255.255.255.0
#d-i netcfg/get_gateway              string    10.0.0.1
#d-i netcfg/confirm_static           boolean   true
 
# Postinstall pÅ™Ã­kazy - in-target se provedou v systÃ©mu
d-i preseed/late_command string \
in-target aptitude update ; \
in-target aptitude -y install dropbear busybox libnss3 ; \
in-target sed 's/^\/sbin\/dropbear.*/\/sbin\/dropbear -p 80/g' -i /usr/share/initramfs-tools/scripts/init-premount/dropbear ; \
cp cdrom/preseed/authorized_keys target/etc/initramfs-tools/root/.ssh/authorized_keys; \
cp cdrom/preseed/unlock.sh target/etc/initramfs-tools/root/unlock.sh; \
in-target chmod +x /etc/initramfs-tools/root/unlock.sh ; \
in-target bash -c "echo 'cp /etc/initramfs-tools/root/unlock.sh \"\${DESTDIR}/bin/\"' &gt;&gt; /usr/share/initramfs-tools/hooks/dropbear" ; \
in-target bash -c "echo 'GRUB_RECORDFAIL_TIMEOUT=3' &gt;&gt; /etc/default/grub" ; \
in-target update-initramfs -u -k all ; \
in-target update-grub</code></pre>
      <p id="159b547f-74f1-413a-9fa4-e8a0db6fa88b" class="">Tento soubor je automaticky naÄten instalÃ¡torem, kterÃ½ si z nÄ›j vyzobe informace potÅ™ebnÃ© pro automatickÃ© spuÅ¡tÄ›nÃ­ netinstall konzole. VÅ¡Ã­mavÄ›jÅ¡Ã­ ÄtenÃ¡Å™i se mohou podÃ­vat do adresÃ¡Å™e <code>preseed/</code>, kde je jiÅ¾ nÄ›kolik scriptÅ¯ k dispozici.</p>
      <p id="bfdbec6f-3796-42ac-8fe2-a378d339503c" class="">PÅ™edpoklÃ¡dÃ¡m, Å¾e budete chtÃ­t provÃ©st nÄ›kterÃ© Ãºpravy, proto jsem zvÃ½raznil nÄ›kolik Å™Ã¡dkÅ¯:</p>
      <h3 id="9f7ec774-76a4-438a-a531-271126a7bcda" class="">Å˜Ã¡dek 7</h3>
      <p id="76aa34e1-6db8-4dd2-ba9c-971d3c98b9b7" class="">Zde je moÅ¾nÃ© zmÄ›nit <em>hostname</em> poÄÃ­taÄe. InstalÃ¡tor si ho pamatuje a automaticky ho nastavÃ­ pro nainstalovanÃ½ systÃ©m. DÃ¡ se to zmÄ›nit i pozdÄ›ji, ale je to otrava.</p>
      <h3 id="1f57dda8-278b-4221-8dbd-557de86558ff" class="">Å˜Ã¡dek 9</h3>
      <p id="a5416ee4-5e1c-42ef-9d2e-fb94b4b635a1" class="">Heslo, pod kterÃ½m se pÅ™ipojÃ­te <strong>do instalÃ¡toru</strong>.</p>
      <h3 id="c6948d5c-ca8a-4791-8fe0-b39bfa16b2cf" class="">Å˜Ã¡dek 10</h3>
      <p id="263de559-a266-4b7c-8dd7-129481b58082" class="">Heslo jeÅ¡tÄ› jednou.</p>
      <h3 id="8185737e-c292-4bcc-beb9-dfd607e351e9" class="">Å˜Ã¡dky 23 aÅ¾ 29</h3>
      <p id="fbac97e5-6f5a-46fe-8d8d-b54cfbb54af6" class="">StatickÃ© nastavenÃ­ sÃ­tÄ›. Tyto Å™Ã¡dky je odkomentujte pokud chcete aby instalÃ¡tor pouÅ¾il uvedenÃ© IP adresy a konfiguraci sÃ­tÄ›. Pokud zÅ¯stanou tyto Å™Ã¡dky zakomentovanÃ©, tak je pouÅ¾ito <code>dhcp</code> a mÅ¯Å¾e bÃ½t sloÅ¾itÃ© zjistit adresu instalÃ¡toru (hlavnÄ› v pÅ™Ã­padÄ› VPS).</p>
      <h3 id="65b5b27d-3364-4311-ae5e-32d632a30cb1" class="">Å˜Ã¡dek 35</h3>
      <p id="97896b50-b8ec-4def-8c5d-ffe74980604d" class="">Tento Å™Ã¡dek obsahuje pÅ™Ã­kaz, kterÃ½ ponÄ›kud barbarskÃ½m zpÅ¯sobem donutÃ­ <code>SSH</code> server <code>dropbear</code> startovat na portu <code>80</code>, mÃ­sto standardnÃ­ho <code>22</code>.</p>
      <p id="779fdf9e-a01d-4bb0-b013-14be3db5cc6a" class="">Toto chovÃ¡nÃ­ je zvoleno z prostÃ©ho dÅ¯vodu; <code>dropbear</code> spuÅ¡tÄ›nÃ½ pÅ™i zadÃ¡vÃ¡nÃ­ hesla k disku pouÅ¾Ã­vÃ¡ (a mÄ›l by pouÅ¾Ã­vat!) jinÃ© klÃ­Äe neÅ¾ <code>OpenSSH</code>, kterÃ½ je spuÅ¡tÄ›n pozdÄ›ji. To ovÅ¡em vede ke konfliktu fingerprintu, kterÃ½ je uloÅ¾enÃ½ ve vaÅ¡em <code>~/.ssh/known_hosts</code>, a <code>SSH</code> klient se odmÃ­tne pÅ™ipojit, dokud zadanÃ½ fingerprint neodstranÃ­te.</p>
      <p id="33a6e243-7590-4a38-a415-6ba81f0d3367" class="">Tuto procedÅ¯ru by bylo nutnÃ© provÃ¡dÄ›t po kaÅ¾dÃ©m restartu serveru, proto byl zvolen alternativnÃ­ port, u kterÃ©ho je navÃ­c jistÃ¡ jeho dostupnost i skrz nÄ›kterÃ© nepÅ™Ã­liÅ¡ pÅ™Ã¡telskÃ© firewally.</p>
      <p id="5c81f1c5-8912-4762-ac0f-2ecb5ccd7a2b" class="">Pokud vÃ¡m toto chovÃ¡nÃ­ nevyhovuje, mÅ¯Å¾ete Å™Ã¡dek ÄÃ­slo 35 smazat (v tom pÅ™Ã­pade je pouÅ¾it port <code>22</code>), Äi zvolenÃ© ÄÃ­slo portu nahradit.</p>
      <p id="4a6e7fbe-b767-41d4-b24f-eb66da522010" class=""><strong>Pozor: jednÃ¡ pouze o port pro zadÃ¡nÃ­ hesla k Å¡ifrovanÃ©mu disku, ne o port, kde bude naslouchat</strong> <code><strong>OpenSSH</strong></code><strong>, jakmile je heslo ÃºspÄ›Å¡nÄ› zadÃ¡no a systÃ©m nabootuje!</strong></p>
      <h3 id="d2e9f394-c23f-4848-b06b-309bda155ead" class="">Bonus</h3>
      <p id="30d59cd2-c52c-4238-b4d0-4f8874c2ea4b" class="">Jak je moÅ¾nÃ© pochopit z komentÃ¡Å™e na Å™Ã¡dku 31, veÅ¡kerÃ© nÃ¡sledujÃ­cÃ­ pÅ™Ã­kazy se provedou, jakmile bude instalace dokonÄena. Å˜Ã¡dky zaÄÃ­najÃ­cÃ­ na <code>in-target</code> jsou provedeny v <a href="https://cs.wikipedia.org/wiki/Chroot">chrootu</a>, ostatnÃ­ z cesty instalÃ¡toru. Pokud si vyberete druhou moÅ¾nost, obsah ISO souboru je dostupnÃ½ v adresÃ¡Å™i <code>cdrom/</code>, nainstalovanÃ½ systÃ©m pak v <code>target/</code>.</p>
      <p id="bf3dc352-fac1-4497-99b5-69d2393a77e4" class="">JestliÅ¾e chcete provÃ©st nÄ›jakÃ© zmÄ›ny v nainstalovanÃ©m systÃ©mu jeÅ¡tÄ› v dobÄ› instalace, je moÅ¾nÃ© pÅ™idat dalÅ¡Ã­ Å™Ã¡dky, kterÃ© napÅ™Ã­klad nastavÃ­ statickou IP adresu (doporuÄuji pouÅ¾Ã­t postup na Å™Ã¡dku 36, tedy uloÅ¾it soubory na ISO do adresÃ¡Å™e <code>preseed/</code> a pak je prostÄ› zkopÃ­rovat stylem <code>cp cdrom/preseed/soubor target/etc/soubor; \</code>), Äi podobnÃ© konfigurace.</p>
      <p id="bb0b79d1-744f-4209-80a3-e88123cb333e" class="">NÃ¡sledujÃ­cÃ­ ukÃ¡zka nastavÃ­ <code>OpenSSH</code> (nikoliv <code>dropbear</code>!) aby zamezil loginu <code>root</code>a:</p>
      <pre id="5ba9a070-8617-40c8-a6ed-a9f4af70103c" class="code code-wrap"><code>in-target sed 's/^PermitRootLogin.*/PermitRootLogin no/g' -i /etc/ssh/sshd_config; \</code></pre>
      <p id="e3f4bbd7-da06-4ea1-acf4-09784f2ec5b9" class="">DÃ¡le je moÅ¾nÃ© takÃ© zmÄ›nit port pro <code>OpenSSH</code> napÅ™Ã­klad na mÅ¯j oblÃ­benÃ½ <code>443</code>:</p>
      <pre id="8341cf36-d82b-4b4b-ac16-f4db22768d27" class="code code-wrap"><code>in-target sed 's/^Port.*/Port 443/g' -i /etc/ssh/sshd_config; \</code></pre>
      <p id="0893734f-5dbc-4b37-9643-60c7cf26bb30" class="">PÅ™Ã­kazy mÅ¯Å¾ete zamÃ­chat nÄ›kam mezi ostatnÃ­, Äi pÅ™idat na konec. V takovÃ©m pÅ™Ã­padÄ› si ale musÃ­te dÃ¡t pozor, aby vÅ¡echny mezi prvnÃ­m a poslednÃ­m konÄily sekvencÃ­ <code>; \</code> a poslednÃ­ Å™Ã¡dek byl bez nich.</p>
      <h3 id="12a10958-b002-4fc7-b6ca-efe812ee9f21" class="">IP adresa dropbearu</h3>
      <p id="a16f9c09-b936-4826-907b-31b56013c8d4" class="">PomÄ›rnÄ› uÅ¾iteÄnou moÅ¾nostÃ­ je napÅ™Ã­klad Ãºprava IP adresy, na kterÃ© se startuje <code>dropbear</code>. Ta je v defaultu vybrÃ¡na automaticky a ovlivnit jÃ­ je moÅ¾nÃ© Ãºpravou souboru <code>/etc/initramfs-tools/conf.d/network_config</code>, kam lze pÅ™idat Å™Ã¡dek ve formÃ¡tu:</p>
      <pre id="0bae4d01-e014-4a85-9a3f-26baa05587a9" class="code code-wrap"><code>export IP=&lt;client-ip&gt;:&lt;server-ip&gt;:&lt;gw-ip&gt;:&lt;netmask&gt;:&lt;hostname&gt;:&lt;device&gt;:&lt;autoconf&gt;.</code></pre>
      <p id="50eba874-d55b-4b68-945c-062b95657f4e" class="">K tomu je moÅ¾nÃ© pouÅ¾Ã­t napÅ™Ã­klad nÃ¡sledujÃ­cÃ­ snippet:</p>
      <pre id="d4ce0163-35f3-439e-af2e-934d81697f58" class="code code-wrap"><code>in-target bash -c "echo 'export IP=&lt;client-ip&gt;:&lt;server-ip&gt;:&lt;gw-ip&gt;:&lt;netmask&gt;:&lt;hostname&gt;:&lt;device&gt;:&lt;autoconf&gt;' &gt;&gt; /etc/initramfs-tools/conf.d/network_config" ; \</code></pre>
      <p id="a81fcb98-7033-4dec-b7b2-d4daa32658a5" class="">KonkrÃ©tnÄ› tedy tÅ™eba:</p>
      <pre id="ff436da4-87f0-414e-b1eb-526e800ad8fa" class="code code-wrap"><code>in-target bash -c "echo 'export IP=10.0.0.2::10.0.0.1:255.255.255.0:myserver:eth0' &gt;&gt; /etc/initramfs-tools/conf.d/network_config" ; \</code></pre>
      <p id="bd45e354-2fe8-4bc1-b757-b22b050a9a57" class="">Snippet pÅ™idejte pÅ™ed Å™Ã¡dek 41, kde probÃ­hÃ¡ update <code>initramfs</code>.</p>
      <p id="7debe3da-972a-4094-b352-3215004dc4e6" class="">PoznÃ¡mka: Styl <code>'bash -c "echo ..'</code> je pouÅ¾it zÃ¡mÄ›rnÄ›. NemÃ¡m dobrou zkuÅ¡enost s pÅ™esmÄ›rovÃ¡nÃ­m pomocÃ­ <code>&gt;&gt;</code> pouÅ¾itÃ½mi v <em>preseed</em> souboru. MoÅ¾nÃ¡ by se to dalo nÄ›jak vyescapovat, ale pÅ™Ã­padnÃ© testovÃ¡nÃ­ je docela pomalÃ©, protoÅ¾e jestli to fungovalo se dozvÃ­te vÅ¾dy aÅ¾ na konci instalace a po dvanÃ¡cti pokusech uÅ¾ nemÃ¡m moc nÃ¡ladu na experimentovÃ¡nÃ­.</p>
      <h2 id="585e356d-bf70-400e-80e1-94783b4728ff" class="">VytvoÅ™enÃ­ ISO souboru</h2>
      <p id="6146df93-ba97-4fdd-a7de-20094bd654a1" class="">Jakmile mÃ¡me vÅ¡echny Ãºpravy hotovÃ©, o vytvoÅ™enÃ­ novÃ©ho instalaÄnÃ­ho mÃ©dia se postarÃ¡ tento dlouhÃ½ pÅ™Ã­kaz:</p>
      <pre id="03e119ac-0ac6-4448-8f52-ac2975bb4aca" class="code code-wrap"><code>cd ..
mkisofs -r -V "Ubuntu headless" -cache-inodes -J -l -b isolinux/isolinux.bin -c boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -o headless_ubuntu-14.04.1-server-amd64.iso headless_ubuntu/</code></pre>
      <p id="cc6e6cba-8b2f-48d9-885a-17278f99bfcd" class="">VÃ½sledkem by mÄ›l bÃ½t pÅ™ibliÅ¾nÄ› 600MB velkÃ½ soubor soubor <code>headless_ubuntu-14.04.1-server-amd64.iso</code>.</p>
      <h1 id="9d779f16-1666-43c3-8df3-5c6a34e2e627" class="">Instalace</h1>
      <p id="d270a24d-750b-4d14-838c-efa8ac06ff40" class="">Instalace serveru probÃ­hÃ¡ pomÄ›rnÄ› standardnÃ­m zpÅ¯sobem a kaÅ¾dÃ½ kdo nÄ›kdy instaloval ubuntu na server by to mÄ›l zvlÃ¡dnout.</p>
      <p id="7382db2d-4658-48eb-90a2-ad6e77f7f3ce" class="">OsobnÄ› jsem si zvolil <em>expert mode</em>, jednoduÅ¡e jsem se proklikal vÅ¡emi nastavenÃ­mi a poÄkal, dokud se vÅ¡e neprovede. NezapomeÅˆte hlavnÄ› zvolit Å¾e chcete Å¡ifrovanÃ½ disk, nikoliv Å¡ifrovanou jen home adresÃ¡Å™ uÅ¾ivatele!</p>
      <p id="ec8b0cd0-b9b1-42e5-83ad-90e6a6cea463" class="">Pokud by nÄ›koho zajÃ­maly detaily, zde je Å¡estnÃ¡ctiminutovÃ¡ videoukÃ¡zka celÃ©ho postupu:</p>
      <figure id="244dc7d2-cf54-4939-904c-a8b51d22e2b4">
        <div class="source">
          <iframe width="100%" height="50%" frameborder="0" src="https://www.youtube.com/embed/RykHva_rk4w" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </figure>
      <h1 id="287bdb44-64b5-46a8-b1d2-b3c0ee6608f7" class="">OdemÄenÃ­ disku pÅ™es SSH</h1>
      <p id="5b660240-1871-414b-8cdb-c8aa5b549f2f" class="">OdemÄenÃ­ provedete tak, Å¾e se pÅ™ipojÃ­te pÅ™es <code>SSH</code> jako <code>root</code> na port zadanÃ½ pÅ™i instalaci. Pokud jste nedÄ›lali zmÄ›ny v <em>preseed</em> souboru, tak by to mÄ›l bÃ½t port <code>80</code>. Automaticky by se vÃ¡m mÄ›l naÄÃ­st busybox shell, neboÅ¥ pÅ™i vytvÃ¡Å™enÃ­ instalaÄnÃ­ho mÃ©dia byl pÅ™idÃ¡n vÃ¡Å¡ veÅ™ejnÃ½ klÃ­Ä. Zde staÄÃ­ spustit script <code>unlock.sh</code>, chvÃ­li poÄkat, zadat heslo a to je vÅ¡e. Tedy skoro.</p>
      <pre id="c879e064-6f1b-4483-97c6-6551844d6c11" class="code code-wrap"><code>$ ssh root@192.168.1.114 -p 80
 
 
BusyBox v1.21.1 (Ubuntu 1:1.21.0-1ubuntu1) built-in shell (ash)
Enter 'help' for a list of built-in commands.
 
# unlock.sh
Please wait, this will take some time (35s)..
/scripts/local-top/cryptroot: line 1: modprobe: not found
Unlocking the disk /dev/disk/by-uuid/1ffe6c90-d053-4c49-9225-137e6e21a491 (sda5_crypt)
Enter passphrase:
Reading all physical volumes.  This may take a while...
  Found volume group "NEWMACHINE-vg" using metadata type lvm2
  2 logical volume(s) in volume group "NEWMACHINE-vg" now active
cryptsetup: sda5_crypt set up successfully
Killed
# kill: can't kill pid 274: No such process
kill: can't kill pid 278: No such process</code></pre>
      <p id="f120a340-59b9-469a-8a85-cd70e659bf0e" class="">Jak je moÅ¾nÃ© vidÄ›t, celÃ½ proces generuje podstatnÄ› vÃ­c textu, neÅ¾ je oÄekÃ¡vanÃ© a obÄas se stane, Å¾e celÃ½ proces odemykÃ¡nÃ­ zamrzne na nÄ›jakÃ© podivnÃ© hlÃ¡Å¡ce. Potom je zapotÅ™ebÃ­ vÅ¡e zopakovat, Äi provÃ©st restart, coÅ¾ zatÃ­m vÅ¾dy zabralo.</p>
      <p id="fa90f942-3dd9-4f66-81e7-8ec5bedd8178" class="">Pokud se podÃ­vÃ¡te do scriptu <code>/bin/unlock.sh</code>, zjistÃ­te, Å¾e je to docela bastl, kterÃ½ prvnÄ› zabije proces ÄekajÃ­cÃ­ na interaktivnÃ­ konzoli. Z nÄ›jakÃ©ho dÅ¯vodu to trvÃ¡ pÅ™ibliÅ¾nÄ› 30 vteÅ™in, neÅ¾ se proces ukonÄÃ­. PotÃ© je zadÃ¡no heslo pro Å¡ifrovanÃ½ disk pÅ™es program <code>cryptroot</code> a nÃ¡slednÄ› je opÄ›t zabit proces na interaktivnÃ­ konzoli.</p>
      <pre id="0da6312c-7f1f-4962-8794-368456b237d4" class="code code-wrap"><code>#!/bin/sh
kill -9 `ps | grep "/bin/sh" | grep cryptroot | cut -d " " -f 3`
 
echo "Please wait, this will take some time (35s).."
sleep 35
 
/scripts/local-top/cryptroot
kill -9 `ps | grep "/bin/sh" | grep -v grep | cut -d " " -f 3`</code></pre>
      <p id="45f27290-278f-419b-a918-d2fbe99aad10" class="">PoznÃ¡mka: ZkouÅ¡el jsem pÅ™ijÃ­t na to, jak to udÄ›lat bez zabÃ­jenÃ­ procesu, ale nepodaÅ™ilo se mi. Na internetu se dÃ¡ najÃ­t starÅ¡Ã­ verze celÃ©ho postupu, kde je heslo zadÃ¡no do jakÃ©si pojmenovanÃ© roury, coÅ¾ nynÃ­ nefunguje, neboÅ¥ roura jiÅ¾ nenÃ­ kde by mÄ›la bÃ½t.</p>
      <p id="09b5d567-4d53-4a2b-84d1-8ec1ca174a76" class="">Pokud by nÄ›kdo stÃ¡le tÃ¡pal, zde je videoukÃ¡zka:</p>
      <figure id="f1a7d555-f21f-4c9e-b40e-588337d393b6">
        <div class="source">
          <iframe width="100%" height="50%" frameborder="0" src="https://www.youtube.com/embed/YvbXEbgS5TI" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </figure>
      <h1 id="4447bf61-8b19-4cd9-b35c-ef9772f13743" class="">Zdroje</h1>
      <p id="add9031f-722c-4613-942a-1dee53d0b3dd" class="">PÅ™ijÃ­t na celÃ½ postup a hlavnÄ› ho otestovat mi zabralo cca tÅ™inÃ¡ct hodin ÄistÃ©ho Äasu na dva zÃ¡tahy. BÄ›hem tÃ© doby jsem proÅ¡el nemalÃ© mnoÅ¾stvÃ­ zdrojÅ¯ na tohle tÃ©ma. VÄ›tÅ¡ina z nich je buÄ neaktuÃ¡lnÃ­, nekompletnÃ­, nebo blbÄ›, ale pÅ™esto si myslÃ­m, Å¾e stojÃ­ za zmÃ­nku:</p>
      <ul id="5361d9e0-ede4-40a9-9402-c1824928adb2" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://alyandon.blogspot.cz/2011/06/unlocking-luks-encrypted-lvm-via-ssh-in.html">http://alyandon.blogspot.cz/2011/06/unlocking-luks-encrypted-lvm-via-ssh-in.html</a>
        </li>
      </ul>
      <ul id="35ade5a4-dcc3-42f1-926e-f2d900649ac6" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://askubuntu.com/questions/122505/how-do-i-create-a-completely-unattended-install-of-ubuntu">http://askubuntu.com/questions/122505/how-do-i-create-a-completely-unattended-install-of-ubuntu</a>
        </li>
      </ul>
      <ul id="2fb8325b-82b0-4ec1-ad2f-6698e6e81f8d" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://askubuntu.com/questions/13106/how-can-i-install-ubuntu-on-a-headless-machine">http://askubuntu.com/questions/13106/how-can-i-install-ubuntu-on-a-headless-machine</a>
        </li>
      </ul>
      <ul id="525d984a-e0fa-45cf-be6b-5078bb4e4905" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://askubuntu.com/questions/148095/how-do-i-set-the-grub-timeout-and-the-grub-default-boot-entry">http://askubuntu.com/questions/148095/how-do-i-set-the-grub-timeout-and-the-grub-default-boot-entry</a>
        </li>
      </ul>
      <ul id="4cace6c0-1870-427b-8464-3c4f134bcebe" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://askubuntu.com/questions/178091/how-to-disable-grubs-menu-from-showing-up-after-failed-boot">http://askubuntu.com/questions/178091/how-to-disable-grubs-menu-from-showing-up-after-failed-boot</a>
        </li>
      </ul>
      <ul id="cb6c8c17-5c25-439a-9def-3795deba7711" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://askubuntu.com/questions/337726/full-system-encryption-with-luks-on-headless-server-unlock-with-dropbear-and-b">http://askubuntu.com/questions/337726/full-system-encryption-with-luks-on-headless-server-unlock-with-dropbear-and-b</a>
        </li>
      </ul>
      <ul id="06a026cd-4325-4205-8f1f-9de183df1bea" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://blog.neutrino.es/2011/unlocking-a-luks-encrypted-root-partition-remotely-via-ssh/">http://blog.neutrino.es/2011/unlocking-a-luks-encrypted-root-partition-remotely-via-ssh/</a>
        </li>
      </ul>
      <ul id="530b9232-3924-4daa-916c-28537bc77106" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://blog.nguyenvq.com/blog/2011/09/13/remote-unlocking-luks-encrypted-lvm-using-dropbear-ssh-in-ubuntu/">http://blog.nguyenvq.com/blog/2011/09/13/remote-unlocking-luks-encrypted-lvm-using-dropbear-ssh-in-ubuntu/</a>
        </li>
      </ul>
      <ul id="723c7a08-8242-4e84-b1a9-a335a86c9e6c" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://dev.kakaopor.hu/early-ssh/">http://dev.kakaopor.hu/early-ssh/</a>
        </li>
      </ul>
      <ul id="a4f7045d-a553-4ec6-8d00-8fd07390d0e6" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://dev.kakaopor.hu/early-ssh/example-initialization-script-with-mdadm-luks-crypto-and-scp-copy">http://dev.kakaopor.hu/early-ssh/example-initialization-script-with-mdadm-luks-crypto-and-scp-copy</a>
        </li>
      </ul>
      <ul id="27797704-095f-4099-81a4-1f08083eae5f" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://fabian-affolter.ch/blog/running-dropbear-on-port-222/">http://fabian-affolter.ch/blog/running-dropbear-on-port-222/</a>
        </li>
      </ul>
      <ul id="df27c0e5-d1e6-483e-92f6-74ea3328d6a1" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://forums.debian.net/viewtopic.php?f=5&amp;t=76966">http://forums.debian.net/viewtopic.php?f=5&amp;t=76966</a>
        </li>
      </ul>
      <ul id="5689b270-e155-4fa0-a69e-7c5caf323672" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://gpl.coulmann.de/ssh_luks_unlock.html">http://gpl.coulmann.de/ssh_luks_unlock.html</a>
        </li>
      </ul>
      <ul id="6c8717ab-5304-4c58-a51a-dc9eb1d21333" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://hacksr.blogspot.cz/2012/05/ssh-unlock-with-fully-encrypted-ubuntu.html">http://hacksr.blogspot.cz/2012/05/ssh-unlock-with-fully-encrypted-ubuntu.html</a>
        </li>
      </ul>
      <ul id="658ec574-5006-478c-b800-dd1f8f63fdd1" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://serverfault.com/questions/528674/disable-root-login-for-dropbear">http://serverfault.com/questions/528674/disable-root-login-for-dropbear</a>
        </li>
      </ul>
      <ul id="dd98be61-984d-4660-ba31-b936ecf6f768" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://ubuntuforums.org/archive/index.php/t-1648319.html">http://ubuntuforums.org/archive/index.php/t-1648319.html</a>
        </li>
      </ul>
      <ul id="85df1610-a11c-4d36-8442-ff71034f9f90" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://ubuntuforums.org/showthread.php?t=1648319">http://ubuntuforums.org/showthread.php?t=1648319</a>
        </li>
      </ul>
      <ul id="9c31d425-0cde-4ad3-b733-879e258bc9ec" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://ubuntuforums.org/showthread.php?t=829768">http://ubuntuforums.org/showthread.php?t=829768</a>
        </li>
      </ul>
      <ul id="47c03229-0c5b-47c3-846b-032c70ab42f3" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://unix.stackexchange.com/questions/37024/how-to-open-a-port-early-in-boot-process-to-unlock-luks-via-ssh">http://unix.stackexchange.com/questions/37024/how-to-open-a-port-early-in-boot-process-to-unlock-luks-via-ssh</a>
        </li>
      </ul>
      <ul id="4f12ae25-6301-4f6c-b304-d2c5c038553a" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://unix.stackexchange.com/questions/5017/ssh-to-decrypt-encrypted-lvm-during-headless-server-boot">http://unix.stackexchange.com/questions/5017/ssh-to-decrypt-encrypted-lvm-during-headless-server-boot</a>
        </li>
      </ul>
      <ul id="af7d2dea-94d2-4cbd-afc1-ea9485ab881e" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://wefixbugs.com/blog/Full-System-encryption-with-LUKS-on-headless-server---unlock-with-dropbear-and-busybox-How-311973.html">http://wefixbugs.com/blog/Full-System-encryption-with-LUKS-on-headless-server---unlock-with-dropbear-and-busybox-How-311973.html</a>
        </li>
      </ul>
      <ul id="4e8434f6-6cb9-46ca-a89e-f78d689f2a6a" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://wiki.openwrt.org/doc/uci/dropbear">http://wiki.openwrt.org/doc/uci/dropbear</a>
        </li>
      </ul>
      <ul id="5201e267-1122-4e85-a837-816cbb73500c" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://wiki.openwrt.org/doku.php?id=oldwiki:dropbearpublickeyauthenticationhowto">http://wiki.openwrt.org/doku.php?id=oldwiki:dropbearpublickeyauthenticationhowto</a>
        </li>
      </ul>
      <ul id="291ca934-86e0-470a-955b-1616e3a44efa" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.debian-administration.org/article/579/Unlocking_a_LUKS_encrypted_root_partition_via_ssh">http://www.debian-administration.org/article/579/Unlocking_a_LUKS_encrypted_root_partition_via_ssh</a>
        </li>
      </ul>
      <ul id="8f0f13bb-11ae-41cd-93e9-eeb7be29c742" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.howtoforge.com/unlock-a-luks-encrypted-root-partition-via-ssh-on-ubuntu">http://www.howtoforge.com/unlock-a-luks-encrypted-root-partition-via-ssh-on-ubuntu</a>
        </li>
      </ul>
      <ul id="c8474410-0033-4356-9cd3-bc423f1fa89f" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.ttylinux.net/Documents/multi/node32.html">http://www.ttylinux.net/Documents/multi/node32.html</a>
        </li>
      </ul>
      <ul id="c0dc7ef0-f109-4051-8c53-49151e694034" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://askubuntu.com/questions/250869/how-can-i-install-ubuntu-on-a-device-without-a-screen-nor-a-keyboard/260469#260469">https://askubuntu.com/questions/250869/how-can-i-install-ubuntu-on-a-device-without-a-screen-nor-a-keyboard/260469#260469</a>
        </li>
      </ul>
      <ul id="8493f5d3-bb13-4d07-8468-ca7feb4d7024" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://gist.github.com/timabell/9568173">https://gist.github.com/timabell/9568173</a>
        </li>
      </ul>
      <ul id="216d29f8-911f-4410-80eb-2e5881d55b4b" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://gist.github.com/wolli/5295625">https://gist.github.com/wolli/5295625</a>
        </li>
      </ul>
      <ul id="1b83ff72-3877-44f5-9532-1fa741824e13" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://help.ubuntu.com/10.04/installation-guide/i386/automatic-install.html">https://help.ubuntu.com/10.04/installation-guide/i386/automatic-install.html</a>
        </li>
      </ul>
      <ul id="bc00013a-ea66-4cec-a1c6-70b5b5d35911" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://help.ubuntu.com/community/Installation/FromUSBStick">https://help.ubuntu.com/community/Installation/FromUSBStick</a>
        </li>
      </ul>
      <ul id="b233a45d-88c8-495e-a63d-461ac8af2ed5" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://help.ubuntu.com/community/Installation/NetworkConsole">https://help.ubuntu.com/community/Installation/NetworkConsole</a>
        </li>
      </ul>
      <ul id="ad917f8e-34fc-46bd-ba07-7925d65d9506" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://kiza.eu/journal/entry/697">https://kiza.eu/journal/entry/697</a>
        </li>
      </ul>
      <ul id="e5f806db-86a8-4f2d-9858-004d0b49acf8" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://projectgus.com/2013/05/encrypted-rootfs-over-ssh-with-debian-wheezy/">https://projectgus.com/2013/05/encrypted-rootfs-over-ssh-with-debian-wheezy/</a>
        </li>
      </ul>
      <ul id="ea1aadaa-17e1-461f-8c20-58c95170543d" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://wiki.debian.org/DebianInstaller/Preseed">https://wiki.debian.org/DebianInstaller/Preseed</a>
        </li>
      </ul>
      <ul id="f9c3d55f-cc33-4f05-993a-a938f974d6c3" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="https://www.debian.org/releases/wheezy/example-preseed.txt">https://www.debian.org/releases/wheezy/example-preseed.txt</a>
        </li>
      </ul>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img style="width: 3em;" src="../../rss_icon.png"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img style="width: 3em;" src="../../twitter_icon.png"></a></span>
    <div id="last_five_bottom">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hledÃ¡nÃ­ programÃ¡torskÃ© prÃ¡ce 2021/4">Algoritmus hledÃ¡nÃ­ programÃ¡torskÃ© prÃ¡ce 2021/4</a>
        </li>
        <li>
          <a href="../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="NastavenÃ­ Blenderu pro 3D tisk">NastavenÃ­ Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../3D_modelovani/Geometricky_stred_Prahy.html" title="GeometrickÃ½ stÅ™ed Prahy">GeometrickÃ½ stÅ™ed Prahy</a>
        </li>
        <li>
          <a href="../../Utrzky/Posta_poezie.html" title="PoÅ¡ta (poezie)"><span class="icon">ğŸ—’ï¸</span>PoÅ¡ta (poezie)</a>
        </li>
        <li>
          <a href="../Ostatni/Statni_zklamani.html" title="StÃ¡tnÃ­ zklamÃ¡nÃ­">StÃ¡tnÃ­ zklamÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; DrÅ¾Ã¡k na sluchÃ¡tka">3D TODO list 1; DrÅ¾Ã¡k na sluchÃ¡tka</a>
        </li>
        <li>
          <a href="../Ostatni/Dva_podvodnici.html" title="Dva podvodnÃ­ci">Dva podvodnÃ­ci</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tiskÃ¡rna PrÅ¯Å¡a MK3S+; sestavenÃ­ a prvnÃ­ tisk">3D tiskÃ¡rna PrÅ¯Å¡a MK3S+; sestavenÃ­ a prvnÃ­ tisk</a>
        </li>
      </ul>& <a href="../../Zmeny.html" title="ZmÄ›ny">more</a>
    </div>
    <div>
      <h3>Tagy</h3>
      <p><a href="../../Tagy/sifrovani.html" title="sifrovani">sifrovani</a>, <a href="../../Tagy/ubuntu.html" title="ubuntu">ubuntu</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../Povidky.html" title="PovÃ­dky">ğŸ“‚ PovÃ­dky</a>
        </li>
        <li>
          <a href="../Programovani.html" title="ProgramovÃ¡nÃ­">ğŸ“‚ ProgramovÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../Crypto.html" title="Crypto">ğŸ“‚ Crypto</a>
        </li>
        <li>
          <a href="../Ostatni.html" title="OstatnÃ­">ğŸ“‚ OstatnÃ­</a>
        </li>
        <li>
          <a href="../Knihy.html" title="Knihy">ğŸ“‚ Knihy</a>
        </li>
        <li>
          <a href="../Predstaveni.html" title="PÅ™edstavenÃ­">ğŸ“‚ PÅ™edstavenÃ­</a>
        </li>
        <li>
          <a href="../Abclinuxu.html" title="Abclinuxu">ğŸ“‚ Abclinuxu</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">ğŸ“‚ Hardware</a>
        </li>
        <li>
          <a href="../3D_modelovani.html" title="3D modelovÃ¡nÃ­">ğŸ“‚ 3D modelovÃ¡nÃ­</a>
        </li>
        <li>
          <a href="../3D_tisk.html" title="3D tisk">ğŸ“‚ 3D tisk</a>
        </li>
        <li>
          <a href="../Hrbitov.html" title="HÅ™bitov">ğŸ“‚ HÅ™bitov</a>
        </li>
        <li>
          <a href="../index.html" title="Czech section">ğŸ“‚ Czech section</a>
        </li>
      </ul>
    </div>
  </div>
</body>
</html>
