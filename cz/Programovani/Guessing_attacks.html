<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Guessing attacks</title>
  <link rel="stylesheet" type="text/css" href="../../style.css">
  <link rel="alternate" type="application/atom+xml" href="https://blog.rfox.eu/atom_cz.xml">
  <link rel="shortcut icon" href="/favicon.ico">
  <style>
  pre { line-height: 125%; }
  td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
  span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
  td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
  span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
  .hll { background-color: #ffffcc }
  .c { color: #408080; font-style: italic } /* Comment */
  .err { border: 1px solid #FF0000 } /* Error */
  .k { color: #008000; font-weight: bold } /* Keyword */
  .o { color: #666666 } /* Operator */
  .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
  .cm { color: #408080; font-style: italic } /* Comment.Multiline */
  .cp { color: #BC7A00 } /* Comment.Preproc */
  .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
  .c1 { color: #408080; font-style: italic } /* Comment.Single */
  .cs { color: #408080; font-style: italic } /* Comment.Special */
  .gd { color: #A00000 } /* Generic.Deleted */
  .ge { font-style: italic } /* Generic.Emph */
  .gr { color: #FF0000 } /* Generic.Error */
  .gh { color: #000080; font-weight: bold } /* Generic.Heading */
  .gi { color: #00A000 } /* Generic.Inserted */
  .go { color: #888888 } /* Generic.Output */
  .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
  .gs { font-weight: bold } /* Generic.Strong */
  .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
  .gt { color: #0044DD } /* Generic.Traceback */
  .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
  .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
  .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
  .kp { color: #008000 } /* Keyword.Pseudo */
  .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
  .kt { color: #B00040 } /* Keyword.Type */
  .m { color: #666666 } /* Literal.Number */
  .s { color: #BA2121 } /* Literal.String */
  .na { color: #7D9029 } /* Name.Attribute */
  .nb { color: #008000 } /* Name.Builtin */
  .nc { color: #0000FF; font-weight: bold } /* Name.Class */
  .no { color: #880000 } /* Name.Constant */
  .nd { color: #AA22FF } /* Name.Decorator */
  .ni { color: #999999; font-weight: bold } /* Name.Entity */
  .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
  .nf { color: #0000FF } /* Name.Function */
  .nl { color: #A0A000 } /* Name.Label */
  .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
  .nt { color: #008000; font-weight: bold } /* Name.Tag */
  .nv { color: #19177C } /* Name.Variable */
  .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
  .w { color: #bbbbbb } /* Text.Whitespace */
  .mb { color: #666666 } /* Literal.Number.Bin */
  .mf { color: #666666 } /* Literal.Number.Float */
  .mh { color: #666666 } /* Literal.Number.Hex */
  .mi { color: #666666 } /* Literal.Number.Integer */
  .mo { color: #666666 } /* Literal.Number.Oct */
  .sa { color: #BA2121 } /* Literal.String.Affix */
  .sb { color: #BA2121 } /* Literal.String.Backtick */
  .sc { color: #BA2121 } /* Literal.String.Char */
  .dl { color: #BA2121 } /* Literal.String.Delimiter */
  .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
  .s2 { color: #BA2121 } /* Literal.String.Double */
  .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
  .sh { color: #BA2121 } /* Literal.String.Heredoc */
  .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
  .sx { color: #008000 } /* Literal.String.Other */
  .sr { color: #BB6688 } /* Literal.String.Regex */
  .s1 { color: #BA2121 } /* Literal.String.Single */
  .ss { color: #19177C } /* Literal.String.Symbol */
  .bp { color: #008000 } /* Name.Builtin.Pseudo */
  .fm { color: #0000FF } /* Name.Function.Magic */
  .vc { color: #19177C } /* Name.Variable.Class */
  .vg { color: #19177C } /* Name.Variable.Global */
  .vi { color: #19177C } /* Name.Variable.Instance */
  .vm { color: #19177C } /* Name.Variable.Magic */
  .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:title" content="Guessing attacks">
  <meta name="twitter:description" content="캛l치nek o crackov치n칤 hesel, r콢zn칳ch p콏칤stupech a k tomu jedna mal치 challenge.">
  <script src="../../scripts.js"></script>
  <meta name="description" content="캛l치nek o crackov치n칤 hesel, r콢zn칳ch p콏칤stupech a k tomu jedna mal치 challenge.">
  <meta name="keywords" content="cracking,programovani,python,m0wFG3PRCoJVTs7JcgBwsOXb3U7yPxBB"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img src="../../rss_icon.png" style="width: 3em;"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img src="../../twitter_icon.png" style="width: 3em;"></a></span>
    <div id="last_five_top">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hled치n칤 program치torsk칠 pr치ce 2021/4">Algoritmus hled치n칤 program치torsk칠 pr치ce 2021/4</a>
        </li>
        <li>
          <a href="../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="Nastaven칤 Blenderu pro 3D tisk">Nastaven칤 Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../3D_modelovani/Geometricky_stred_Prahy.html" title="Geometrick칳 st콏ed Prahy">Geometrick칳 st콏ed Prahy</a>
        </li>
        <li>
          <a href="../../Utrzky/Posta_poezie.html" title="Po코ta (poezie)">Po코ta (poezie)</a>
        </li>
        <li>
          <a href="../Ostatni/Statni_zklamani.html" title="St치tn칤 zklam치n칤">St치tn칤 zklam치n칤</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; Dr쮂멺 na sluch치tka">3D TODO list 1; Dr쮂멺 na sluch치tka</a>
        </li>
        <li>
          <a href="../Ostatni/Dva_podvodnici.html" title="Dva podvodn칤ci">Dva podvodn칤ci</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tisk치rna Pr콢코a MK3S+; sestaven칤 a prvn칤 tisk">3D tisk치rna Pr콢코a MK3S+; sestaven칤 a prvn칤 tisk</a>
        </li>
      </ul>& <a href="../../Zmeny.html" title="Zm캩ny">more</a>
    </div>
    <div>
      <h3>Tagy</h3>
      <p><a href="../../Tagy/cracking.html" title="cracking">cracking</a>, <a href="../../Tagy/programovani.html" title="programovani">programovani</a>, <a href="../../Tagy/python.html" title="python">python</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../3D_modelovani.html" title="3D modelov치n칤">游늭 3D modelov치n칤</a>
        </li>
        <li>
          <a href="../3D_tisk.html" title="3D tisk">游늭 3D tisk</a>
        </li>
        <li>
          <a href="../Abclinuxu.html" title="Abclinuxu">游늭 Abclinuxu</a>
        </li>
        <li>
          <a href="../Crypto.html" title="Crypto">游늭 Crypto</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">游늭 Hardware</a>
        </li>
        <li>
          <a href="../Hrbitov.html" title="H콏bitov">游늭 H콏bitov</a>
        </li>
        <li>
          <a href="../Knihy.html" title="Knihy">游늭 Knihy</a>
        </li>
        <li>
          <a href="../Ostatni.html" title="Ostatn칤">游늭 Ostatn칤</a>
        </li>
        <li>
          <a href="../Povidky.html" title="Pov칤dky">游늭 Pov칤dky</a>
        </li>
        <li>
          <a href="../Predstaveni.html" title="P콏edstaven칤">游늭 P콏edstaven칤</a>
        </li>
        <li>
          <a href="../Programovani.html" title="Programov치n칤">游늭 Programov치n칤</a>
        </li>
        <li>
          <a href="../index.html" title="Czech section">游늭 Czech section</a>
        </li>
      </ul>
    </div>
  </div><a href="../../index.html" class="breadcrumb" title="Bystroushaak's blog">Bystroushaak's blog</a> / <a href="../index.html" class="breadcrumb" title="Czech section">Czech section</a> / <a href="index.html" class="breadcrumb" title="Programov치n칤">Programov치n칤</a> / Guessing attacks
  <article id="303c30a2-fa2c-4bf5-8047-7dd343c2cab1" class="page sans">
    <header>
      <h1 class="page-title">Guessing attacks</h1>
    </header>
    <div class="page-body">
      <p id="fdec48f6-33f5-4f18-950c-e73cc6f0ff45" class=""><time>@2012/10/10</time></p>
      <p id="69254048-500a-4357-89ae-e5f3ac6a9b0a" class="">캛l치nek je v캩nov치n <a href="http://www.soom.cz/index.php?name=box&amp;box=user/profile/main&amp;who=nitrexx">nitrexxovi</a>, t콏eba mu to pom콢쬰 p콏ekousnout strach z kritiky a dojde mu, 쬰 t칤m lid칠 ne칰to캜칤 na jeho osobu, ale naopak, jde o snahu vylep코en칤 캜l치nku.</p>
      <h2 id="c340441b-45b2-4de1-91ee-3fd8cbf83e93" class="">Situa캜n칤 n치kres</h2>
      <p id="90e96e26-d6b0-4ef7-8445-db8a6d3c988d" class="">Je rok 2015, nach치z칤te se p콏ed va코칤m po캜칤ta캜em, je noc a jste na po캜치tku t칳denn칤ch pr치zdnin/dovolen칠. Tamtamy na IRC k v치m donesou informaci o neproniknuteln칠m stroji, do kter칠ho tv콢rci uschovali nezn치m칠 tajemstv칤.</p>
      <p id="cd2e186d-db4f-4849-9c17-f03707ebf1d4" class="">Na stroji neb캩쮂 쮂멳n치 jin치 slu쬭a krom캩 telnetu na portu 2222, kter칳 zobraz칤 sporadick칠:</p>
      <pre id="b2260034-76e0-4efb-9c85-72578997fe1b" class="code code-wrap"><code>czCube password:</code></pre>
      <p id="188f83ea-1a9f-44e9-8b6b-2d1597d62bcf" class="">Kr치tk칠 googlen칤 v치m <a href="http://www.czcube.org/">prozrad칤</a>, 쬰 k po캜칤ta캜i nikdy nez칤sk치te fyzick칳 p콏칤stup, proto쬰 se nach치z칤 v amat칠rsk칠m satelitu na orbit캩 a vy se k n캩mu p콏ipojujete pomoc칤 IP2PacketRadio nodu.</p>
      <p id="0ff38b80-a85f-40b9-8088-92422c2c520f" class="">Co takhle sociotechnika, nebo vzd치len칳 칰tok na samotn칠 u쬴vatele ala password sniffer?</p>
      <p id="87c10796-e994-48bb-a6b3-eb536cbf37e8" class="">Bohu쬰l, dal코칤 googlen칤 prozrazuje, 쬰 team stoj칤c칤 za czCube byl popraven za vlastnictv칤 100W 쮂rovky zabij치ky z evropsk칠 unie. Jejich t캩la a v코echno technick칠 vybaven칤 bylo zabaveno a sp치leno v ekoelektr치rn캩 na biomasu, tak쬰 tudy cesta nevede.</p>
      <p id="79864f93-0706-4864-be04-116ad57c4693" class="">Zkus칤te syst칠mu poslat del코칤 string, ale kr치tk치 odpov캩캞 v치m napov칤, 쬰 <a href="http://www.secit.sk/content/buffer-overflow-exploitace-od-uplneho-zacatku">buffer overflow</a> se nekon치, proto쬰 auto콏i vstup hned ze za캜치tku o콏칤zli na 10 znak콢:</p>
      <pre id="c7cc6c77-7d2d-43a4-b51e-60dfe209e5ae" class="code code-wrap"><code>czCube password: a
Wrong password *!
czCube password: aaa
Wrong password ***!
czCube password: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
Wrong password **********!
czCube password:</code></pre>
      <p id="99f23d72-a1d0-463c-9b55-97bd3fbbeabd" class="">Na kari칠ru kosmonauta jste se vyka코lali u kdysi d치vno, v prvn칤 t콏칤d캩 s prvn칤 p캩tkou, tak쬰 sp칤코 ne o letu do vesm칤ru zauva쬿jete o mo쬹osti postavit satelit-zabij치k, kter칳 by czCube vyhledal a snesl na zem, nebo se napojil na jej칤 intern칤 sb캩rnice p콏칤mo ve vesm칤ru. Kr치tk칳 pr콢zkum v치m prozrad칤, 쬰 by se to krap치nek prodra쬴lo a s cenou $40000 za vynesen칤 krychle o hran캩 10cm na to rad코i rychle zapomenete a rozhodujete se, 쬰 se do syst칠mu dostanete vzd치len캩, a콘 to stoj칤 co to stoj칤.</p>
      <p id="d5220088-fa7f-4855-a131-1a121a541a42" class="">Jak se tedy dostat do tohoto satelitu na obloze (soubor <code>czcube_server.py</code> v p콏칤loze)? Je jasn칠, 쬰 v치m nezbude nic jin칠ho, ne heslo prost캩 zkou코et tak dlouho, dokud se netref칤te. Na쬳av칤te tedy konzoli a jdete na to..</p>
      <h2 id="20dc4599-4fce-4053-b624-df09bd03b4da" class="">Guessing attacks</h2>
      <p id="6d87f16f-bb44-4f71-9cda-fde41f2dd055" class="">H치dac칤 칰toky si dovol칤m rozd캩lit na t콏i typy:</p>
      <ul id="a7591d50-c9ca-4337-92f6-5677bc292622" class="bulleted-list">
        <li style="list-style-type:disc">bruteforce</li>
      </ul>
      <ul id="006c94e6-7e82-46d0-a29a-c22887ddc2e0" class="bulleted-list">
        <li style="list-style-type:disc">dictionary</li>
      </ul>
      <ul id="d25bcb6a-6bb6-45b2-8991-d19721e36c2b" class="bulleted-list">
        <li style="list-style-type:disc">side-channel</li>
      </ul>
      <p id="d4dbf0f6-16f8-4ceb-8ac7-3ad4bb3deca8" class="">Je mi jasn칠, 쬰 v캩t코ina z v치s o t캩chto typech ji sly코ela, n캩kter칠 mo쬹치 trochu p콏ekvap칤 t콏et칤 typ 칰toku, kter칠mu se budu v kr치tkosti v캩novat na konec, proto쬰 nem치 smysl ho tu rozpitv치vat - zaslou쬴l by si samostatnou knihu a jsem p콏esv캩d캜en칳, 쬰 se j칤 d콏칤v nebo pozd캩ji do캜k치.</p>
      <h2 id="70026cac-1b14-458e-be72-8db59e2809d6" class="">Bruteforce</h2>
      <p id="091fcd1a-586e-40b0-bf4d-c6ddc2bca6d1" class="">Bruteforce je ze v코ech t콏ech 칰tok콢 nejprimitivn캩j코칤, trv치 nejv칤ce 캜asu a v캩t코ina modern칤ch syst칠m콢 jejich spr치vci v칤 co d캩laj칤 v치s s n칤m <a href="http://en.wikipedia.org/wiki/Fail2ban">po코le do h치je</a>.</p>
      <p id="f6a9be83-34d4-43b0-acdd-cbee02a37851" class="">칔tok spo캜칤v치 jednodu코e v tom, 쬰 budete postupn캩 zkou코et v코echny mo쬹칠 kombinace. Prvn캩 zkus칤te heslo 'a', pak 'b', pak 'c', a doraz칤te k 'z'. Tehdy prost캩 p콏id치te jedno p칤smenko a jedete odznovu: 'aa', 'ab' .. 'az', 'ba', 'bb' .. 'zz'. Pak p콏id치te dal코칤 p칤smeno a pokra캜ujete d치l, dokud neuhodnete heslo.</p>
      <p id="00f4a6e9-2b02-49f8-a6e9-0325b8e89071" class="">Zkou코et n캩co podobn칠ho ru캜n캩 by u hesel s v칤ce jak p치r znaky mohlo trvat opravdu dlouho, proto je vhodn칠 캜innost zautomatizovat, nap콏칤klad scriptem v Pythonu 2.7, kter칳 je, bu캞me realist칠, v roce 2015 st치le je코t캩 코iroce vyu쮂셨치n :)</p>
      <h2 id="385a5602-0f7b-4c62-9843-d113b44d3dad" class="">czcube_cracker.py</h2>
      <p id="14015ebc-9a37-4fb0-a5ad-0377dae8e8e4" class="">Jako ka쬯칳 probl칠m, i tento je mo쬹칠 dekomponovat na jednodu코코칤 칰lohy:</p>
      <ol type="1" id="87aae781-fb8e-47c6-a218-f4c0fefa759f" class="numbered-list" start="1">
        <li>komunikace s czCube</li>
      </ol>
      <ol type="1" id="fcc7c6a2-f2eb-4ffc-ad6c-6be8b69eb16f" class="numbered-list" start="2">
        <li>ov캩콏ov치n칤 hesla - pot콏ebujeme funkci, kter치 n치m 콏ekne jestli u tam jsme</li>
      </ol>
      <ol type="1" id="c9afb162-75d0-4e84-bc70-c1322e47a776" class="numbered-list" start="3">
        <li>generov치n칤 콏et캩zce</li>
      </ol>
      <h3 id="db90bc92-67d9-4a5c-af20-de019abb1acc" class="">Komunikace</h3>
      <p id="f5f5f06a-c45e-42ca-b2b1-b2c7184ef920" class="">Komunikaci s czCube obstar치 <a href="http://docs.python.org/library/telnetlib.html">telnetlib</a>, kter치 se p콏ipoj칤 na zadanou adresu a umo쬹칤 n치m s n칤 komunikovat.</p>
      <pre class="code"><code><span class="kn">import</span> <span class="nn">telnetlib</span>
 
<span class="n">HOST</span>    <span class="o">=</span> <span class="s2">"localhost"</span>
<span class="n">PORT</span>    <span class="o">=</span> <span class="mi">2222</span>
<span class="n">TIMEOUT</span> <span class="o">=</span> <span class="mi">5</span>
 
<span class="n">tn</span> <span class="o">=</span> <span class="n">telnetlib</span><span class="o">.</span><span class="n">Telnet</span><span class="p">(</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">,</span> <span class="n">TIMEOUT</span><span class="p">)</span>
</code></pre>
      <p id="9c74cdb9-8f64-4ccd-ba53-5e22cd21c976" class="">V tomto p콏칤pad캩 se p콏ipoj칤me na localhost kv콢li interaktivn칤 uk치zce, viz podkapitola Uk치zka.</p>
      <h3 id="6b996344-0d80-4922-985a-f8e83b6e6923" class="">Ov캩콏ov치n칤</h3>
      <p id="f9161029-75f8-4fe9-ab47-210460e47b31" class="">Jeliko v칤me co za <a href="http://cs.wikipedia.org/wiki/P%C5%99%C3%ADkazov%C3%BD_%C5%99%C3%A1dek#Prompt">prompt</a> m콢쬰me o캜ek치vat (v칳zvu k zad치n칤 hesla, nebo ozn치men칤 o 코patn칠m hesle), pou쬴jeme metodu <a href="http://docs.python.org/library/telnetlib.html#telnetlib.Telnet.expect">expect()</a> objektu Telnet, kter치 o캜ek치v치 dva argumenty: <code>prompts</code> a nepovinn칳 <code>timeout</code>. Funguje tak, 쬰 zasekne b캩h programu do t칠 doby, dokud server neodpov칤 jedn칤m z 콏et캩zc콢 p콏edan칳ch v poli <code>prompts</code>, nebo dokud nevypr코칤 <code>timeout</code>. Odes칤l치n칤 dat prob칤h치 pomoc칤 metody <a href="http://docs.python.org/library/telnetlib.html#telnetlib.Telnet.write">write()</a>.</p>
      <p id="dd6d010b-a56d-4c0f-ba7b-fbcaf7a42378" class="">Kdy nyn칤 v칤me v코e pot콏ebn칠 pro komunikaci, m콢쬰me napsat funkci, kter치 zkus칤 zadat syst칠mu heslo a vr치t칤 n치m odpov캩캞.</p>
      <pre class="code"><code><span class="n">PROMPT</span>  <span class="o">=</span> <span class="s2">"czCube password: "</span>
<span class="n">ERROR</span>   <span class="o">=</span> <span class="s2">"Wrong password"</span>
 
<span class="k">def</span> <span class="nf">tryPassword</span><span class="p">(</span><span class="n">tn</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
  <span class="n">tn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">password</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
   
  <span class="c1"># cekej na prompt</span>
  <span class="n">e</span> <span class="o">=</span> <span class="n">tn</span><span class="o">.</span><span class="n">expect</span><span class="p">([</span><span class="n">PROMPT</span><span class="p">],</span> <span class="n">TIMEOUT</span><span class="p">)</span>
   
  <span class="c1"># expect() vraci pole o trech prvcich:</span>
  <span class="c1"># [status kod, match object, precteny string]</span>
  <span class="c1"># -&gt; testujeme zda li je vraceny string neco jineho, nez</span>
  <span class="c1"># PROMPT/ERROR</span>
  <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">PROMPT</span><span class="p">)</span> <span class="ow">or</span> <span class="n">e</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">ERROR</span><span class="p">))</span>
</code></pre>
      <p id="bea8183c-edb1-4bc2-8ebd-dd25771fd632" class="">D콢le쬴t칠 je nezapomenout vybrat z bufferu p콏ed prvn칤m pou쬴t칤m funkce <code>tryPassword()</code> prompt, kter칳 na n치s 캜ek치 hned po otev콏en칤 spojen칤:</p>
      <pre class="code"><code><span class="n">tn</span><span class="o">.</span><span class="n">expect</span><span class="p">([</span><span class="n">PROMPT</span><span class="p">],</span> <span class="n">TIMEOUT</span><span class="p">)</span>
</code></pre>
      <p id="befdb509-9767-461a-aae2-59902195cc5a" class="">Nyn칤 m콢쬰me pou쮂셨at na코칤 funkci pro ov캩콏en칤 hesla, kter치 n치m vrac칤 hodnoty True/False podle toho, jestli jsme pou쬴li spr치vn칠, nebo 코patn칠 heslo.</p>
      <h3 id="51bfb4d9-a7dd-4b67-ab75-9c8d021a75c4" class="">Gener치tor</h3>
      <p id="192ef7cb-1bb0-4cc1-8168-6a958f454880" class="">Komunika캜n칤 str치nku cel칠 v캩ci m치me vy콏e코enou, nyn칤 se tedy kone캜n캩 m콢쬰me v캩novat implementaci podprogramu, kter칳 p콏i ka쬯칠m jeho zavol치n칤 vr치t칤 o trochu v칤ce rozvinut칳 string vyu쬴teln칳 k l치m치n칤 hesla.</p>
      <p id="14c53cb0-375d-4e7c-b695-ed44a110c2fe" class="">N캩koho naivn캩j코칤ho by mo쬹치 napadlo si 콏et캩zce p콏ed-generovat do pam캩ti a pak je zkou코et. To by nebyl moc dobr칳 n치pad, proto쬰 v코echny kombinace zab칤raj칤 skute캜n캩 velmi velk칠 mno쬽tv칤 pam캩ti. My si na to nap칤코eme speci치ln칤 objekt, kter칳 n치m p콏i ka쬯칠m zavol치n칤 p콏epo캜칤t치 string.</p>
      <p id="1bb86e9f-689b-477e-b782-9f8a67364813" class="">Tento typ objektu se naz칳v치 <a href="http://cs.wikipedia.org/wiki/Iterator">iter치tor</a> a umo쮄갓je n치m proch치zet sekvence pomoc칤 jednotn칠ho rozhran칤. Podpora pro iter치tory je p콏칤mo zabudovan치 do Pythonu, proto s n칤m pot칠 m콢쬰me pracovat pomoc칤 jednoduch칠 for smy캜ky.</p>
      <p id="a78369ea-5c89-4cea-b241-a24df27454d8" class="">Implementace iter치toru v Pythonu je dost jednoduch치 - sta캜칤 ve vlastn칤 t콏칤d캩 nadefinovat dv캩 metody: <code>__iter__()</code> a <code>next()</code>. <code>__iter__()</code> mus칤 vracet objekt iter치toru, v tomto p콏칤pad캩 tedy <code>self</code>, neboli s치m sebe. <code>next()</code> vrac칤 v쬯y dal코칤 prvek ze sekvence, nebo vyj칤mku <code>StopIteration</code>, pokud byl dosa쬰n konec sekvence.</p>
      <p id="8f9c2e20-c153-4e83-bce7-a430bdd030ac" class="">Zde je objekt, kter칳 p콏i ka쬯칠m sv칠m pou쬴t칤 updatuje string p콏esn캩 tak jak pot콏ebujeme pro na코e 칰캜ely:</p>
      <pre class="code"><code><span class="k">class</span> <span class="nc">Brute</span><span class="p">():</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">seed</span><span class="p">):</span>
    <span class="c1"># seed si ulozime jako pole znaku</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">seed</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">seed</span>
 
    <span class="c1"># pospojujeme objekty v pameti</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">next_brute</span> <span class="o">=</span> <span class="n">Brute</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span> <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
 
    <span class="c1"># ukazatel na aktualni pismeno, na zacatku -1, aby se objekt</span>
    <span class="c1"># neukazoval ve vypisu, kdyz ho jeste nepouzivame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
 
  <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># zvys hodnotu act o jedna</span>
    <span class="c1"># pokud act prekroci velikost pole self.seed, aktualizuj dalsi objekt</span>
    <span class="c1"># v rade</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="mi">0</span>
 
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_brute</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">next_brute</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
 
  <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span>
 
  <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> <span class="c1"># proved jeden krok</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
 
  <span class="c1"># vrat textovou reprezentaci vsech objektu jdoucich v rade za sebou</span>
  <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># preskakuj zatim nepouzite objekty - jinak by misto B vypisoval</span>
    <span class="c1"># AAAAAAB</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">""</span>
 
    <span class="c1"># zjisti znak dalsiho objektu v rade</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_brute</span><span class="p">:</span>
      <span class="n">out</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_brute</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
 
    <span class="k">return</span> <span class="n">out</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">act</span><span class="p">]</span>
</code></pre>
      <p id="d211373a-a94b-4cb6-9712-7e71b938fbbe" class="">N캩koho mo쬹치 zaraz칤 pou쬴t칤 inline if. Ned캩ste se, funguje to stejn캩 jako klasick치 if podm칤nka, jen je to kompaktn캩j코칤 z치pis co se t칳캜e p콏i콏azov치n칤 prom캩nn칳ch.</p>
      <pre class="code"><code><span class="k">if</span> <span class="n">podm칤nka</span><span class="p">:</span>
  <span class="n">prom</span> <span class="o">=</span> <span class="n">n캩co</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">prom</span> <span class="o">=</span> <span class="n">n캩co_jin칠ho</span>
</code></pre>
      <p id="3c5434a7-d77b-4a5d-9f35-c235a0b132b5" class="">lze p콏epsat na</p>
      <pre class="code"><code><span class="n">prom</span> <span class="o">=</span> <span class="n">n캩co</span> <span class="k">if</span> <span class="n">podm칤nka</span> <span class="k">else</span> <span class="n">n캩co_jin칠ho</span>
</code></pre>
      <p id="20436c2b-686f-46f2-ad7c-779bffc61297" class="">Objekt p콏i vytvo콏en칤 o캜ek치v치 dva parametry - <code>length</code>, kter칳 ud치v치 kolik p칤smen chceme nechat vygenerovat a <code>seed</code>, kter칳 pro zm캩nu ur캜uje z 캜eho se budou kombinace skl치dat. Jako <code>seed</code> je mo쬹칠 pou쮂셦 jak string (v tom p콏칤pad캩 se pou쬴j칤 jednotliv칠 znaky), tak pole string콢, co se n치m bude hodit pozd캩ji.</p>
      <p id="19e6eff1-8d35-4afb-822a-6af149ace7f2" class="">Pou쬴t칤 objektu je d칤ky vyu쬴t칤 iter치toru siln캩 trivi치ln칤:</p>
      <pre class="code"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Brute</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"abc"</span><span class="p">):</span>
  <span class="nb">print</span> <span class="n">i</span>
</code></pre>
      <p id="6e9ea241-24d0-48d2-be59-9f255c35eace" class="">vyp칤코e:</p>
      <pre id="90480a7c-948d-41ca-a3c5-4b5a420bbe68" class="code code-wrap"><code>a
b
c
aa
ab
ac
ba
bb
bc
ca
cb
cc</code></pre>
      <p id="520f6b50-0983-40bc-ac8f-af79d5234d7c" class="">Douf치m 쬰 v치m nemus칤m slo쬴t캩 vysv캩tlovat, 쬰 nyn칤 sta캜칤 m칤sto vypisov치n칤 stringu pou쮂셦 ji d콏칤ve nadefinovanou metodu <code>tryPassword()</code>, kter칠 p콏ed치me jako druh칳 argument vygenerovan칳 string a bruteforcer je na sv캩t캩.</p>
      <h2 id="116fd511-53e2-4cca-a4ee-9a2003dd69ac" class="">Uk치zka</h2>
      <p id="5483bd9c-475d-4b8e-9e93-2af7ad4b2e79" class="">V p콏칤loze najdete dva soubory; <code>czcube_bruteforcer.py</code> a <code>czcube_server.py</code>.</p>
      <p id="6df8e7d5-ab1c-439f-9faa-17fd8be7c606" class="">Jejich funkce by m캩la b칳t v코em jasn치 z jejich n치zvu, ale pro jistotu - server je jednoduch칳 server, kter칳 o캜ek치v치 va코e heslo na portu 2222, tak jak jsem psal v prvn칤 kapitole.</p>
      <p id="f8f1db07-fbad-4c02-a029-21595440ea3a" class=""><strong>Server heslo nev칤, je v n캩m ulo쬰n칠 jako osolen칳 hash. Jakmile mu dod치te spr치vn칠 heslo, pou쬴je ho pro rozbalen칤 za코ifrovan칳ch dat, kter칠 v치m vyp칤코e na v칳stup, tak쬰 se m치te pro캜 sna쬴t ;)</strong></p>
      <p id="7bc0c552-99b5-424a-adec-75fac382de9b" class="">Bruteforcer je pak implementace scriptu tak jak jsem o n칤 psal, s t칤m 쬰 se automaticky sna쮂 p콏ipojit k serveru, kter칳 je zapot콏eb칤 nejd콏칤ve spustit, jinak v코e skon캜칤 chybou.</p>
      <p id="5d08127f-ccd1-4840-9ca0-2d4fdb3a8b8d" class="">Pros칤m ty 캜ten치콏e, kte콏칤 se do serveru dostanou, aby si obsah nechali pro sebe a nekazili challenge ostatn칤m.</p>
      <h2 id="8bf6ac5e-16e6-42ed-bfc9-4f82d371c324" class="">Probl칠my</h2>
      <p id="26b4bb59-d834-4cf2-9bdf-30843c8cdbe0" class="">Pokud jste zkou코eli p콏edchoz칤 p콏칤klady, nejsp칤코e jste si v코imli jednoho z콏ejm칠ho probl칠mu; rychlosti, nebo sp칤코 pomalosti.</p>
      <p id="d41e4ae4-de29-48ba-92d5-ff2164a3d388" class="">D콢vod콢 pro캜 script b캩쮂 tak pomalu je hned n캩kolik:</p>
      <p id="bf1e9907-c807-4929-9911-f734adc2b3c6" class="">1) Implementace gener치toru string콢 pomoc칤 iter치tor콢 nen칤 zrovna nejefektivn캩j코칤 co se t칳캜e vol치n칤 funkc칤, ale po콏치d zvl치d치 generovat 콏치dov캩 tis칤ce a deseti-tis칤ce po쬬davk콢 za vte콏inu, co je p콏칤pustn칠 u s칤콘ov칳ch slu쬰b, ale pro l치m치n칤 hesel za코ifrovan칳ch soubor콢 by to cht캩lo n캩co efektivn캩j코칤ho, nap콏칤klad vno콏en칠 for smy캜ky, 캜i implementaci v kompilovan칠m jazyce.</p>
      <p id="e60f4f50-5953-4b2c-a0d8-a28cd3ab3c3e" class="">2) 캛ek치n칤 na odezvu od serveru po zad치n칤 ka쬯칠ho hesla (<code>expect()</code> v <code>tryPassword()</code>) je neefektivn칤.</p>
      <p id="ce4c6f56-9c46-4d44-b883-e5bd5114ec32" class="">3) Paralelizace. U tohoto serveru to sice fungovat nebude, proto쬰 obsluhuje v쬯y jen jednoho klienta, ale u FTP, HTTP, telnetu 캜i SSH byste mohli spustit script v칤cekr치t, t콏eba stokr치t.</p>
      <h2 id="7f6d14b7-aff0-4dd7-a08b-de9dcf42aeac" class="">N치vrhy na vylep코en칤</h2>
      <p id="db8657bb-1c51-493d-9955-a80e194b5794" class="">Abych to tedy shrnul na jedno m칤sto:</p>
      <h3 id="709116aa-615b-4613-b3a2-2ca0c30a30c1" class="">Hromadn칠 pos칤l치n칤 dat</h3>
      <p id="6520712e-1b68-424b-8db1-2ae1fb50d86b" class="">Zkuste data pos칤lat hromadn캩, najednou t콏eba sto, tis칤c nebo deset tis칤c pokus콢 bez 캜ten칤 odpov캩d칤. Odpov캩di pak p콏e캜t캩te a parsujte nar치z, pokud natref칤te na heslo, zjist캩te ho d캩len칤m interval콢.</p>
      <h3 id="d9a12ec5-fd10-4de3-9592-5623dfb043b2" class="">Ukl치d치n칤 stavu</h3>
      <p id="7e4ef4c2-274c-4f4a-9272-bccb36a6ca51" class="">M치lokdy si m콢쬰te dovolit luxus nep콏eru코en칠ho b캩hu, m칤t mo쬹ost script spustit v칤cekr치t je tak칠 velk칠 plus. Upravte iter치tor tak, aby se dalo zadat od jak칠 hodnoty m치 za캜칤nat. K tomu se tak칠 bude hodit dod캩lat do scriptu pr콢b캩쬹칳 v칳pis, abyste v캩d캩li, kde script p콏edt칤m skon캜il.</p>
      <h3 id="013664d6-59bc-49dd-a448-20a3bf405154" class="">Paralelizace</h3>
      <p id="f79856ec-370a-4750-ad34-1455dfb5351b" class="">Jakmile budete m칤t hotov칠 ukl치d치n칤 stav콢, zkuste paralelizaci pomoc칤 v칤cero vl치ken. Vyzkou코ejte si jejich synchronizaci a ukon캜en칤 v코ech ostatn칤ch vl치ken ve chv칤li, kdy jedno z nich objev칤 heslo.</p>
      <p id="66974c52-fabc-4873-9e6c-2a3254bbc99c" class="">Hint: Data od serveru m콢쬰te rozd캩lit na jednotliv칠 콏치dky, z nich m콢쬰te p콏evodem na <code>set()</code> hromadn캩 vyfiltrovat duplicitn칤 z치znamy a detekovat, jestli v치m vr치til n캩co ne캜ekan칠ho.</p>
      <h3 id="035a1948-133e-4161-b0fa-cca43d051419" class="">Zkou코en칤 hesel na p콏esk치캜ku, pozp치tku</h3>
      <p id="f05181ad-293c-4af9-aaba-43ea76505804" class="">Neza캜칤nejte od za캜치tku, ale t콏eba od p콢lky, nebo od konce (vy쬬duje reverzaci iter치toru). M치lokdo pou쮂셨치 hesla jako aaaa, tak쬰 se d치 캜ekat, 쬰 prvn칤 캜tvrtina v코ech pokus콢 bude zbyte캜n치.</p>
      <h3 id="87c840cf-25c8-4007-a7e6-dafc45eb6de9" class="">Randomizace</h3>
      <p id="53af07f1-f244-4fea-b463-0b7b96264546" class="">Pova쬿jete se za 코콘astlivce? Zkuste minim치ln캩 v jednom vl치kn캩 n치hodn칳 gener치tor, existuje jist치 nenulov치 코ance, 쬰 se tref칤 d콏칤v ne va코e spo콏치dan칠 pokusy :)</p>
      <h2 id="6c7d688a-c8dd-4f2e-9f55-02961a06e9bc" class="">Pou캜en칤</h2>
      <p id="0b4f61b0-2cba-4595-88af-edd74aaa29fa" class="">Bruteforce je nejm칠n캩 efektivn칤 ze v코ech mo쬹칳ch zp콢sob콢 h치d치n칤 hesel, proto쬰 mus칤te otrocky vyzkou코et v코echny mo쬹칠 kombinace, co u hesel s d칠lkou nad deset znak콢 i v p콏칤pad캩 velmi v칳konn칳ch po캜칤ta캜콢 s t칠m캩콏 nulovou latenc칤 trv치 des칤tky a stovky let, kdy u쬴vatel pou쬴je pouze mal치/velk치 p칤smena bez diakritiky a 캜칤sla.</p>
      <p id="f8c842ff-ab43-4c37-9458-502b7e437f2a" class="">Pokud u쬴vatel pou쬴je dostate캜n캩 siln칠 (slo쬴t칠 a dlouh칠) heslo, m콢쬰 b칳t fyzik치ln캩 nemo쬹칠 tento typ 칰toku prov칠st i pokud v치m v tom nebr치n칤 faktory jako omezen칳 po캜et pokus콢, rychlost linky 캜i nutnost komunikace pouze v jednom threadu.</p>
      <p id="575cb8a9-a2f2-4026-9336-f496f25e2537" class="">V dob캩 <a href="http://cs.wikipedia.org/wiki/UTF-8">UTF</a> se nav칤c zkou코en칤 v코ech mo쬹칳ch hesel podstatn캩 protahuje a pokud by u쬴vatel칠 serveru kam se sna쮂셦e vl치mat pou쬴li vcelku kr치tk칠 heslo v 캜칤n코tin캩, asi byste byli bez 코ance, i kdybyste m캩li sebelep코칤 cracker.</p>
      <p id="0edaa892-7303-45d5-811f-c2a8a3cbace4" class="">Pokud by v치s zaj칤malo kolik pokus콢 je zapot콏eb칤 k vyzkou코en칤 v코ech kombinac칤 hesla, na internetu se daj칤 naj칤t r콢zn칠 <a href="http://www.soom.cz/index.php?name=box&amp;box=projects/bruteforce/main">kalkula캜ky</a>, nebo si to m콢쬰te spo캜칤tat sami - jedn치 se o jednoduchou <a href="http://www.matweb.cz/bezpecnost-hesla">칰lohu</a> na <a href="http://cs.wikipedia.org/wiki/Variace_%28kombinatorika%29">variace</a>.</p>
      <p id="b7931836-5319-43be-9bb3-f02c0be99527" class="">Pro ilustraci; Za p콏edpokladu, 쬰 dok치쬰te ka쬯ou vte콏inu vyzkou코et milion hesel <code>a-zA-Z0-9</code>, tak:</p>
      <ol type="1" id="e75a652a-6b89-4ebc-8ccf-4687c7604bc8" class="numbered-list" start="1">
        <li>znak zabere 1 vte콏inu</li>
      </ol>
      <ol type="1" id="a9524856-0252-4586-8863-9e7aa7b1f94f" class="numbered-list" start="2">
        <li>znaky zaberou 1 vte콏inu</li>
      </ol>
      <ol type="1" id="14af414d-6cb9-455d-bd58-45f84d20e603" class="numbered-list" start="3">
        <li>znaky zaberou 1 vte콏inu</li>
      </ol>
      <ol type="1" id="0f66d125-cfe7-437f-805a-d460246d2219" class="numbered-list" start="4">
        <li>znaky zaberou 15 vte콏in</li>
      </ol>
      <ol type="1" id="d70eef0d-4024-4efc-b1de-2e34cca9f22e" class="numbered-list" start="5">
        <li>znak콢 zabere 15 minut, 31 vte콏in</li>
      </ol>
      <ol type="1" id="bc3dfd4a-ede5-4f09-b999-844c9b03b81c" class="numbered-list" start="6">
        <li>znak콢 zabere 16 hodin, 2 minuty a 11 vte콏in</li>
      </ol>
      <ol type="1" id="4658801f-c843-4173-94d0-b4a623ecee12" class="numbered-list" start="7">
        <li>znak콢 zabere 41 dn칤, 10 hodin, 15 minut a 46 vte콏in</li>
      </ol>
      <ol type="1" id="126e8633-07ba-4590-913a-3d2d065638fd" class="numbered-list" start="8">
        <li>znak콢 zabere 7 let, 11 dn칤, 18 hodin, 17 minut a 32 vte콏in</li>
      </ol>
      <ol type="1" id="69fe45fd-7d51-41ec-a367-fb81a2bcc3df" class="numbered-list" start="9">
        <li>znak콢 zabere 435 let, 364 dn칤, 6 minut, 38 vte콏in</li>
      </ol>
      <ol type="1" id="88bc0a8a-7cf2-470a-b465-8eb586814aa4" class="numbered-list" start="10">
        <li>znak콢 zabere 27031 let, 288 dn칤, 51 minut, 6 vte콏in</li>
      </ol>
      <p id="3c9b9a2a-61a4-476a-b016-4c661b4f65bf" class="">Shrnuto: Bruteforce je nejtrivi치ln캩j코칤 a nejm칠n캩 efektivn칤 - d치 se p콏irovnat k slep칠mu ml치cen칤 sekerou do dve콏칤, co skv캩le funguje v p콏칤pad캩 d콏ev캩n칳ch dve콏칤, ale a jednou naraz칤te na 쬰lezn칠, tak sp칤코 um콏ete st치콏칤m, ne je prostou silou rozml치t칤te.</p>
      <h2 id="1a947741-539a-41b7-b24e-8ad9f40f8a70" class="">Dictionary</h2>
      <p id="dfabd5f4-3440-40e2-897a-c5dcad534d59" class="">Slovn칤kov칳 칰tok je vylep코en칤m p콏edchoz칤ho 칰toku, kdy m칤sto generov치n칤 text콢 zkou코칤te p콏edem p콏ipraven치 slova z textov칠nho souboru, takzvan칠ho <em>wordlistu</em>.</p>
      <p id="925691c2-4aad-48e1-a6e0-df5cc71d0879" class="">Tento typ 칰toku stav칤 na p콏edpokladu, 쬰 v캩t코ina lid칤 na sv캩t캩 nem치 poruchu osobnosti, tak쬰 jim d캩l치 probl칠m si zapamatovat zcela n치hodn칳 string typu "<code>uF8x/q`ab춶7dN</code>" a tak m칤sto toho pou쮂셨aj칤 r콢zn치 v칤ce/m칠n캩 lehce uh치dnuteln치 hesla. Jeden m콢j kolega z pr치ce takhle v코ude pou쮂셨치 heslo <code>supersuper</code> (to nen칤 tajemstv칤, v칤 to o n캩m cel칠 odd캩len칤).</p>
      <p id="c2adca10-8596-42ac-97a1-192451179eb1" class="">Pokud se pod칤v치te na <a href="http://www.security-portal.cz/clanky/50-nejpou%C5%BE%C3%ADvan%C4%9Bj%C5%A1%C3%ADch-hesel-pro-web-v-%C4%8Dr">tvrd치 data</a> z칤skan치 z unikl칠 datab치ze 37000 u쬴vatel콢, zjist칤te, 쬰 se najdou 콏치dov캩 stovky lid칤, kte콏칤 pou쮂셨aj칤 stejn치 hesla. Obl칤ben칠 je <code>123456</code>, <code>123456789</code>, <code>martin</code>, <code>milacek</code>, <code>maminka</code>. V코ak to zn치te..</p>
      <p id="a2344eec-8144-4cbf-876e-ae052940e903" class="">Na internetu se povaluj칤 r콢zn캩 velk칠 slovn칤ky, kter칠 se sna쮂 obs치hnout seznamy t캩ch nepou쮂셨an캩j코칤ch hesel a fr치z칤 o obsahu milion콢 polo쬰k. I kdy se tento po캜et m콢쬰 zd치t vcelku velk칳, ve skute캜nosti je st치le o cel칠 콏치dy men코칤, ne po캜et kombinac칤 hesla p콏i bruteforce (miliardy, triliardy, sextioliny a j치 nev칤m co je코t캩 :)).</p>
      <p id="c4b3fcb1-9d42-4b83-ba27-1566f13b3de7" class="">칔prava st치vaj칤c칤ho scriptu tak, aby pou쮂셨al slovn칤k je tak trivi치ln칤, 쬰 v치s s n칤 ani nebudu zat캩쬺vat. Najdete ho v p콏칤loze pod jm칠nem <code>czcube_dict.py</code>.</p>
      <h2 id="78d9d3ee-e55c-4a90-bd3f-ac81739dca42" class="">Kde vz칤t slovn칤k</h2>
      <p id="841cbce0-9375-48fe-bb9d-daf04e9aea0b" class="">Sh치n캩n칤 dobr칠ho slovn칤ku je podstatn캩 slo쬴t캩j코칤, ne naps치n칤 scriptu, kter칳 bude hesla zkou코et. Na internetu se daj칤 relativn캩 jednodu코e naj칤t docela rozs치hl칠 a dobr칠 slovn칤ky. Pokud budete googlit, nehledejte <em>"slovn칤k"</em>, ale <em>"wordlist"</em>, nezapome켿te tak칠 na to, 쬰 pro 캛echy bude vhodn캩j코칤 캜esk칳.</p>
      <p id="4a67aea9-b63d-44e2-91a2-52cccc3b9637" class="">P치r odkaz콢:</p>
      <ul id="f345188e-1baf-4349-97e0-6191bfd5e68b" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://wordlist.ic.cz/">http://wordlist.ic.cz/</a>
        </li>
      </ul>
      <ul id="3ab635d4-2cbb-4c8e-8e6d-d642d015d97a" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://verifikace.sweb.cz/">http://verifikace.sweb.cz/</a>
        </li>
      </ul>
      <ul id="f40635b1-9be9-4492-8043-953997e55914" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://wiki.airdump.cz/Wordlist">http://wiki.airdump.cz/Wordlist</a>
        </li>
      </ul>
      <ul id="aa4aa85d-0fc2-44cb-843f-5d206c93133b" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://mozektevidi.cz/wordlist-download/">http://mozektevidi.cz/wordlist-download/</a>
        </li>
      </ul>
      <ul id="9d3c6241-bd22-4c64-824e-54a4123eb722" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.passwordy.net/index.php?category=2">http://www.passwordy.net/index.php?category=2</a>
        </li>
      </ul>
      <ul id="8f29872d-636b-480d-bca4-cd7c41506a00" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://www.soom.cz/index.php?name=download/kategorie&amp;sid=30">http://www.soom.cz/index.php?name=download/kategorie&amp;sid=30</a>
        </li>
      </ul>
      <ul id="ec6e0a9a-3058-463e-9789-61f23bed0942" class="bulleted-list">
        <li style="list-style-type:disc">
          <a href="http://gpsfreemaps.net/navody/security/komplexni-cesky-a-slovensky-wordlist-ke-stazeni">http://gpsfreemaps.net/navody/security/komplexni-cesky-a-slovensky-wordlist-ke-stazeni</a>
        </li>
      </ul>
      <p id="f9d80b3d-f162-4efd-90da-4a25039965de" class="">Pokud budete hledat, najdete jich tis칤ce - jedn치 se o jednoduch칳 a tud칤 obl칤ben칳 typ 칰toku, kter칳 proti b캩쬹칳m u쬴vatel콢m dosahuje slu코n칠 칰캜innosti a z치rove켿 nevy쬬duje prakticky 쮂멳n칠 znalosti. D칤ky tomu se mu v캩nuje ka쬯칳 druh칳 a je obzvl치코콘 obl칤ben칳 u lam, kter칠 maj칤 pocit 쬰 kdy maj칤 na str치nk치ch wordlist, wwwhack a brutus, jsou z nich hacke콏i.</p>
      <p id="32ecf92c-72ac-4d30-91db-93ed2fd83027" class="">Jestli쬰 se n캩kdy budete cht칤t pobavit, doporu캜uji zkusit wwwhack a brutus jako keywordy do google a omezit vyhled치v치n칤 na str치nky pouze 캜esky. Dojde v치m, 쬰 soom je na tom sice 코patn캩, ale po콏치d je kam upadat :)</p>
      <h2 id="c17267e9-f81e-4968-827f-ef233c21e376" class="">Vlastn칤 slovn칤ky</h2>
      <p id="80ea04c9-4798-4fa4-bd43-538a936fda69" class="">Ve chv칤li kdy pou쬴jete ciz칤 slovn칤k, postupujete o jeden level v칳코e ne <em>bruteforce콏i</em> - nam칤sto abyste tup캩 zkou코eli mno쬴nu v코ech mo쬹칳ch variac칤 znak콢, zkou코칤te slova, kter치 u쬴vatel mohl pou쮂셦 k vytv치콏en칤 hesel. Jedn치 se v코ak jen o jednodu코코칤 variantu bruteforce, u kter칠 prakticky vzato st치le nen칤 nutn칠 pou쮂셨at mozek.</p>
      <p id="be890e1c-6457-482d-93d5-f92610bda33b" class="">Jeliko se sna쮂셦e vl치mat do satelitu na orbit캩, lze jen st캩쮂 p콏edpokl치dat, 쬰 auto콏i zvl치dnuv코칤 postavit funk캜n칤 satelit byli takov칤 idioti, 쬰 pou쬴li slovn칤kov칠 heslo. Bude to tedy cht칤t n캩co v칤c - na m칤ru postaven칳 slovn칤k.</p>
      <p id="6851f0dc-efc5-4f9c-ac64-a8bbbcbcee61" class="">K tomu budete pot콏ebovat trochu znalost칤 z psychologie a p치r zku코enost칤 s u쬴vatelsk칳mi hesly.</p>
      <h2 id="d480c283-bd65-47df-97ea-aa01912bf4a9" class="">Co byste m캩li v캩d캩t o heslech</h2>
      <p id="cf21afa9-afc1-420e-8ee7-de4a2ec1a3c3" class="">V textu <a href="http://www.soom.cz/index.php?name=usertexts/show&amp;aid=731">Co je vlastn캩 soom?</a> jsem se zm칤nil, 쬰 na lidi na internetu je mo쬹칠 nahl칤쬰t podobn캩 jako na model neuronu. Na jednu stranu dod치te vstupy a na druh칠 se 캜as od 캜asu do캜k치te v칳stupu v podob캩 n캩jak칠ho obsahu.</p>
      <p id="0d273dba-6c6a-40f2-bd35-42110be6acc4" class="">Tento poznatek m콢쬰te vyu쮂셦 i p콏i vytv치콏en칤 slovn칤ku; co ud캩l치 v캩t코ina lid칤, kdy vytv치콏칤 sv칠 heslo? Pou쬴je informace ze vstup콢 - ze sv칠ho okol칤 a ze sv칠 pam캩ti.</p>
      <p id="5fbaeb03-b130-4829-af73-6a0b6d9422a9" class="">D칤ky tomu jak funguje lidsk치 mysl je pravd캩podobn칠, 쬰 nebudou pou쬴ta b캩쬹치 slova bez n캩jak칠ho speci치ln칤ho v칳znamu pro dan칠ho jednotlivce. St캩쮂 se setk치te s heslem "a", "proto쬰", "v캜era", "hlavn캩" a tak podobn캩. Ne 쬰 by to bylo nemo쬹칠, ale heslo je pro 캜lov캩ka 캜asto n캩캜칤m speci치ln칤m (naz칳vejme to <code>JehoTajemstv칤m</code>), kdy u si ho mus칤 pamatovat.</p>
      <p id="e1dbff24-2f47-4de8-bbde-141526af6321" class="">캛asto m콢쬰te narazit na podstatn칠 jm칠no ze 쬴vota u쬴vatele - jm칠no holky, rodi캜콢, babi캜ky, psa, ko캜ky, obl칤ben칳 sportovec 캜i herec, postava z knihy, datum narozen칤, kus telefonn칤ho 캜칤sla.</p>
      <p id="ef05ecf8-9dae-489d-9912-fd853b1c7e94" class="">Z vlastn칤 zku코enosti mus칤m 콏칤ct, 쬰 v hesle se ob캜as vyskytne n치zev str치nky, n캩co ve smyslu <code>soomheslo</code>, co m캩 p콏iv치d칤 k dal코칤mu poznatku - 캜asto je v hesle variace na slovo <code>heslo</code>, anglicky <code>password</code>, <code>pass</code>, <code>pwd</code>.</p>
      <p id="ee1d1c72-bbb1-421c-890a-cccc4dcb2131" class="">V heslech b캩쬹칳ch u쬴vatel콢 se skoro nikdy nevyskytuj칤 speci치ln칤 znaky, jednak proto 쬰 je neum칤 zadat, druhak proto 쬰 je pro n캩 opruz a n치maha je ps치t. Maximum na co naraz칤te jsou znaky "<code>.,-_*!?</code>", ale to je v칤ce/m칠n캩 vyj칤mka.</p>
      <p id="d4aa23db-2343-418d-81e8-dc12acd570cc" class="">Dal코칤 d콢le쬴t칳 poznatek je, 쬰 b캩쬹칤 lid칠, kte콏칤 IT moc neholduj칤 pou쮂셨aj칤 jednodu코e zadateln치 dlouh치 hesla. Znal jsem n캩kolik lid칤, kte콏칤 pou쮂셨aj칤 jako heslo <code>asdfghjkl</code>, <code>qwertzuiop</code>, <code>147896325</code>, <code>741236985</code> a tak podobn캩. Tyto hesla jsou p콏i crackov치n칤 z ven캜칤 nehor치zn캩 slo쬴t치 - ve slovn칤ku b캩쬹칠 mluvy je nenajdete, proto쬰 nic neznamenaj칤 a jsou dlouh치, tak쬰 bruteforcem by v치m to trvalo tis칤c let. Jedin치 souvislost mezi pou쬴t칳mi znaky je, 쬰 je lze zadat na kl치vesnici pomoc칤 geometrick칠ho obrazce - 캜치ry, kruhu, spir치ly.</p>
      <p id="b7db561f-a1c7-4480-b072-eac8f63abe3e" class="">Vyj칤mkou nejsou ani u쬴vatel칠 pou쮂셨aj칤c칤 heslo <code>otevrise</code>, nebo <code>hovnokleslo</code>, tedy memy, kter칠 se mezi lidmi 코칤콏칤 ji od d캩tstv칤.</p>
      <p id="3d9d9233-c395-488a-8fd6-40c028cb0c3e" class="">Posledn칤 v캩c kterou pro jistotu znovu zmi켿uji; v캩t코ina u쬴vatel콢 nepou쮂셨치 hesla tvo콏en치 jedn칤m slovem. Skoro v쬯y se jedn치 o slo쬰ninu a velmi 캜asto jsou na konci pro u쬴vatele specifick치 캜칤sla. Pokud m치 u쬴vatel doma koucoura <code>mourka</code>, skoro ur캜it캩 jeho heslo nebude <code>Mourek</code>, ale <code>Mourek1545</code>, kde <code>1545</code> je 캜치st telefonu, datum narozen칤 matky 캜i n캩jak칳 jednodu코e napsateln칳 콏et캩zec. Vzpom칤n치te si je코t캩 na <code>nbusr123</code>? :)</p>
      <p id="0b396e6e-48fb-4597-885e-b9281e31353a" class="">Shrnut칤: Heslo bude s n캩jv캩t코칤 pravd캩podobnost칤 slo쬰no ze slova, kter칠 je pro u쬴vatele ne캜칤m speci치ln칤 (<code>JehoTajemstv칤m</code>), ob캜as v n캩m b칳v치 slovo <code>heslo</code> 캜i jeho ekvivalenty. V캩t코inou tam nejsou speci치ln칤 znaky, krom캩 "-" 캜i "_" a na konci je s velkou pravd캩podobnost칤 n캩jak칳 suffix - 캜asto 캜칤slo, kter칠 je n캩jak sv치zan칠 s 쬴votem u쬴vatele, nebo n캩co jednodu코e napsateln칠ho na kl치vesnici.</p>
      <h2 id="f864d01c-bbbb-459e-913f-0f2f1ba53278" class="">Generov치n칤 slovn칤ku</h2>
      <p id="4ac5371b-5133-45ae-ac92-dffb0e3776c8" class="">Te캞 kdy u m치me teorii hesel za sebou je 캜as odv칠st zase jednou trochu pr치ce. V칤te z 캜eho se heslo skl치d치, ale mo쬹치 v치m nen칤 칰pln캩 jasn칠, kde to vz칤t. Kde asi? P콏ece na internetu!</p>
      <p id="84094e57-0a76-44e2-929a-836f8352c96f" class="">Postup se d치 rozd캩lit do t캩chto krok콢:</p>
      <ol type="1" id="2ed80c25-da8d-41c2-a9d7-7a45ab4d04c4" class="numbered-list" start="1">
        <li>shroma쮃끒v치n칤</li>
      </ol>
      <ol type="1" id="9f092f30-230d-4cba-b246-986137d3954a" class="numbered-list" start="2">
        <li>normalizace</li>
      </ol>
      <ol type="1" id="82f7127e-d98e-4ea4-a006-ca32f103744d" class="numbered-list" start="3">
        <li>extrakce</li>
      </ol>
      <ol type="1" id="93d94aaf-f417-429d-92bd-74313230e27d" class="numbered-list" start="4">
        <li>filtrace</li>
      </ol>
      <ol type="1" id="c04619d9-f68d-43a0-bcbb-1afdff8939ac" class="numbered-list" start="5">
        <li>variace</li>
      </ol>
      <h2 id="00925624-5850-479a-94b8-0678ef5e611b" class="">Shroma쮃끒v치n칤 dat</h2>
      <h3 id="7d9bcec1-a216-456c-b93a-24fb63048247" class="">Facebook</h3>
      <p id="7f7a2f0d-4ae5-4b39-97dd-a3a322cfaa93" class="">V dne코n칤 dob캩 je modern칤 na sebe nabonzovat na Facebooku prvn칤 posledn칤.</p>
      <p id="22b53ce1-bc9b-4c14-acc7-e5f0d1b6c902" class="">Se쬰nete tam vcelku jednodu코e informace o datu narozen칤 nejen c칤lov칠ho u쬴vatele, ale i jeho rodiny, jeho koleg콢 a v콢bec cel칠ho jeho soci치ln칤ho okruhu. Zjist칤te co m치 a co nem치 r치d, co 캜etl, co jedl a 캜asto i kdy byl naposledy na z치chod캩.</p>
      <p id="b99a1c87-b2d3-4b90-ac17-3810123cd134" class="">Prvn캩 se mus칤te st치t p콏치teli, ale na to je jednoduch치 rada - p콏idejte si jako p콏치tele v코echny ze soc치ln칤ho okruhu u쬴vatele. N캩kte콏칤 v치s schv치l칤 a jakmile c칤lov칳 u쬴vatel uvid칤 쬰 m치te n캩jak칠 spole캜n칠 zn치m칠, p콢jde to jednodu코e. Sexy vzhled ve va코em (fale코n칠m) profilu b칳v치 v칳hodou.</p>
      <p id="7b7fb04b-fd9c-40eb-8732-4dfcacd3976c" class="">Potom u zb칳v치 jen napsat spidera (o tom zase mo쬹치 n캩kdy jindy), co se rekurzivn캩 pro쬰re ve코ker칳m facebookov칳m obsahem c칤lov칠ho u쬴vatele a v코e ulo쮂 na disk. Nic v치m samoz콏ejm캩 nebr치n칤 ud캩lat to ru캜n캩, ale je to opruz, na kter칳 osobn캩 nem치m n치ladu. Nav칤c ps치t spidery je z치bava.</p>
      <h3 id="69f839b0-95c3-4ccc-8e69-ea77b9fc1894" class="">Ostatn칤 zdroje</h3>
      <p id="521cae71-1f30-4259-9ba7-8cc7acc9c3a5" class="">Pokud nen칤 c칤lov칳 u쬴vatel cool a in, mo쬹치 facebook nepou쮂셨치. Co potom?</p>
      <p id="d3bd017a-50e9-4055-91ee-893672604e0e" class="">Potom bude na 캜ase zadat jeho jm칠no do googlu a googlit. Hled치te v코echno, kde m콢쬰te naj칤t informace o va코em c칤lov칠m u쬴vateli, tedy profily na str치nk치ch jako jsou lide.cz, p콏칤sp캩vky v diskuz칤ch, str치nky jeho psa, blogy, osobn칤 str치nky. Rodinn칠 fotky a jejich popisky, 캜l치nky z novin, m칤sta anga쬺v치n칤.</p>
      <p id="89f8e08c-3e34-4439-82c3-4e282cd30a29" class="">Pokud naraz칤te na seznam obl칤ben칳ch knih, najd캩te si ebooky a ulo쬾e je na disk, pokud na seznam obl칤ben칳ch film콢, tak k nim st치hn캩te titulky, pokud na obl칤benou hudbu (<a href="http://www.last.fm/">last.fm</a> a podobn칠 slu쬭y), postahujte k n칤 texty (lyrics).</p>
      <p id="bfdc6523-8775-467a-b1b6-36ab4c6f8c29" class="">Googlete podle jm칠na, podle nicku, podle emailu, podle ICQ, podle ip adresy, podle v코eho co na dan칠ho u쬴vatele se쬰nete, pospojujte zd치nliv캩 odd캩len칠 identity pomoc칤 spole캜n칳ch informac칤.</p>
      <p id="8f412300-6ae0-4684-a441-c3a8a8875ed5" class="">V코echno co dostanete st치hn캩te na disk, pozd캩ji se to bude hodit, ale je nutn칠 to nep콏ehnat a nestahovat zase cel칠 str치nky, kdy tam u쬴vatel poslal jen jeden p콏칤sp캩vek. Na konci data budete muset vyfiltrovat a je tedy c칤lem m칤t jich co nejm칠n캩 a z치rove켿 nejv칤ce zam캩콏en칳ch na c칤lov칠ho u쬴vatele.</p>
      <h3 id="5f4d0e86-e117-4b7e-8b2d-81830ce316c3" class="">Lehce offtopic challenge</h3>
      <p id="bcb7dc96-58c3-4e8a-ab25-f0b05b5de204" class="">Vyz칳v치m v치s k naps치n칤 API v pythonu ke v코em v캩t코칤 str치nk치m (facebook, google+, lide.cz, r콢zn칠 seznamky, blogovac칤 slu쬭y atd..), abyste mohli 캜innost z칤sk치v치n칤 informac칤 zautomatizovat.</p>
      <p id="546bb8b9-c381-44fd-8706-d53a20aee820" class="">Vytvo콏te pluginy reaguj칤c칤 na n캩jak칠 jasn캩 dan칠 API (nap콏칤klad na stejn칳 typ parametru p콏edan칠ho z p콏칤kazov칠 콏치dky vr치t칤 na <code>stdin</code> obsah dann칠 str치nky, kam se nedostanete jednodu코e wgetem) a script, kter칳 je umo쮄갓je jednodu코e masivn캩 pou쮂셨at.</p>
      <h2 id="97eae6b7-8365-4ed9-925f-6fd9fe95809a" class="">Praktick치 uk치zka shroma쮃끒v치n칤 a normalizace</h2>
      <p id="82b70aed-80c1-42ab-b72f-f9380848be0b" class="">Pro jednoduchost nebudu zach치zet moc daleko a nebudu se v캩novat v코em mo쬹칳m web콢m. Chcete se dostat do satelitu czCube, vzpom칤n치te? Jako ide치ln칤 m칤sto k z칤sk치n칤 wordlistu tak budou <a href="http://www.czcube.org/">ofici치ln칤 str치nky</a> projektu.</p>
      <p id="03b367ab-c824-4749-928c-7d6de37552a0" class="">K z칤sk치n칤 surov칳ch dat pou쬴ji linuxov칳 shell a program <a href="http://cs.wikipedia.org/wiki/Wget">wget</a>:</p>
      <pre id="1344f755-b561-4d87-89eb-e2b11169a884" class="code code-wrap"><code>wget -r -nd -erobots=off -l 5 -A.html -A.htm -A.txt -A.pdf http://www.czcube.org/cs/index.html</code></pre>
      <p id="734072f6-4ddf-463f-89be-28642c796ede" class="">T칤m st치hnu v코echny html, htm, txt a pdf soubory co se na str치nk치ch nach치z칤 a vede na n캩 odkaz. Sna쮂셠 se tu o generov치n칤 wordlistu, co je mnohem leh캜칤 z .txt ne .pdf, tak쬰 si pdf p콏evedu hromadn캩 na text pomoc칤 utility <a href="http://en.wikipedia.org/wiki/Pdftotext">pdftotext</a>:</p>
      <pre id="8ddceed6-d93c-4896-9fd3-8fa2e6c65ce7" class="code code-wrap"><code>find . -name "*.pdf" -exec pdftotext {} \; # pdftotext neum칤 v칤c soubor콢 najednou, proto pou쬴ji find</code></pre>
      <p id="015e0177-a804-4c41-b79d-022b333355dc" class="">Nyn칤 by se mi hodilo p콏ev칠st na text i htm a html soubory. Pou쬴ji k tomu <a href="http://cs.wikipedia.org/wiki/Lynx">lynx</a>, kter칳 m치 ale tu nep콏칤jemnou vlastnost, 쬰 na konec uv치d칤 seznam odkaz콢, co mohu eliminovat grepem s parametrem <code>-v</code>, kter칳 zp콢sob칤 vyps치n칤 pouze 콏치dk콢 bez odkaz콢 ("file://", "http://").</p>
      <pre id="031d19ee-7f0b-4c49-ab9e-a82533bda37c" class="code code-wrap"><code>find . -name "*.html" -exec sh -c 'lynx -dump {} | grep -v "file://" | grep -v "http://" &gt; {}.txt; echo {}' \; # sh kvuli '&gt;' do souboru..</code></pre>
      <p id="834345c5-5ee1-40f8-b37d-67a04b3245f6" class="">Vy캜ist칤m bordel, slou캜칤m v코e do jednoho souboru a mrknu se, kolik mi toho zbylo:</p>
      <pre id="7fb17c38-43e1-403b-bc42-2e15bcfed8fa" class="code code-wrap"><code>cat *.txt &gt; words.dat
rm *.pdf *.html *.txt
du -h words.dat</code></pre>
      <pre id="80f903bd-9a7e-403f-82f1-d6ed9710ce63" class="code code-wrap"><code>352K    words.dat</code></pre>
      <p id="0444f9a9-5fdd-4628-a4ef-8b51f7f769d8" class="">Jak m치te mo쬹ost vid캩t, zbylo mi 352KB 캜ist칠ho textu. Z n캩j nyn칤 budu muset ud캩lat seznam slov.</p>
      <h2 id="a2778ae3-a13e-4eb8-9e64-86989714d003" class="">Extrakce wordlistu</h2>
      <p id="aacf838e-2304-4bc3-93f9-a749f8dca0e6" class="">Extrakce slov ze z칤skan칳ch dat nen칤 nic slo쬴t칠ho, b캩hem psan칤 캜l치nku jsem si k tomu napsal jednoduch칳 script, kter칳 najdete v p콏칤loh치ch jako <code>extractor.py</code>. Bylo by mo쬹칠 pou쮂셦 i regul치rn칤 v칳razy a r콢zn칠 unixov칠 utility, ale nem캩l jsem n치ladu tr치vit hodinu debugov치n칤m bash scriptu, kdy jednoduchou uk치zku nap칤코u za p콢l hodiny v pythonu.</p>
      <pre id="915012ef-f7d9-447d-95a7-0c48f1bce211" class="code code-wrap"><code>cat words.dat | ./extractor.py --min 2 --max 10 --double &gt; wordlist.txt
wc -l wordlist.txt</code></pre>
      <pre id="86064ed8-86e8-4e04-aa38-5154e6d2273f" class="code code-wrap"><code>40600 wordlist.txt</code></pre>
      <p id="0bdbe861-a975-4e5f-ae75-124dd75233d1" class="">Mnou pou쬴t칳 <code>extractor</code> je siln캩 trivi치ln칤. Jen rozd캩l칤 vstup na UTF slova a vyfiltruje speci치ln칤 znaky p콏i캜em dovoluje m칤t ve slovech te캜ky a 캜치rky.</p>
      <p id="5ed84580-da23-4e75-bb4a-033fec6deb5a" class=""><strong>캛칤m lep코칤 budete m칤t</strong> <code><strong>extractor</strong></code><strong>, t칤m efektivn캩j코칤 bude v칳sledn칠 crackov치n칤, proto쬰 t칤m v캩t코칤 코ance, 쬰 spr치vn캩 z칤sk치te</strong> <code><strong>JehoTajemstv칤</strong></code> <strong>a</strong> <code><strong>suffix</strong></code><strong>.</strong></p>
      <p id="03e28924-9cbe-4999-9fed-07ca694ace3d" class="">Uk치zka neschopnosti m칠ho <code>extractoru</code> je nap콏. telefonn칤 캜칤slo odd캩len칠 mezerami, kter칠 m콢j k칩d rozd캩l칤 do n캩kolika pod-캜칤sel a nevn칤m치 ho jako celek. Zapracovat se d치 na mnoha dal코칤ch v캩cech, jako je rozpozn치v치n칤 emailov칳ch adres, ICQ, telefonn칤ho 캜칤sla, PS캛, datum콢 + konverze do n캩kolika dal코칤ch alternativn칤ch form치t콢.</p>
      <h2 id="8cfb66e7-46a4-4616-aa76-1b67c61b1a6f" class="">Filtrace</h2>
      <p id="ca233190-7374-4bb7-a363-f12d930e5a33" class="">Pot칠 co jsem extractorem z칤skal 40600 slov je na 콏ad캩 filtrace, kdy se budu sna쬴t v캩t코iny z nich zbavit, jinak by toti dal코칤 krok - <strong>variace</strong> mohl z칤skat nep콏칤jemnou slo쬴tost.</p>
      <p id="de623f01-4cff-4d1a-aae0-ee58d83d0625" class="">Pokud chcete, data si m콢쬰te schovat a pozd캩ji je vyzkou코et samotn치, nen칤 zde v코ak p콏칤li코 velk치 코ance na 칰sp캩ch, proto쬰 i kdy je v souboru s velkou 코anc칤 <code>JehoTajemstv칤</code> a <code>suffix</code>, pot콏ebujete je je코t캩 slo쬴t dohromady.</p>
      <p id="911c57bb-ef49-41cc-9ad1-a2584758936b" class="">Redukci velkosti je mo쬹칠 prov칠st t캩mito zp콢soby;</p>
      <ul id="ca048d6c-e878-4005-9b28-597b52df97c1" class="bulleted-list">
        <li style="list-style-type:disc">odstran캩n칤m duplik치t콢 - v pythonu se d치 elegantn캩 vy콏e코it p콏eveden칤m na <a href="http://docs.python.org/tutorial/datastructures.html#sets">set()</a>
        </li>
      </ul>
      <ul id="7e1377f1-bee8-419d-83da-6d4d15abee95" class="bulleted-list">
        <li style="list-style-type:disc">derivac칤 코umu (cool n치zev pro odstran캩n칤 slov bez speci치ln칤ho v칳znamu)</li>
      </ul>
      <h3 id="c8cbd5a7-a97e-47d7-a240-ad5923fc9e75" class="">Odstran캩n칤 duplik치t콢</h3>
      <p id="c0d8c1c5-d7be-4922-9e0f-830ab6b70737" class="">Jak u jsem psal, v pythonu sta캜칤 soubor na캜칤st a p콏ev칠st na set, co je set콏칤zen치 mno쬴na unik치tn칤ch prvk콢. Nic v치m samoz콏ejm캩 nebr치n칤 pou쮂셦 k tomu programy jako <code>sort | uniq</code>, nebo si napsat vlastn칤 sorter/deduplicator.</p>
      <p id="48f761a2-9ed1-4e8e-9471-c31d3de26dad" class="">Je zbyte캜n칠 na n캩co tak nicotn칠ho ps치t script, proto pou쬴ji python naschv치l pon캩kud nestandartn캩 (nechci m칤t soubor se콏azen칳, pak by mi nesed캩la dal코칤 uk치zka :P):</p>
      <pre id="06e0637a-9591-4ca2-94fa-652eb914a17e" class="code code-wrap"><code>python -c "for i in set(open('wordlist.txt').read().splitlines()): print i" &gt; wordlist.uniq.txt
wc -l wordlist.uniq.txt</code></pre>
      <pre id="bca8070d-6ef4-4662-a726-5852a27ed0cc" class="code code-wrap"><code>7576 wordlist.uniq.txt</code></pre>
      <p id="0333a7b0-017e-48b4-ac13-24dbc3b4df5c" class="">T칤mto z칤sk치m soubor s pouh칳mi 7576 slovy, co p콏edstavuje redukci o ~30000 slov. To je docela dobr칠 zv칳코en칤 odstupu sign치lu od 코umu, nemysl칤te? :)</p>
      <h3 id="929def8f-7055-4f2a-ad85-44d5a9a86296" class="">Odstran캩n칤 코umu</h3>
      <p id="adf66392-242a-436d-98b5-1f0268be2360" class="">Wordlist st치le obsahuje relativn캩 velk칠 mno쬽tv칤 코umu, u kter칠ho je nepravd캩podobn칠, 쬰 by byl pou쬴t jako heslo. Pod칤vejme se na prvn칤ch 10 prvk콢:</p>
      <pre id="c97d9064-5b3d-4c59-b3a7-86b073bda225" class="code code-wrap"><code>head wordlist.uniq.txt</code></pre>
      <pre id="adae9a7f-77a5-4400-87a8-93609b41195b" class="code code-wrap"><code>koncovou
*ESTEC*
foul
kvalitn칤ch
prefix
*mirage*
*xChaos.*
*xChaos,*
Until
*JN,*</code></pre>
      <p id="e71d0c5c-3f15-473f-90ce-a62e4a68a19e" class="">Hv캩zdami jsem zv칳raznil slova, u kter칳ch existuje zv칳코en치 pravd캩podobnost pou쬴t칤 jako hesla, proto쬰 mohou p콏edstavovat pro u쬴vatele n캩co speci치ln칤ho, co by mohl pou쮂셦 na <code>JehoTajemstv칤</code>. Zbytek je 코um, kter칠ho se chceme pokud mo쬹o zbavit.</p>
      <p id="1cad7f6d-c41b-4b66-b288-b54d0c0081d7" class="">Samoz콏ejm캩 je mo쬹칠 ru캜n캩 proj칤t v코ech 7576 slov a vymazat ty, kter치 pova쬿jete za b캩쬹치 a tud칤 nezaj칤mav치. U v캩t코칤ch projekt콢 by to v코ak mohlo b칳t nere치ln칠 a i u men코칤ch to bude nehor치zn캩 nudn치 a otrock치 pr치ce. Jeliko v치s prov치z칤 s칤la unixu, pou쬴jeme ho na dal코칤 podstatnou redukci.</p>
      <h3 id="ebf65875-79a5-47b7-b43b-3a0285a5318c" class="">P콏칤prava datab치ze 코umu</h3>
      <p id="35b4d8a7-c0c8-47f4-81af-d8281fac92d2" class="">Filtraci provedeme takto: nejd콏칤ve se쬰neme velk칠 mno쬽tv칤 textu, 콏치dov캩 megabajty. Text potom zpracujeme a z칤sk치me z n캩j frekvenci nej캜ast캩ji pou쮂셨an칳ch slov. 캛asto pou쮂셨an치 slova pak vyu쬴jeme k vytvo콏en칤 datab치ze 코umu, d칤ky kter칠 m콢쬰me zmen코it n치코 slovn칤k.</p>
      <p id="2ac791c8-da27-478a-bc8e-c04af37e00e6" class="">Ka쬯칠mu je douf치m jasn칠, 쬰 k z칤sk치n칤 코umu je nutn칠 pou쮂셦 n캩jakou obecnou datab치zi text콢, nikoliv t콏eba odborn칠 weby, nebo zdrojov칠 k칩dy. Daj칤 se pou쮂셦 knihy, ale jejich p콏evod na text je 캜asto opruz s nep콏칤li코 dobr칳mi v칳sledky.</p>
      <p id="b2c9dde9-3cc5-4518-9186-2ca4b4b67bb4" class="">Na v캩t코inu web콢 budete skoro v쬯y pot콏ebovat HTML parser, kter칳 osek치 okoln칤 prvky tak, aby v치m zbyl jen text. Do za캜치tku mohu doporu캜it <a href="http://fora.babinet.cz/viewprintable.php?id=47542">http://fora.babinet.cz/viewprintable.php?id=47542</a> a <a href="http://www.cepsr.com/tisk.php?ID=01">http://www.cepsr.com/tisk.php?ID=01</a>, kde se nach치z칤 spousta slovn칤 vaty a budete m칤t jen minim치ln칤 pr치ci s parsov치n칤m. Obecn캩 pot콏ebujete dlouh칠 texty bez speci치ln칤ch v칳raz콢, na co jsou ide치ln칤 texty o politice, nebo kd치k치n칤 na blog칤sc칤ch (zde ov코em pozor na wYpaTl4t0r).</p>
      <p id="97a7674d-3b16-4bd7-adc7-b90f3aa69e9b" class="">V tomto 캜l치nku pou쬴ji jako zdroj pouze web <a href="http://zpovedka.cz/">http://zpovedka.cz</a>, proto쬰 se jedn치 o prakticky ide치ln칤 p콏칤klad se spoustou relativn캩 dlouh칳ch text콢, blogy jsou v url identifikov치ny 캜칤slem, co mi usnadn칤 stahov치n칤, a jako bonus tam nen칤 reklama.</p>
      <p id="0d644cf8-c36c-49de-a2c0-7131fae5a72e" class="">Tentokr치t se ji ned치 pou쮂셦 rekurzivn칤 wget, proto쬰 by v치s mohl zav칠st na m칤sta, kam nechcete. Jeliko jsou v코echny 캜l치nky se콏azeny sekven캜ne za sebou od url <a href="http://zpovedka.cz/000001.php">http://zpovedka.cz/000001.php</a> do url <a href="http://zpovedka.cz/001819.php">http://zpovedka.cz/001819.php</a> (max. v dob캩 psan칤 캜l치nku), pou쬴ji k jejich sta쬰n칤 <a href="http://en.wikipedia.org/wiki/CURL#cURL">curl</a>, kter칳 m치 na rozd칤l od wgetu p콏칤mo podporu stahov치n칤 sekven캜n칤ch url.</p>
      <pre id="2e3a7cf6-b7f1-4aeb-adea-9a9baacda581" class="code code-wrap"><code>mkdir zpovedka.cz
cd zpovedka.cz
 
curl http://zpovedka.cz/00[0001-1819].php -O
du -chs</code></pre>
      <pre id="5fe86b3a-2e9c-4709-a381-5d346b74dea8" class="code code-wrap"><code>109M    .
109M    total</code></pre>
      <p id="2732121c-f9a3-4c02-942f-70070b04d705" class="">Jak vid칤te, ze zpov캩캞ky se st치hlo 109MB html str치nek. Nyn칤 je na 캜ase v코e p콏ev칠st na 캜ist칳 text. U lynxu to tentokr치t chce pou쮂셦 parametr <code>-force_html</code>, proto쬰 soubory maj칤 p콏칤ponu <code>.php</code> a to se lynxu nezd치.</p>
      <pre id="3a21fb85-fe1f-4908-b520-8e7cdecc3291" class="code code-wrap"><code>find . -name "*.php" -exec sh -c 'lynx -force_html -dump {} &gt; {}.txt; echo {}' \;
rm *.php
du -chs</code></pre>
      <pre id="2dcbce6f-e88e-4a9f-b8aa-d44b44982176" class="code code-wrap"><code>56M .
56M total</code></pre>
      <p id="8b3a812a-072d-4854-afce-619206483c14" class="">P콏evod na 캜ist칳 text srazil velikost skoro o polovinu. Kdy se pod칤v치te na jednotliv칠 textov칠 soubory, zjist칤te, 쬰 to po콏치d nen칤 칰pln캩 ono. Na za캜치tku se nach치z칤 hlavi캜ka zab칤raj칤c칤 dva 콏치dky, na konci je pak zobrazen formul치콏 pro koment치콏e a odkazy, kter칠 tam nacpal lynx. Neu코kod칤 tedy v코e o콏ezat a pot칠 hromadn캩 ulo쬴t do souboru <code>noise.dat</code>:</p>
      <pre id="10c4993c-2428-401d-8526-bfdbcf2b5650" class="code code-wrap"><code>find . -name "*.txt" -exec sh -c "tail -n +3 {} | head -n \`grep -n 'Pokud m치코 k v캩ci co 콏칤ct a dok치쬰코 pomoci, nev치hej a pi코.' {} | cut -f1 -d:\` &gt;&gt; noise.dat; echo {}" \;
 
# uklizeni bordelu
mv noise.dat ../
cd ..
rm -fr zpovedka.cz
 
du -h noise.dat</code></pre>
      <pre id="dbe27fc5-3b75-4b5b-bc83-a1a830759f43" class="code code-wrap"><code>47M noise.dat</code></pre>
      <p id="668400b1-b91a-4c49-beec-cc567d96cdef" class="">Jak m치te mo쬹ost vid캩t, o콏ez치n칤m nepot콏ebn칳ch 캜치st칤 se poda콏ilo st치hnout velikost souboru o 9MB na 47MB.</p>
      <p id="ae53b216-691b-4bfa-a4ec-3bbc546ed168" class="">Kdy to budete zkou코et, zjist칤te 쬰 onen zb캩sil칳 find (za ten m치m peklo jist칠 :P) v pr콢b캩hu pr치ce vypisuje chyby - nelekejte se jich, jedn치 se o smazan칠 str치nky, kter칠 byly p콏esto st치hnuty na disk a nyn칤 se p콏eskakuj칤.</p>
      <p id="ee1d5752-2e29-4033-a4ce-061263879bbc" class="">Pokud v치m zv캩davost ned치, zde je kr치tk칳 popis jak p콏칤kaz funguje: pomoc칤 <a href="http://cs.wikipedia.org/wiki/Tail">tailu</a> o콏칤znu 3 콏치dky ze za캜치tku souboru, kde se nach치z칤 hlavi캜ka. Potom <a href="http://cs.wikipedia.org/wiki/Head">headem</a> vyberu ve코ker칳 text a po 콏치dek, na kter칠m se vyskytuje 콏et캩zec <em>"Pokud m치코 k v캩ci co 콏칤ct a dok치쬰코 pomoci, nev치hej a pi코.</em>", kter칳 se v textu v쬯y nach치z칤 p콏ed formul치콏em pro vlo쬰n칤 nov칳ch p콏칤sp캩vk콢. 캛칤slo 콏치dku zjist칤m <a href="http://cs.wikipedia.org/wiki/Grep">grepem</a>, kter칳 d칤ky parametru <code>-n</code> zobrazuje 캜칤sla 콏치dk콢 + v칳skyt 콏et캩zce. Jeliko pot콏ebuji pouze 캜칤slo 콏치dku, od콏칤znu ho z v칳stupu grepu pomoc칤 p콏칤kazu <a href="http://cs.wikipedia.org/wiki/Cut">cut</a>. V칳stup z headu, kter칳 dostal jako parametr <code>-n</code> 캜칤slo 콏치dku z <code>grepu</code>, p콏esm캩ruji do souboru <code>noise.dat</code> v re쬴mu roz코i콏ov치n칤 (<code>&gt;&gt;</code>), d칤ky kter칠mu se 콏치dky p콏idaj칤 na konec. To cel칠 se d칤ky p콏칤kazu <a href="http://cs.wikipedia.org/wiki/Find">find</a> s parametrem <code>-exec</code> vykon치 pro v코echny textov칠 soubory ve slo쬮e. Trochu krkolomn칠, ale tohle nen칤 kurz krasoprogramov치n칤, n칳br z칤sk치v치n칤 dat.</p>
      <p id="697b37fe-7c1a-4d0c-8cbe-d9eb59941b8e" class="">Ze souboru nyn칤 pomoc칤 <code>extractor.py</code> vyextrahuji surov칳 seznam slov, kter칠 budu pozd캩ji d치le analyzovat:</p>
      <pre id="2bc13910-2628-423c-9b9d-b114a247dac9" class="code code-wrap"><code>cat noise.dat | ./extractor.py --min 2 --max 10 --double --lower &gt; noise_raw.txt
du -h noise_raw.txt</code></pre>
      <pre id="437b15ad-6bc6-48a7-8e17-c09c88a4a8e4" class="code code-wrap"><code>44M noise_raw.txt</code></pre>
      <p id="022f162a-09b5-443c-b840-7261db151934" class="">Chvilku to trv치, tak si zat칤m t콏eba uva콏te 캜aj.</p>
      <h3 id="cbc089b0-4566-4356-90e1-c24a1ee43042" class="">Vytv치콏칤me datab치zi 코umu</h3>
      <p id="6d8a5c1d-5c46-4074-9af2-2efdb770053c" class="">Nyn칤 si spo캜칤t치me, kolikr치t se kter칠 v칳razy v textu objevuj칤. Samoz콏ejm캩 abychom na to mohli napsat python script (ke sv칠 hanb캩 se p콏izn치m, 쬰 jsem ho i <a href="https://gist.github.com/d0d956985c4be5251dff">napsal</a>), z치kladn칤 unixov칠 n치stroje ale pr치ci odvedou stejn캩 tak dob콏e, ba dokonce rychleji:</p>
      <pre id="cd990ac1-a157-407c-8d63-2333509639f5" class="code code-wrap"><code>cat noise_raw.txt | sort | uniq -c &gt; noise_analysed.txt
du -h noise_analysed.txt</code></pre>
      <pre id="ad1ad625-ccdb-4d64-a353-99f35e3a1fba" class="code code-wrap"><code>6,9M    noise_analysed.txt</code></pre>
      <p id="7e2084c1-d856-45fa-bbd9-388d19cb541e" class="">Pokud nakoukneme do souboru noise_analysed.txt, zjist칤me, 쬰 se n치m tam ulo쬴ly po캜ty v칳skytu jednotliv칳ch slov:</p>
      <pre id="b7c0a7e8-2342-4f18-808f-0528d5090ff3" class="code code-wrap"><code>tail noise_analysed.txt</code></pre>
      <pre id="b1bcd08e-8f1f-41f0-80a6-551a2a510105" class="code code-wrap"><code>4 혝
1 혝쮏쐃쮏
1 혟햦햩혧햪햟
2 혢햟혜
2 혢햟혜,
4 혢혝
1 혣햣혜혝쮏
2 혨혝
2 혨혝쮐
1 燎籃꺾쉱봏</code></pre>
      <p id="ded033a4-dc0a-40ba-b82a-4750d0172e1e" class="">Anal칳zu v칳skytu slov jsme prov치d캩li proto, abychom n치hodou neodstranili potenci치ln칤 <code>JehoTajemstv칤</code>, kter치 se na zpovedka.cz vyskytla n치hodou. To ud캩l치me tak, 쬰 odfiltrujeme pouze slova, kter치 maj칤 v캩t코칤 칰rove켿 pou쮂셨치n칤, co n치m zna캜칤 pr치v캩 캜칤slo p콏ed nimi.</p>
      <p id="3076d649-914f-41a3-b01a-14e0450b1b63" class="">Ot치zkou je, jakou hodnotu zvolit. Pokud vybereme moc malou, zbude n치m a moc slov. Pokud moc velkou, m콢쬰 se st치t, 쬰 odfiltrujeme <code>JehoTajemstv칤</code>. Jako prvn칤 v치s pravd캩podobn캩 napadne pr콢m캩r. Nezavrhuji to, ale osobn캩 jsem se rozhodl pro pr콢m캩r mezi celkov칳m pr콢m캩rem a <a href="http://cs.wikipedia.org/wiki/Medi%C3%A1n">medi치nem</a>, kter칳 nen칤 tolik n치chyln칳 na lok치ln칤 v칳st콏elky. Naz칳vejme to Hranic칤.</p>
      <p id="c6d9f27e-51e4-4912-a7ce-cf6b8e71c3e0" class="">Te캞 p콏ijde ozn치men칤, kter칠 spoustu z t캩ch, ehm, m칠n캩 zku코en칳ch asi moc nepot캩코칤. Rozhodl jsem se vynechat 캜치st, kde spo캜칤t치m Hranici a pou쬴ji script, kter칳 do dal코칤ho textov칠ho souboru blacklist_raw.txt ulo쮂 v코echna slova, kter치 maj칤 v칳skyt v캩t코칤 ne Hranice. Tak칠 jsem vynechal k칩d, kter칳 odma쬰 캜칤sla p콏ed ka쬯칳m p콏칤kazem a samotn치 slova ulo쮂 do souboru <code>blacklist.txt</code>. Nechci d치t n치stroje do rukou lidem, kte콏칤 netu코칤 jak je pou쮂셦 - destruktivn칤 chov치n칤 b칳v치 nej캜ast캩j코칤 u lid칤 s minimem schopnost칤.</p>
      <h3 id="c017f018-7270-4764-af49-7385f45a9b93" class="">Ode캜ten칤 코umu</h3>
      <p id="5b4f3ebc-e95c-4b86-9d73-ddded794e8e7" class="">Pokud se v치m povedlo vy캜istit blacklist, m치te nyn칤 k dispozici 409927 nejpou쮂셨an캩j코칤ch slov, co je docela slu코n칳 wordlist. Nyn칤 sta캜칤 jen vyfiltrovat slova ze souboru <code>wordlist.uniq.txt</code>, kter치 se nach치zej칤 z치rove켿 v souboru <code>blacklist.txt</code> a ulo쬴t je do <code>wordlist.txt</code>. To se d치 ud캩lat jednodu코e, nebo slo쬴t캩. Osobn캩 r치d d캩l치m v캩ci jednodu코e, tak쬰 tady je p콏칤kaz v bashi:</p>
      <pre id="abdf418a-228a-495f-9b8b-8b31b8d855c2" class="code code-wrap"><code>cat wordlist.uniq.txt blacklist.txt blacklist.txt | sort -f | uniq -iu &gt; wordlist_cleaned.txt
wc -l wordlist_cleaned.txt</code></pre>
      <pre id="589dda1f-40ad-4351-9861-e3efbdae6ec8" class="code code-wrap"><code>1719 wordlist_cleaned.txt</code></pre>
      <p id="8967e9c2-7edc-4746-b68e-2bde7f3b3d38" class="">Jak vid칤te, cel치 filtrace spo캜칤v치 v tom, 쬰 <code>uniqu</code> po코lu soubor <code>blacklist.txt</code> dvakr치t, d칤ky 캜emu jsou v칳razy z n캩j zaru캜en캩 odfiltrov치ny. Parametry <code>-f</code> a <code>-i</code> slou쮂 k porovn치v치n칤 bez ohledu na velikost p칤smen.</p>
      <p id="9a34ea39-3c2e-480f-8c26-a444c3125ff9" class="">Pokud se do souboru pod칤v치te, zjist칤te, 쬰 se v n캩m z n캩jak칠ho d콢vodu n캩kter치 slova vyskytuj칤 jen s 캜치rkou na konci. To nen칤 zrovna ide치ln칤, proto si je naklonujeme i bez 캜치rky pomoc칤 extractoru a jeho parametru <code>-d</code>:</p>
      <pre id="f313088e-88db-42ca-8627-238bca545f43" class="code code-wrap"><code>cat wordlist_cleaned.txt | ./extractor.py -d | sort | uniq  &gt; wordlist.txt
wc -l wordlist.txt</code></pre>
      <pre id="5c09326b-386a-4736-aa0e-6cf1424b1e25" class="code code-wrap"><code>1934 wordlist.txt</code></pre>
      <p id="02523110-7ec1-4c4d-b014-0e080d1892ff" class="">D칤ky filtraci pomoc칤 blacklistu se n치m podstatn캩 sn칤쬴l prostor, ve kter칠m se m콢쬰 ukr칳vat <code>JehoTajemstv칤</code> - z p콢vodn칤ch 7576 slov na pouh칳ch 1934, jejich otestov치n칤 trvalo na m칠 ma코in캩 1m 17.741s.</p>
      <p id="f6dbc9d2-1fee-4718-ae3c-f58e3f137895" class="">Pokud chcete zjistit tajemstv칤, kter칠 se ukr칳v치 v czCube (tedy czcube_server.py), budete muset je코t캩 trochu zapracovat - napov칤m jen tolik, 쬰 ve <code>wordlist.txt</code> jsou ulo쬰ny ob캩 komponenty hesla, tedy jak <code>JehoTajemstv칤</code>, tak <code>Suffix</code>. K tomu abyste p콏i코li na to co je co se v치m bude hodit, 쬰 n치코 bruteforcer p콏ij칤m치 i pole string콢, jestli si je코t캩 vzpom칤n치te :) Bude to cht칤t ov코em bu캞to je코t캩 zredukovat velikost wordlistu, nebo zrychlit crackov치n칤, proto쬰 vyzkou코et v코ech 3742290 kombinac칤 by trvalo na m칠m stroji necel칳ch 42 hodin :)</p>
      <h3 id="6ad5f0d5-bf8f-4c0c-9c44-1c868caa1018" class="">Probl칠my a n치vrhy na vylep코en칤</h3>
      <p id="f7b34329-7834-491c-90de-77b6c42c984b" class="">Pokud se pod칤v치te do souboru <code>wordlist.txt</code>, zjist칤te, 쬰 se v n캩m st치le nach치z칤 spousta b캩쬹칳ch anglick칳ch slov, kter칠 nebyly odchyceny, proto쬰 <a href="http://zpovedka.cz/">zpovedka.cz</a> je 캜esk칳 web. <strong>Vytvo콏te anglick칳 blacklist a slova ode캜t캩te.</strong></p>
      <p id="dc3cd5aa-e948-4473-bb2a-a6214f636578" class="">P콏i detailn캩j코칤m pohledu si jist캩 v코imnete, 쬰 se zde nach치z칤 spousta jmen a datum콢. Zkuste napsat jejich detektor a permut치tor do r콢zn칳ch form치t콢. K dost치n칤 se do czCube to sice nen칤 nutn칠, ale v re치ln칠m 쬴vot캩 se to bude hodit.</p>
      <p id="6453debc-525b-4939-a640-807441b0a77f" class="">N캩kter치 slova kon캜칤 캜치rkou, jin치 te캜kou, jin치 p칤smenem. Za콏i캞te, aby v코echna kon캜ila p칤smenem, te캜kou i 캜치rkou.</p>
      <p id="ee7f54d1-5343-40ae-8c8c-3bcc8cd01c67" class="">Nem치te jistotu velk칳ch a mal칳ch p칤smen. Heslo m콢쬰 obsahovat string z wordlistu, ale m콢쬰 m칤t na za캜치tku mal칠 p칤smeno, nebo b칳t cel칳 mal칳mi, i kdy je ve wordlistu s velk칳m p칤smenem.</p>
      <h2 id="42d8d6c9-1a82-46a8-ab11-b22bcc214957" class="">Pou캜en칤</h2>
      <p id="1efdd7e5-0d2c-4784-8187-721f0bd83e12" class="">D칤ky zam캩콏en칤 칰toku je mo쬹칠 podstatn캩 zmen코it po캜et hesel, kter치 je nutno vyzkou코et. To se hod칤, pokud 칰to캜칤te na c칤le s pomalou linkou, nebo paranoidn칤m adminem, kter칳 omezil po캜et spojen칤.</p>
      <p id="940752d2-05c4-440a-871f-8c5d16498ae5" class="">Na rozd칤l od bruteforce nemus칤te zkou코et nep콏edstaviteln치 캜칤sla kombinac칤, kter치 v dohledn칠 dob캩 prost캩 nevyzkou코칤te, ale vcelku re치ln칠 tis칤ce a miliony, kter칠 netrvaj칤 tak dlouho. Na druhou stranu, na rozd칤l od bruteforce, kde m치te v칤ce/m칠n캩 z치ruku 칰sp캩chu v kone캜n칠m 캜ase (i kdy se m콢쬰 nach치zet miliardy let v budoucnosti), u dictionary se m콢쬰 st치t, 쬰 se prost캩 netref칤te a nic s t칤m nenad캩l치te, pokud um칤 admin vybrat spr치vn캩 heslo.</p>
      <h2 id="2aa0efd0-a36e-4b96-b9f8-4311293af7b2" class="">Side-channel</h2>
      <p id="f49a7ef4-60d8-4736-80a3-d8a2fba11b97" class=""><a href="http://en.wikipedia.org/wiki/Side_channel_attack">Side-channel</a> 칰toky se od v칳코e uveden칳ch l칤코칤 docela podstatn캩. Nec칤l칤 toti na samotn칠 heslo, ale na ve코ker칠 vedlej코칤 projevy syst칠mu. P콏esto jsem si je troufl za콏adit, proto쬰 v치s ve v캩t코in캩 p콏칤pad콢 nevpust칤 do syst칠mu, jako kdybyste pou쬴li exploit, ale pouze podstatn캩 zredukuj칤 po캜et hesel, kter칠 mus칤te otestovat.</p>
      <p id="29b413da-430c-4702-b023-889ef8cce81b" class="">Funguje to tak, 쬰 se zam캩콏ujete na cokoliv, co dok치쬰te o syst칠mu zjistit, nej캜ast캩ji na fyzik치ln칤 podstatu syst칠mu, proto쬰 lid칠 kte콏칤 za콏칤zen칤 a algoritmy navrhuj칤 pracuj칤 s vrstvami abstrakce, kter칠 zakr칳vaj칤 postrann칤 칰niky.</p>
      <p id="7547ab17-7f35-44bd-bd49-1534bf8321c8" class="">M콢쬰 to b칳t doba b캩hu, jeho akustick칠, infra캜erven칠 (teplo), ultrafialov칠, elektromagnetick칠, neutronov칠 a t콏eba i gravita캜n칤 vyza콏ov치n칤, nebo jeho spot콏eba. Aby to nebyla 캜ist캩 pasivn칤 nuda, tak syst칠m p콏i n캩kter칳ch typech 칰tok콢 vystavujete extr칠mn칤m podm칤nk치m - p콏ipojujete ho na vy코코칤 nap캩t칤, ne na jak칠 byl stav캩n, oh콏칤v치te ho, nebo mraz칤te, podrobujete gama 캜i rentgenov칠mu z치콏en칤, siln칠mu prosv캩tlen칤, oza콏ov치n칤 v mikrovlnce, abyste zp콢sobili nefunk캜nost n캩kter칳ch sou캜치st칤, jako je nap콏칤klad gener치tor n치hodn칳ch 캜칤sel.</p>
      <p id="4cbd28d2-6c68-4d2e-9e59-8f826c5380b3" class="">Side-channel 칰toky v naprost칠 v캩t코in캩 p콏칤pad콢 nejsou jednoduch칠 a vy쬬duj칤 seri칩zn칤 znalosti a/nebo vybaven칤. P콏esto v치m p치r z nich p콏ibl칤쮂셠, alespo켿 ve zkratce.</p>
      <h2 id="d6e52a8f-1099-4575-9184-f19c7b69abae" class="">TEMPEST aka Electromagnetic Eavesdropping aka Van Eck phreaking aka EMSEC</h2>
      <p id="f110ff46-f674-4f41-8d57-737f283810f5" class="">I kdy se nejedn치 zrovna o <em>guessing</em>, ale sp칤코 <em>password sniffing</em>, neexistuje z치콏n캩j코칤 p콏칤klad <em>postrann칤ho kan치lu</em> ne <a href="http://en.wikipedia.org/wiki/Van_Eck_phreaking">Van Eck phreaking</a>, nespr치vn캩 zn치m캩j코칤 sp칤코 pod k칩dov칳m ozna캜en칤m <a href="http://en.wikipedia.org/wiki/Tempest_%28codename%29">TEMPEST</a>. Jedn치 se o typ 칰toku, kter칳 c칤l칤 na <a href="http://www.linuxexpres.cz/unik-elektromagnetickych-emisii">necht캩n칠 elektromagnetick칠 vyza콏ov치n칤</a>.</p>
      <p id="f06104e4-ac41-4aac-8142-117dc42665b0" class="">Spousta lid칤 si mysl칤, 쬰 postavit funk캜n칤 vys칤la캜 je n치ro캜n치 pr치ce, kter치 vy쬬duje hodn캩 znalost칤 z elektrotechniky. Pravda je takov치, 쬰 ve skute캜nosti je mnohem t캩쮄뫆 postavit kus elektroniky co nic nevys칤l치 (o 코칤콏ce spektra, 캜istot캩 a v칳konu se te캞 nebavme). To v치m jist캩 potvrd칤 ka쬯칳, kdo n캩kdy musel 콏e코it odru코en칤 elektromotor콢, nap콏칤klad ve vysava캜i.</p>
      <h3 id="e67e061f-ada3-4b2c-9117-e9ffb1dfd9d7" class="">Princip vys칤la캜e</h3>
      <p id="c182dfaa-e246-488c-9f1b-d52af918c7d0" class="">Jednoduch칠 vys칤la캜e nejsou 쮂멳n치 magie. Jak si mo쬹치 pamatujete ze z치kladn칤 코koly, kdy do kusu dr치tu pust칤te elekt콏inu, nap콏칤klad z 9V baterie, stane se z n캩j elektromagnet, tak쬰 k sob캩 za캜ne p콏itahovat magnetick칠 p콏edm캩ty. 캛칤m del코칤 m치te dr치t sto캜en칳 do c칤vky, t칤m siln캩j코칤 eletromagnet bude.</p>
      <p id="24eae719-4b8c-465f-ae07-598554d1dec3" class="">Pokud m치te citliv칳 m캩콏치k, dok치쬰te zm캩콏it toto statick칠 magnetick칠 pole na vzd치lenost des칤tek centimetr콢, mo쬹치 metr콢. Pokud v코ak magnet rozkmit치te (za캜nete ho velice rychle vyp칤nat a zap칤nat), elektromagnetick칠 pole kolem n캩j kmit치 s n칤m a na c칤vk치ch v okol칤 doch치z칤 k indukci. P콏i ur캜it칳ch rychlostech vyp칤n치n칤 a zap칤n치n칤 se pole 코칤콏칤 do d치lky l칠pe ne p콏i jin칳ch, tak쬰 doch치z칤 k vys칤l치n칤 tohoto pole na velmi dlouh칠 vzd치lenosti. To se pak velice slab캩, ale p콏eci jen indukuje na kovov칳ch p콏edm캩tech (ant칠ny) i des칤tky kilometr콢 daleko. Pokud k nim p콏ipoj칤te zesilova캜 a frekven캜n칤 filtr, m콢쬰te z toho co se v치m naindukuje rekonstruovat zap칤n치n칤 a vyp칤n치n칤 vys칤la캜e - jeho rychlost, plynulost a do jist칠 m칤ry i intenzitu.</p>
      <p id="3c3173af-03c7-4a73-b485-568d681cbd45" class="">Samoz콏ejm캩, tohle v코echno plat칤 jen pro nejprimitivn캩j코칤 vys칤la캜e ala jisk콏i코t캩, ve skute캜n칠m sv캩t캩 je to docela v캩da, proto쬰 se sna쮂셦e vys칤lat jen na mal칠m frekven캜n칤m p치smu, s minim치ln칤m zasahov치n칤m do ostatn칤ch, s co nejv캩t코칤 efektivitou p콏evodu energie a tak d치le.</p>
      <h3 id="11863912-a373-456b-bb35-21a404d00dc2" class="">Po캜칤ta캜 jako vys칤la캜</h3>
      <p id="dbb7fe0e-cac8-4798-96f9-0ef9a9394f15" class="">Abych se vr치til zp캩t k TEMPESTU - v치코 po캜칤ta캜 je v podstat캩 za콏칤zen칤, kter칠 velice rychle p콏ep칤n치 elekt콏inu v mnoha r콢zn칳ch vodi캜칤ch, a콘 u se jedn치 o kabely p콏ipojuj칤c칤 periferie, nebo o vnit콏n칤 sb캩rnice zaji코콘uj칤c칤 p콏enos informac칤 mezi vnit콏n칤mi komponentami. D칤ky tomu se jedn치 o vys칤la캜 na v코ech mo쬹칳ch vlnov칳ch d칠lk치ch, kter칠 jsou tlumeny kovovou krabic칤 po캜칤ta캜e.</p>
      <p id="247225be-aa55-45d9-b882-dc308fcc3cf4" class="">Extern칤 komponenty, jako jsou monitor, kl치vesnice a my코 v코ak ni캜칤m tlumen칠 nejsou a d칤ky tomu vys칤laj칤 s velkou radost칤 do okol칤 v코e, co se p콏es n캩 p콏en치코칤. Sign치ly nejsou 캜ist칠, jeliko p콢vodn캩 samoz콏ejm캩 nikdo nepl치noval, 쬰 maj칤 vys칤lat. R콢zn캩 se do sebe m칤s칤, p콏i캜em n캩kter칠 vys칤laj칤 na tak n칤zk칳ch frekvenc칤ch, 쬰 o kus d치l u jsou utlumeny k nerozezn치n칤.</p>
      <p id="98198614-eefa-4f55-8469-459e427a9fb7" class="">P콏es to v코echno je mo쬹칠 pr콢b캩hy nap캩t칤, kter칠 na v치코 monitor doru캜uj칤 sign치l pro zobrazen칤 odposlouch치vat i na des칤tky metr콢. Nez치le쮂 p콏itom na typu pou쬴t칠ho monitoru, funguje to jak pro <a href="http://www.hack247.co.uk/hack247/wp-content/uploads/pet2004-fpd.pdf">LCD</a>, tak pro <a href="http://www.hack247.co.uk/hack247/wp-content/uploads/emr.pdf">CRT</a> na jednotky, max. des칤tky metr콢.</p>
      <p id="ee6c648b-cd7e-438b-bb58-d2dfe04ee0b6" class="">Kl치vesnice na tom nejsou o nic l칠pe - ba naopak, d칤ky dlouh칳m nest칤n캩n칳m dr치t콢m, po kter칳ch si svi코t칤 povely jen ve chv칤li kdy ma캜k치te tla캜칤tka je to <a href="http://lasecwww.epfl.ch/keyboard/">je코t캩 jednodu코코칤</a>. 칔to캜n칤k tak v콢bec nemus칤 kompromitovat v치코 syst칠m, prost캩 si heslo p콏e캜te tak jak ho p칤코ete.</p>
      <h3 id="df582ef2-3243-43ec-8208-a1946119fbf4" class="">Obrana</h3>
      <p id="e4bf4091-a337-4a47-a405-520eedc9aecc" class="">Existuj칤 dv캩 mo쬹칠 techniky obrany, ob캩 zalo쬰n칠 na principu <a href="http://cs.wikipedia.org/wiki/Faradayova_klec">faradayovi klece</a>:</p>
      <p id="b99263ad-157c-4fce-949a-68f8eece3972" class="">1. V코echny sou캜치stky a kabely mus칤 b칳t <a href="http://www.youtube.com/watch?v=55z_0BYb5is">n치le쬴t캩 odst칤n캩ny</a>. Touto cestou se vydaly vojensk칠 organizace po cel칠m sv캩te. Je to dra쮄뫆 a komplikovan캩j코칤, ale jist캩j코칤, jako bonus to nejsp칤코 p콏id치v치 jistou odolnost v콢캜i elektrick칠 slo쬮e <a href="http://cs.wikipedia.org/wiki/Elektromagnetick%C3%BD_impuls">EMP</a>.</p>
      <p id="12969be1-6d60-4e08-93ae-62cc701a2582" class="">2. M칤sto kde po캜칤ta캜 pou쮂셨치te mus칤 b칳t odst칤n캩n칠. Ide치ln칤 jsou klece z uzemn캩n칠ho pletiva, alobal na zdech tak칠 nen칤 marn칳. Inspiraci je mo쬹칠 캜erpat t콏eba z filmu <a href="http://www.csfd.cz/film/8280-nepritel-statu/">Nep콏칤tel st치tu</a>.</p>
      <h3 id="c955e08b-ac34-4b90-bd44-0e85798b15e0" class="">Mo쬹칠 vyu쬴t칤</h3>
      <p id="da46ccd1-7fd4-479b-9c5c-2df31b16590e" class="">TEMPEST pro V치s nemus칤 b칳t nutn캩 코kodliv칳 - ve chv칤li kdy v칤te, 쬰 monitor vlastn캩 funguje jako vys칤la캜, m콢쬰te ho pou쮂셦 jako jednoduchou zvukovou kartu, kterou je mo쬹칠 naladit na FM r치dio. Pokud v치s to zaj칤m치, hledejte v칳raz "<a href="http://www.youtube.com/watch?v=Th6rVsLGMjE">tempest for eliza</a>".</p>
      <p id="bb943230-827c-4165-bab5-df9801f5fefc" class="">Dal코칤 mo쬹칠 vyu쬴t칤 je transport citliv칳ch informac칤, kdy nedostanete mo쬹ost zapojen칤 extern칤ch m칠di칤 a p콏칤stupu na internet: Na vysok칳ch 코kol치ch jsou uzam캜en칠 u캜ebny, ve kter칳ch se nach치zej칤 po캜칤ta캜e se zdrojov칳mi k칩dy Windows. Studenti, kte콏칤 se up칤코칤 ke vstupu nesm칤, ba ani nemohou p콏ipojit 쮂멳n칠 za콏칤zen칤, proto쬰 po캜칤ta캜 na n캩 nereaguje, porty jsou zaslepeny, bedna zamknut치 a internetov치 konektivita nen칤 dostupn치. Na druhou stranu, nic jim nebr치n칤 studovat zdrojov칠 k칩dy a spou코t캩t programy - od toho tam zdrojov칠 k칩dy Windows jsou, aby bylo mo쬹칠 prostudovat syst칠m a prov치d캩t r콢zn칠 testy.</p>
      <p id="9a67995a-d0ed-4b41-9fb3-492fbae6bdc1" class="">Teoreticky je tedy mo쬹칠 za pomoc칤 p콏칤tomn칠ho IDE napsat program, kter칳 pomoc칤 TEMPESTU za캜ne vys칤lat 콏치dku po 콏치dce zdrojov칠 k칩dy do sv캩ta. Za p콏edpokladu, 쬰 n캩kdo naslouch치 (i kdyby 코lo jen o pasivn칤 z치znamov칠 za콏칤zen칤 na z치chodov칠 kabince o patro n칤쬰), m콢쬰 tak doj칤t k 칰niku dat.</p>
      <h2 id="949bcd9f-8f8d-4cd3-b148-b215f25595bb" class="">Odb캩rov칠 칰toky</h2>
      <p id="2a1073dc-2114-4948-a65b-0fdf12c8a8e5" class="">A캜 se to nezd치, d콢le쬴t칠 informace o syst칠mu je mo쬹칠 zjistit i studiem <a href="http://en.wikipedia.org/wiki/Power_analysis">odb캩ru elekt콏iny</a>.</p>
      <p id="5117b346-2d99-4d6e-a47f-f29490f1fc80" class="">Kdy vynech치m, 쬰 policie takto zam캩콏uje <a href="http://www.pre.cz/velkoodberatele/pre-aktualne-prehled-2011/zlodeji-elektriny-aneb-odhalene-cerne-odbery.html">neleg치ln칤 p캩st칤rny marihuany</a>, tak ka쬯칳 po캜칤ta캜ov칳 캜ip spot콏ebov치v치 v pr콢b캩hu 캜asu nekonstantn칤 mno쬽tv칤 elekt콏iny a odb캩r tedy neust치le lehce kol칤s치 podle toho, jak칠 jsou zrovna vodiv캩 propojeny obvody na 캜ipu a co prov치d칤 za operaci. Nejedn치 se samoz콏ejm캩 o nijak velk칠 hodnoty, kol칤s치n칤 se pohybuje v mez칤ch, na kter칠 pot콏ebujete laboratorn칤 p콏칤stroje.</p>
      <p id="aafb452f-22ee-4db9-a944-766b8f8381cb" class="">U norm치ln칤ch po캜칤ta캜콢 by tento typ 칰toku nejsp칤코 zklamal - jednak je zdroj s vyhlazovac칤mi kondenz치tory um칤st캩n칳 uvnit콏 po캜칤ta캜e, druhak jsou na desce des칤tky a stovky 캜ip콢, kter칠 syst칠m ovliv켿uj칤. Pot콏ebujete n캩co trivi치ln캩j코칤ho, tak primitivn칤ho, 쬰 to nem치 ani vlastn칤 nap치jec칤 zdroj.</p>
      <p id="9c9cf9ee-4565-47f2-b99c-2d743da185cb" class="">Takov칳m syst칠mem jsou smartcard a RFID 캜ipy. Prvn칤 jmenovan칠 naleznete v podob캩 telefonn칤ch, nebo bankomatn칤ch 캜ip콢, druh칠 v코ude tam, kde se pou쮂셨aj칤 캜ipy bezkontaktn칤 - vstupn칤 karty, pasy, opencard, 캜ipy v autobusech, ps칤 zn치mky.</p>
      <p id="cc330e1a-a8ba-4f52-9943-5c687c2383cb" class="">Tyto 캜ipy nejsou tvo콏eny stovkami mili칩n콢 a miliardami tranzistor콢, naopak, jedn치 se o vcelku primitivn칤 obvody, kter칠 se skoro v쬯y vejdou pod 10 000 tranzistor콢. Jedn칤m d콢vodem je cena, druh칳m hlavn캩 spot콏eba elekt콏iny, co je v칳znamn칳 faktor hlavn캩 u bezkontaktn칤ch (RFID) 캜ip콢, kter칠 se mus칤 nap치jet z nosn칠 vlny vys칤la캜e.</p>
      <p id="68e5a116-0195-40f3-b706-a15e21c38067" class="">U takto velk칳ch obvod콢 se ji daj칤 m캩콏it odb캩rov칠 charakteristiky, proto쬰 nad m치te stoprocentn칤 kontrolu nad jejich vstupy a v칳stupy, tak쬰 v칤te p콏esn캩 co dan칳 obvod d캩l치. M콢쬰te tak doslova m캩콏it odb캩r v ka쬯칠m taktu, co v치m d치 p콏edstavu o typech pr치v캩 pou쮂셨an칳ch obvod콢, d칤ky 캜emu m콢쬰te odhalit algortmus, kter칳 karta pou쮂셨치.</p>
      <p id="901330ec-0c63-4536-8531-a4bdd7a02c74" class="">Detail콢m se zde nebudu v캩novat, proto쬰 bez znalost칤 architektury 캜ip콢 na 칰rovni vysok칠 코koly se nejsp칤코 moc chytat nebudete, nav칤c nejsem odborn칤k a ani jsem v tomhle ohledu ned캩lal 쮂멳n칠 pokusy, proto쬰 to chce docela drah칠 elektronick칠 vybaven칤.</p>
      <h3 id="96bce428-326f-4305-8154-18579d61fb1e" class="">Shrnut칤</h3>
      <p id="e20ee6f3-065d-4f27-ba37-9db2d374b5b8" class="">Odb캩rov칠 칰toky mohou pomoci podstatn캩 zredukovat po캜et mo쬹칳ch hesel, proto쬰 v치m prozrad칤 informace o algoritmu. Vy쬬duj칤 siln칠 znalosti o architektu콏e po캜칤ta캜ov칳ch 캜ip콢 a solidn칤 technick칠 vybaven칤. Pokud nepochop칤te do posledn칤ho detailu jednoduch칠 po캜칤ta캜e, jako je t콏eba <a href="http://kitakitsune.org/raw/RelayTalk.pdf">tohle</a>, nem치 smysl se v tom d치l pitvat, proto쬰 v치m to stejn캩 nic ne콏ekne.</p>
      <h2 id="78f678f7-37af-4c16-b7d7-be9b838444f9" class="">Timing attack</h2>
      <p id="9e6517fa-30e6-49be-9bf4-78b6312af746" class="">A캜 se to nezd치, dost informac칤 se d치 o syst칠mu zjistit i podle rychlosti reakc칤.</p>
      <p id="b2b60947-fe32-4275-878a-3ec5c34b22db" class="">Osobn캩 jsem tomuto typu 칰toku nev캩noval pozornost, dokud mi nevyrazila dech p콏edn치코ka <a href="http://www.youtube.com/watch?v=OsbQhr9ZmPY">Time is on my side</a> z <a href="http://events.ccc.de/congress/2011/Fahrplan/events/4640.en.html">28c3</a>, kde <a href="http://sebastian-schinzel.de/">Sebastian Schinzel</a> p콏edvedl origin치ln칤 칰tok na syst칠m po s칤ti, kter칳 v치m umo쮄갓je zredukovat po캜et pokus콢 k uhodnut칤 hesla na pouh칠 stovky tis칤c, pokud program치tor ud캩l치 tu chybu a pou쬴je standardn칤 funkce pro porovn치v치n칤 콏et캩zc콢 na plaintextov칠 heslo.</p>
      <h3 id="2a1909e8-cacd-44dc-84bf-96095d63ca75" class="">strcmp()</h3>
      <p id="2a6393ba-09f1-4722-9437-0c27a0b4ba6d" class="">Jak douf치m v코ichni v칤te, pokud chcete v jazyce C porovnat dva 콏et캩zce, pou쬴jete funkci <code>strcmp()</code>. Jeliko je v캩t코ina syst칠m콢 je postaven치 na C, plat칤 zde uveden칠 informace prakticky pro libovoln칳 syst칠m, nebo interpretovan칳 programovac칤 jazyk.</p>
      <p id="99b9ab3c-cdfd-4337-82be-88742a714a87" class=""><code>strcmp()</code> funguje velice jednodu코e - p콏ij칤m치 dva textov칠 콏et캩zce, kter칠 proch치z칤 a znak po znaku porovn치v치. Pokud se znaky v pol칤ch na stejn칠m indexu nerovnaj칤, vr치t칤 캜칤slo v캩t코칤, nebo men코칤 nule, dle toho jak se li코칤. Jestli쬰 jsou oba 콏et캩zce stejn칠, vr치t칤 nulu.</p>
      <p id="991fd73e-b010-433a-a58a-191089737c21" class="">Pod칤vejme se nyn칤 na <code>strcmp()</code>, tak jak j칤 <a href="http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=string/strcmp.c;h=8229d7c773b361a1587cac2cfc5d9b12ba29255a;hb=1f529f7d8456f09109a8e942581f89f10a901ed0">implementuje linuxov치 glibc</a>:</p>
      <pre class="code"><code><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span>
<span class="cp">#include</span> <span class="cpf">&lt;memcopy.h&gt;</span>
 
<span class="cp">#undef strcmp</span>
 
<span class="cm">/* Compare S1 and S2, returning less than, equal to or</span>
<span class="cm">   greater than zero if S1 is lexicographically less than,</span>
<span class="cm">   equal to or greater than S2.  */</span>
<span class="kt">int</span>
<span class="nf">strcmp</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
     <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p1</span><span class="p">;</span>
     <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p2</span><span class="p">;</span>
<span class="p">{</span>
  <span class="k">register</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">p1</span><span class="p">;</span>
  <span class="k">register</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">p2</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="n">reg_char</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">;</span>
 
  <span class="k">do</span>
    <span class="p">{</span>
      <span class="n">c1</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span> <span class="o">*</span><span class="n">s1</span><span class="o">++</span><span class="p">;</span>
      <span class="n">c2</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span> <span class="o">*</span><span class="n">s2</span><span class="o">++</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">c1</span> <span class="o">==</span> <span class="sc">'\0'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c1</span> <span class="o">-</span> <span class="n">c2</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">c1</span> <span class="o">==</span> <span class="n">c2</span><span class="p">);</span>
 
  <span class="k">return</span> <span class="n">c1</span> <span class="o">-</span> <span class="n">c2</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">libc_hidden_builtin_def</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">)</span>
</code></pre>
      <p id="36dfc05d-a305-42ef-9220-121b5d15688c" class="">Jeliko se jedn치 sice o re치lnou, ale p콏eci jen pon캩kud zbyte캜n캩 komplikovanou uk치zku, p콏id치m je코t캩 zjednodu코enou implementaci, kter치 funguje t칠m캩콏 ekvivalentn캩:</p>
      <pre class="code"><code><span class="kt">int</span> <span class="nf">strcmp</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s2</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(;</span> <span class="o">*</span><span class="n">s1</span> <span class="o">==</span> <span class="o">*</span><span class="n">s2</span><span class="p">;</span> <span class="n">s1</span><span class="o">++</span><span class="p">,</span> <span class="n">s2</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">s1</span> <span class="o">==</span> <span class="sc">'\0'</span><span class="p">)</span>
            <span class="k">break</span><span class="p">;</span>
   
    <span class="k">return</span> <span class="o">*</span><span class="n">s1</span> <span class="o">-</span> <span class="o">*</span><span class="n">s2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
      <p id="2f30b3c5-3ea3-455a-a134-ab8866753420" class="">Funkce proch치z칤 p콏es ukazatele <code>s1</code> a <code>s2</code>, kter칠 dostala jako argumenty, a porovn치v치, jestli jsou hodnoty na kter칠 ukazuj칤 stejn칠. Pokud ano, pokra캜uje se d치l. Jakmile se li코칤, nebo nastane konec 콏et캩zce, funkce se ukon캜칤 a vr치t칤 v칳sledek.</p>
      <p id="299e1d40-6571-4cf7-912c-bf432d5f691f" class="">Abych se nemusel uchylovat k C, p콏ep칤코i danou uk치zku 1:1 do pythonu. P콢sob칤 to trochu k콏e캜ovit캩, ale funguje stejn캩:</p>
      <pre class="code"><code><span class="k">def</span> <span class="nf">strcmp</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">):</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">min_len</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">s2</span><span class="p">))</span>
   
    <span class="k">while</span> <span class="n">s1</span><span class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">==</span> <span class="n">s2</span><span class="p">[</span><span class="n">cnt</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="n">min_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
   
        <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
   
    <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">cnt</span><span class="p">])</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">cnt</span><span class="p">])</span>
</code></pre>
      <p id="04b94797-fe20-4e31-bc8e-42cde1c3d53e" class="">D콢kladn캩 si pros칤m uveden칠 zdrojov칠 k칩dy prostudujte, dokud nebudete m칤t jistotu, 쬰 jim rozum칤te.</p>
      <h3 id="f1be8b31-20f2-4011-a60c-ee2813b99ece" class="">V칳konnostn칤 optimalizace</h3>
      <p id="3ea2ce36-87be-4b90-a004-98a4a813601a" class="">Za p콏edpokladu, 쬰 jste skute캜n캩 pochopili uveden칠 zdrojov칠 k칩dy, tak by v치m m캩lo b칳t jasn칠, 쬰 funkce trv치 pro r콢zn칠 콏et캩zce <strong>stejn칠 d칠lky</strong> r콢znou dobu. Je to tak z d콢vodu v칳konnostn칤 optimalizace, kdy je zbyte캜n칠 nad치le porovn치vat dva 콏et캩zce, kdy u jsme narazili na prvn칤 odli코nost, tud칤 v칤me 쬰 nem콢쬺u b칳t stejn칠.</p>
      <h3 id="e13c7a06-1158-4702-b68c-ec8dc497ae88" class="">Nepraktick치 uk치zka</h3>
      <p id="41de8d03-66ad-4256-9130-8b66826c7c62" class="">Aby se ne콏eklo, 쬰 je kapitola o side-channel 칰toc칤ch sam치 nuda a 쮂멳n치 akce, p콏ipravil jsem nepraktickou uk치zku, kter치 칰to캜칤 na <code>strcmp()</code> v pythonu, tak쬰 si m콢쬰te vyzkou코et, 쬰 칰tok na <code>strcmp()</code> je skute캜n캩 mo쬹칳. Ve skute캜n칠m sv캩t캩 by v치m uk치zka byla k ni캜emu, proto쬰 칰to캜it na lok치ln칤 po캜칤ta캜 nem치 v캩t코inou smysl a m콢쬰te mi v캩콏it, 쬰 raw p콏칤stup k IP vrstv캩, routov치n칤 packet콢 dle vyt칤쬰n칤 a multitaskingovost na stran캩 serveru v코e PODSTATN캨 komplikuje.</p>
      <p id="12ac83b7-69eb-44d9-b6a6-26923ce87de1" class="">V p콏칤loze najdete slo쬶u <code>timing_attack/</code>, ve kter칠 se nach치z칤 n캩kolik soubor콢, jedn칤m z nich je <code>cmptest.py</code>. Obsahuje v칳코e uvednou implementaci funkce <code>strcmp()</code> a n캩kolik m캩콏칤c칤ch funkc칤, kter칠 nejsou tak podstatn칠. D콢le쬴t칠 je, 쬰 kdy mu p콏ed치te jako prvn칤 parametr 캜칤slo, provede tolikr치t funkci <code>strcmp("h", "heslo")</code> a <code>strcmp("x", "heslo")</code>, v칳sledek v치m potom vyp칤코e na termin치l.</p>
      <pre id="c76c0657-a749-418f-8cee-0b476c3acbbd" class="code code-wrap"><code>./cmptest.py 10000000</code></pre>
      <pre id="d3473dad-2117-4745-ad18-f24fd55d00fb" class="code code-wrap"><code>10000000:
    strcmp('x', 'heslo') &gt; strcmp('h', 'heslo')  (12.5968060493 &gt; 11.8393321037)</code></pre>
      <p id="01fe6439-596f-4c39-a1cf-fe84c80dc43f" class="">Zde jasn캩 vid칤me, 쬰 p콏i deseti milionech pokus콢 trv치 proveden칤 testu s <code>"x"</code> 12,59 sekundy, zat칤mco s <code>"h"</code> jen 11.83. To je docela p캩kn칳 a jasn캩 m캩콏iteln칳 rozd칤l.</p>
      <p id="50a1ce8f-f773-4947-8fa6-0df117449ee0" class="">Jeliko jsem m캩l st치le je코t캩 n캩jak칠 pochyby, rozhodl jsem se napsat dal코칤 script, kter칳 zkus칤 pom캩콏it celou abecedu a vyp칤코e, jak dlouho trvalo jednotliv칠 m캩콏en칤, nav칤c vybere nejkrat코칤 a nejdel코칤 p칤smeno. Script se jmenuje <code>cmprate.py</code> a zkou코칤 porovn치vat jak na코칤 starou zn치mou funkce <code>strcmp()</code>, tak funkci <code>dcmp()</code>, kter치 je jen jednoduch칳 obal v podob캩 <code>"return s1 == s2"</code> nad pythonovsk칳m <code>==</code> oper치torem. Zde je vid캩t v칳sledek p콏i milionu porovn치n칤:</p>
      <pre id="6e4d40c2-ca7f-4fe0-9673-9e91ed0fa3a5" class="code code-wrap"><code>./cmprate.py  1000000</code></pre>
      <pre id="09370461-20f4-4df9-a37c-802d678efbaa" class="code code-wrap"><code>Function; dcmp
Password; heslo
 
    a : 0.293820858002      b : 0.310147047043  
    c : 0.300177097321      d : 0.302853107452  
    e : 0.304003000259      f : 0.298863172531  
    g : 0.301759958267      h : 0.299163818359  
    i : 0.30108499527       j : 0.302097082138  
    k : 0.303493976593      l : 0.298543930054  
    m : 0.294486999512      n : 0.305546998978  
    o : 0.301103830338      p : 0.294248819351  
    q : 0.293974876404      r : 0.294204950333  
    s : 0.296105861664      t : 0.294260978699  
    u : 0.301180839539      v : 0.295403003693  
    w : 0.296595096588      x : 0.295566082001  
    y : 0.296170949936      z : 0.299213171005  
 
Min; a : 0.293820858002
Max; b : 0.310147047043
 
Press return key to continue..
 
Function; strcmp
Password; heslo
 
    a : 1.29385995865       b : 1.29009699821  
    c : 1.28069210052       d : 1.28151607513  
    e : 1.2850959301        f : 1.2793431282    
    g : 1.27082300186       h : 1.19221711159  
    i : 1.32058596611       j : 1.30693387985  
    k : 1.293653965         l : 1.30821704865  
    m : 1.28762984276       n : 1.29457807541  
    o : 1.290391922         p : 1.3181951046    
    q : 1.31833600998       r : 1.29655194283  
    s : 1.31078600883       t : 1.29456710815  
    u : 1.31070494652       v : 1.29148507118  
    w : 1.3075799942        x : 1.31262302399  
    y : 1.30018806458       z : 1.30558419228  
 
Min; h : 1.19221711159
Max; i : 1.32058596611
 
Press return key to continue..</code></pre>
      <p id="2f4cf9c5-35de-4f2f-a5e7-3f60917b5c06" class="">Jak je vid캩t, funkce <code>strcmp()</code> je skute캜n캩 p콏edvidateln치, a skon캜칤 pro spr치vn칠 hodnoty rychleji, ne pro nespr치vn칠. <code>dcmp()</code> v코ak vypad치 kompletn캩 n치hodn캩, tomu se je코t캩 budu trochu v캩novat d치le.</p>
      <p id="04da752e-bdcb-45ce-9a2d-7427b6eadd0e" class=""><code>cmprate.py</code> mi ka쬯op치dn캩 potvrdil, 쬰 se nesna쮂셠 implementovat nedosa쬴telnou ideu, tak쬰 jsem rovnou napsal script <code>cmpcrack.py</code>, kter칳 postupn캩 testuje abecedu a zkou코칤 heslo.</p>
      <pre id="d423aac9-e563-41dc-b07b-5a6bd9638e8f" class="code code-wrap"><code>./cmpcrack.py 1000000</code></pre>
      <pre id="feae0433-228c-4365-8744-4666667633dc" class="code code-wrap"><code>h [1.1929199695587158, 'h']
he [1.5170519351959229, 'e']
hes [1.8253459930419922, 's']
hesl [2.1278860569000244, 'l']
Got it: heslo</code></pre>
      <p id="b9672f6c-23e2-495a-8b07-89c0cb6f401b" class="">Jak m치te mo쬹ost vid캩t, script pot콏ebuje cca milion pokus콢 na ohodnocen칤 ka쬯칠ho p칤smena. To je nejmen코칤 po캜et test콢, kter칠ho se mi poda콏ilo dos치hnout na m칠m po캜칤ta캜i s linuxem mint 13 a n캩kolika b캩쮂셖칤mi aplikacemi, jako je prohl칤쬰캜, IRC klient, SSH klient, jabber a p콏ehr치va캜 hudby. Jsem p콏esv캩d캜en칳, 쬰 na realtime syst칠mu (viz d치le) by m캩l sta캜it i podstatn캩 men코칤 po캜et pokus콢.</p>
      <h3 id="b96243f9-67a6-4d8e-8de9-8c4291a02977" class="">Realtime OS</h3>
      <p id="18fa67fc-94f5-40cd-a04e-7792533aec71" class="">Uk치zka sice fungovala s pon캩kud absurdn칤 (v pythonu se to d치 vy콏e코it mnohem elegantn캩ji, ale pak by to nebylo ekvivalentn칤 k C k칩du) implementac칤 <code>strcmp()</code>, ale naprosto selhala v p콏칤pad캩 oper치toru porovn치n칤.</p>
      <p id="75c38d58-9f39-435e-9e80-e5ef1634fa70" class="">Napadlo m캩, 쬰 jeden z mo쬹칳ch d콢vod콢, pro캜 tomu tak bylo je jist칠 rozost콏en칤, kdy se sna쮂셠e z relativn캩 pomal칠ho pythonu m캩콏it nativn칤 operaci, kter치 b캩쮂 tak rychle, 쬰 m캩콏en칤 v podstat캩 vrac칤 jen 캜as nutn칳 k zavol치n칤 funkce, kter칳 je ovlivn캩n spoustou dal코칤ch v캩c칤, jako t콏eba fragmentace pam캩ti a po캜tem b캩쮂셖칤ch proces콢.</p>
      <p id="e985a624-ccdb-45d7-ac52-ab39445949cf" class="">Dal코칤 co m캩 napadlo je, 쬰 na v코ech modern칤ch desktopov칳ch syst칠mech nikdy neb캩쮂 jen jedna v캩c. I kdybyste povyp칤nali v코echny mo쬹칠 ostatn칤 procesy, st치le se toho d캩je na pozad칤 mnoho, co v콢bec nem콢쬰te ovlivnit. Je tu str치nkov치n칤, je tu slo쬴t칳 proces p콏ep칤n치n칤 proces콢 podle vyt칤쬰n칤 po캜칤ta캜e a priorit, jsou tu r콢zn칠 cache, je tu z콏et캩zov치n칤 a predikce instrukc칤 v procesoru.</p>
      <p id="655311cf-cca7-464a-a722-438bf257dd7e" class="">D칤ky tomu v코emu je t캩쬶칠 n캩co opravdu p콏esn캩 m캩콏it ve chv칤li kdy se bav칤me o nanosekund치ch, co m콢쬰 implementace <code>==</code> pro 콏et캩zec spl켿ovat, jeliko implementace Pythonu kter칳 pou쮂셨치m je napsan치 v C.</p>
      <p id="ad876879-a2b1-48cc-a521-3c790e00fbdf" class="">Sebastian Shinzel na podobn칳 probl칠m tak칠 narazil a rozhodl se to vy콏e코it silnou 칰pravou Windows. Osobn캩 jsem se v pokusech vydal jednodu코코칤 cestou - modern칤 opera캜n칤 syst칠m jsem v콢bec nepou쬴l, proto쬰 pro캜 pou쮂셨at multitaskingov칳 OS na n캩co, na co se zcela o캜ividn캩 nehod칤. Nam칤sto toho jsem si vybral 코iroce dostupn칳 realtime OS; <a href="http://cs.wikipedia.org/wiki/DOS">DOS</a>, konkr칠tn캩 verzi <a href="http://cs.wikipedia.org/wiki/FreeDOS">FreeDOS</a>.</p>
      <h3 id="41c57672-14ed-48e3-b086-737509fab515" class="">DOS</h3>
      <p id="17652a16-f598-4d15-8926-543b884da58b" class="">DOS je z dne코n칤ho pohledu siln캩 trivi치ln칤 syst칠m, u kter칠ho mi trvalo velice dlouho, ne jsem pochopil v 캜em spo캜칤v치 jeho v칳hoda. Na prvn칤 pohled se to m콢쬰 zd치t pon캩kud p콏ekvapiv칠, ale nejv캩t코칤 v칳hoda je v tom, 쬰 ned캩l치 nic. Zat칤mco dne코n칤 opera캜n칤 syst칠my se staraj칤 o v코echno mo쬹칠, DOS prost캩 na캜te v치코 program do pam캩ti, p콏ed치 mu velen칤 a to je v코e, od t칠to doby m치 v치코 program na starost v코e, co m치 po캜칤ta캜 nyn칤 d캩lat. Jakmile skon캜칤, p콏ed치 velen칤 s trochou 코t캩st칤 zp캩t DOSu a ten umo쬹칤 spou코t캩n칤 dal코칤ch program콢.</p>
      <p id="82bde059-3326-4ad9-a201-0d9de61a8f25" class="">Ve skute캜nosti to tak jednoduch칠 nen칤, proto쬰 je zde je코t캩 DOS API ovl치dan칠 pomoc칤 r콢zn칳ch p콏eru코en칤 a rezidentn칤 programy, kter칠 mohou za ur캜it칳ch podm칤nek b캩쬰t kdesi na pozad칤, ale neka쬸e si pohled na sv캩t slo쬴tostmi, kter칠 se daj칤 jednodu코e povyp칤nat.</p>
      <h3 id="0fb08dcb-df93-4a9e-b885-ad744a09d6fe" class="">PythonD</h3>
      <p id="5c9f794d-5c17-41f1-b198-ca9235b7ae05" class="">Jeliko se mi v z치v캩ru 캜l치nku necht캩lo m캩nit jazyk, hledal jsem python pro DOS. Na internetu se na코t캩st칤 na코el nad코enec, kter칳 p콏ed p치r lety p콏elo쬴l python 2.4. Jedn치 se sice o star코칤, ale st치le pou쬴telnou verzi. Pokud m치te z치jem, najdete ho zde: <a href="http://www.progecam.com/download/opensource/python/pyd24210.zip">http://www.progecam.com/download/opensource/python/pyd24210.zip</a></p>
      <h3 id="fce1e7f5-deb7-45b1-8505-8707d52b74d5" class="">칔prava live cd</h3>
      <p id="a3f247ba-eb47-4245-beec-eada638ec68b" class="">DOS v tomto p콏칤pad캩 nem콢쬰te spustit ve virtualiza캜n칤ch n치stroj칤ch, proto쬰 jen b콢h v칤, co by se v치m vracelo jako 캜as. Proto jsem si upravil star코칤 <a href="http://ftp//osdos:osdos@ftp.osdos.net/freedos1/fdfullcd.iso">live CD</a>, abych FreeDOS nemusel instalovat. Pou쬴l jsem k tomu program <a href="http://www.littlesvr.ca/isomaster/">isomaster</a>.</p>
      <p id="78a46c01-d6d0-4b6a-8750-23335fa1ac18" class="">Python jsem si rozbalil do slo쬶y <code>LIVE/python</code>, a k tomu jsem si vyrobil soubor <code>python.bat</code>, kter칳 najdete v p콏칤loze a samoz콏ejm캩 jsem si do <code>LIVE/src</code> nakop칤roval i zdroj치ky p콏ede코l칳ch uk치zek.</p>
      <p id="99a71500-5565-4346-85b2-a5ff12210304" class="">Po spu코t캩n칤 live CD jsem vybral v 칰vodn칤m menu 1 a v druh칠m menu 3, tedy 쬰 chci podporu roz코칤콏en칠 pam캩ti. Po bootu jsem se ocitl na disku A: a chv칤li jsem t치pal, ne mi do코lo, 쬰 Live CD je p콏ipojeno na disku X:. V ur캜itou chv칤li m캩 napadlo scripty trochu poladit a skute캜n캩 jsem ocenil, 쬰 na disku Z: je mountl칳 ramdisk, tak쬰 tam pomoc칤 programu <code>edit</code> m콢쬿 zkop칤rovan칠 scripty upravovat.</p>
      <p id="239467c2-c797-4b2f-8e19-16148c47473f" class="">P콏esto쬰 jsem v코ak vyzkou코el lecos, 칰tok na <code>==</code> se mi nepoda콏ilo prov칠st a hodnoty kter칠 vrac칤 jsou i p콏i stovk치ch milion콢 pokus콢 neodli코iteln칠 od 코umu i p콏es pou쬴t칤 DOSu. Hypot칠za s realtime OS tedy padla.</p>
      <h3 id="b63d56ab-19ea-475b-b1d4-028cac49a61a" class="">_PyString_Eq</h3>
      <p id="4f196a99-7ee7-410a-82e4-691ad3756913" class="">N치hodnost <code>==</code> mi nedala sp치t, proto jsem se nakonec rozhodl prozkoumat implementaci oper치toru porovn치n칤 pro stringy, kterou najdete ve <a href="http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2">zdroj치c칤ch pythonu</a>, konkr칠tn캩 v souboru <code>Python-2.7.3/Objects/stringobject.c</code> na 콏치dce 1249:</p>
      <pre class="code"><code><span class="kt">int</span>
<span class="nf">_PyString_Eq</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">o1</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">o2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PyStringObject</span> <span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">PyStringObject</span><span class="o">*</span><span class="p">)</span> <span class="n">o1</span><span class="p">;</span>
    <span class="n">PyStringObject</span> <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">PyStringObject</span><span class="o">*</span><span class="p">)</span> <span class="n">o2</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">Py_SIZE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">Py_SIZE</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
      <span class="o">&amp;&</span> <span class="o">*</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">ob_sval</span> <span class="o">==</span> <span class="o">*</span><span class="n">b</span><span class="o">-&gt;</span><span class="n">ob_sval</span>
      <span class="o">&amp;&</span> <span class="n">memcmp</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">ob_sval</span><span class="p">,</span> <span class="n">b</span><span class="o">-&gt;</span><span class="n">ob_sval</span><span class="p">,</span> <span class="n">Py_SIZE</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
      <p id="7310632f-c553-49f7-84a8-b3897a3955d8" class="">Jak je vid캩t, implementace porovn치v치n칤 je trochu jin치 ne <code>strcmp()</code> v C, proto쬰 prvn캩 porovn치 d칠lku 콏et캩zce. To by se v C nevyplatilo, proto쬰 stringy nemaj칤 samostatn캩 ulo쬰nou d칠lku a jej칤 zji코콘ov치n칤 pomoc칤 <code>strlen()</code> by bylo zbyte캜n캩 n치ro캜n칠.</p>
      <p id="9e0562df-d52b-46b3-96a2-80f94a123da5" class="">Z v칳코e uveden칠ho zdrojov칠ho k칩du tedy plyne, 쬰 pythonn칤 oper치tor porovn치n칤 je v콢캜i naivn칤 implementaci timing attack콢 odoln칳.</p>
      <h3 id="d0b44c23-a8b2-4eca-b880-48d9ff3f4a11" class="">N치vrhy</h3>
      <p id="6ca4fcd6-ed35-48de-bf86-d973ae65c9a6" class="">Script <code>cmpcrack.py</code> nen칤 칰pln캩 nejvhodn캩ji napsan칳 a jednodu코e se m콢쬰 zatoulat kam by nem캩l. Napi코te funkci, kter치 v dan칠m kroku ohodnot칤 v코echna p칤smena v poli <code>tests</code> a kdy zjist칤 쬰 mezi nimi nen칤 skoro 쮂멳n칳 rozd칤l, vr치t칤 prom캩nnou <code>guess</code> o p칤smeno zp캩t, proto쬰 nejsp칤코 do코lo k 코patn칠mu pokusu. D칤ky tomu nebudete muset 캜ekat, a 코patn칳 pokus dos치hne 10 znak콢 a hled치n칤 bude resetov치no.</p>
      <p id="9208fef8-d39d-4bd1-a676-9f0c942e8881" class="">Zkuste navrhnout zp콢sob 칰toku na python칤 oper치tor porovn치v치n칤. Dok치쬰te navrhnout metodiku z칤sk치n칤 o캜ek치van칠 d칠lky? Je v콢bec mo쬹칠 na <code>_PyString_Eq()</code> za칰to캜it?</p>
      <p id="b11c1e85-a674-488f-a517-0c1db9d41744" class="">Pokud budete 칰to캜it p콏es s칤콘, nem캩콏te prvn캩 milion pokus콢 pro jedno p칤smeno, milion pro druh칠 atd, ale pos칤lejte serveru v코echna na st콏칤da캜ku. To v치m umo쬹칤 do jist칠 m칤ry eliminovat fluktuace v zat칤쬰n칤 serveru a rozlo쬴t je do v칤ce znak콢, tak쬰 tolik neovlivn칤 v칳sledky m캩콏en칤. Za upozorn캩n칤 d캩kuji <a href="http://www.abclinuxu.cz/lide/hrachj">Jendovi</a>.</p>
      <h3 id="b096dae0-68df-43c0-bda9-0f51988506cf" class="">Obrana</h3>
      <p id="5e615a70-a5c4-4f9b-9a0f-6234bdb4a2f5" class="">Pokud n캩kdy budete ps치t aplikaci, ve kter칠 porovn치v치te plaintextov칠 heslo, nepou쮂셨ejte trivi치ln칤 operace pro porovn치v치n칤 콏et캩zc콢, ale API kter칠 v치m nab칤z칤 kryptografick칠 knihovny.</p>
      <p id="66608633-d697-4c81-ad8a-3fb1d3757616" class="">Pokud nem치te dostupn칠 podobn칠 API, nevytv치콏ejte <code>strcmp()</code>, ale <code>strncmp()</code>, kter치 v쬯y projde cel칳 string. Dal코칤 mo쬹ost je vlo쬰n칤 n치hodn칠 um캩l칠 pauzy.</p>
      <p id="e054688d-17dc-471f-846e-67bd33c023f8" class="">칔pln캩 nejlep코칤m 콏e코en칤m je v코ak hesla v plaintextu neukl치dat a pou쮂셨at osolen칠 hashe, na kter칠 timing attacky nefunguj칤.</p>
      <h3 id="321703bf-c71e-4990-93da-b772c8aba0f0" class="">Pou캜en칤</h3>
      <p id="74859466-67f0-4fc3-9966-8d7862a11bd5" class="">Timing attack je 캜asto opom칤jenou chybou, kter치 je ov코em docela t캩쬶치 na exploitaci v p콏칤pad캩, 쬰 se sna쮂셦e 칰to캜it po internetu - vzpome켿te si na trable s <code>==</code> a vyn치sobte to po캜tem nezn치m칳ch za콏칤zen칤 nach치zej칤c칤mi se mezi v치mi a ob캩t칤, kter치 se budou sna쬴t co nejoptim치ln캩ji dynamicky sm캩콏ovat traffic, navrch p콏idejte i nemo쬹ost pou쮂셦 proxy, proto쬰 by vn치코ela do syst칠mu dal코칤 rozost콏en칤.</p>
      <p id="b761f441-a57e-40a6-ba75-94372e3189a7" class="">Velk칳 u쬴tek tento typ 칰toku najde ve chv칤l칤ch, kdy nec칤l칤te na slo쬴t칳 hardware, ale na n캩co relativn캩 jednoduch칠ho, jako je jedno캜ip, nebo t콏eba DVD p콏ehr치va캜, 캜i satelit na orbit캩 (kde v치m to ov코em zkaz칤 odezva radiov칠 s칤t캩 a n칤zk치 rychlost).</p>
      <p id="2cbfa513-54fc-44de-8542-812183398e89" class="">Co se t칳캜e side channel 칰tok콢, d치le ji je pitvat nebudu, pevn캩 v캩콏칤m, 쬰 ka쬯칳 kdo cht캩l pochopil a kdo nepochopil, tomu stejn캩 dal코칤 informace nepomohou.</p>
      <h2 id="b5242070-8c63-42c2-be45-21a8fc56a36a" class="">Fail2ban</h2>
      <p id="d1fefd54-237a-471f-9777-618a63e2d7d4" class="">Jedn칤m z nejv캩t코칤ch nep콏치tel h치dac칤ch 칰tok콢 je po n칤zk칠 p콏enosov칠 rychlosti a dlouh칠 odezv캩 tak칠 omezen칤 po캜tu pokus콢. To se d치 v z치sad캩 rozd캩lit na tyto typy:</p>
      <ol type="1" id="c71c1d40-f812-4ebf-8d39-0169ded92716" class="numbered-list" start="1">
        <li>Omezen칤 na u쬴vatele</li>
      </ol>
      <ol type="1" id="728d2b9b-d579-4402-94e3-47612b716c3e" class="numbered-list" start="2">
        <li>Omezen칤 na IP</li>
      </ol>
      <ol type="1" id="37fb035c-5b37-4dfd-bc86-441abe2af3bf" class="numbered-list" start="3">
        <li>Omezen칤 podle lokace IP</li>
      </ol>
      <h2 id="fed95ba8-5c47-43bc-815a-5aab24f6bed5" class="">Omezen칤 na u쬴vatele</h2>
      <p id="becf981c-7380-4f92-8d14-3aa9ada89529" class="">Pokud se setk치te s prvn칤m typem, jste vy콏칤zen칤 a nenapad치 m캩 nic, co by v치m mohlo pomoct. Po vyzkou코en칤 n캩kolika pokus콢 je u쬴vatel zablokov치n a vy kon캜칤te, d치l m치te prost캩 sm콢lu a neexistuje zp콢sob, jak to obej칤t.</p>
      <p id="77461bd5-87f0-41bc-8ce2-08ccbbcbf65f" class="">S t칤mto typem ochrany se na코t캩st칤 setk치te jen velmi z콏칤dka u vyj칤me캜n캩 d콢le쬴t칳ch v캩c칤, proto쬰 umo쮄갓j칤 jednoduch칳 DDOS, kdy zabr치n칤te p콏ihla코ov치n칤 i legitimn칤ch u쬴vatel콢, kter칠 t칤m moc nepot캩코칤te, tud칤 vytvo콏칤 tlak na admina, aby syst칠m odstranil.</p>
      <p id="9d8592d6-97c2-4f58-b955-7d325a951409" class="">Tento syst칠m se d치 o캜ek치vat u banky, nebo zbra켿ov칳ch syst칠m콢 a v콢bec celkov캩 v코ude tam, kde je kritick칠, aby se nikdo nedostal dovnit콏 a pohodl칤 u쬴vatel콢 nen칤 takovou prioritou.</p>
      <h2 id="50d6fcea-3c02-457d-a594-84c926e1acea" class="">Omezen칤 na IP</h2>
      <p id="3b982f67-8775-4380-a164-40b67c464f23" class="">Mnohem 캜ast캩j코칤m, i kdy st치le zdaleka ne samoz콏ejm칳m, je syst칠m omezen칤 po캜tu pokus콢 z jedn칠 IP adresy. D칤ky tomu s velkou 코anc칤 nezablokujete legitimn칤 u쬴vatele a pokud ano, m콢쬺u prost캩 p콏ij칤t k jin칠mu po캜칤ta캜i a zkusit to tam.</p>
      <p id="421af5e5-285c-4a9d-8f32-cb02f47aa7dd" class="">Stejn칳m zp콢sobem m콢쬰te postupovat i vy - rozprost콏칤t h치d치n칤 mezi po캜칤ta캜e botnetu (prvn캩 to tedy chce n캩jak칳 m칤t ^-^), pou쮂셦 proxy servery, zkou코et h치dat jen jeden po쬬davek za hodinu atp..</p>
      <h2 id="3d6f6adb-a179-4377-a293-f43689e8c105" class="">Omezen칤 podle lokace IP</h2>
      <p id="ca1d1d06-00b9-4ca4-b93c-3cf383b96672" class="">Tento typ ochrany implementuje t콏eba gmail, kdy v치m nedovol칤 se jen tak p콏ihl치sit z jin칠 zem캩 a vy쬬duje ov캩콏en칤 pomoc칤 SMS.</p>
      <p id="38e51d19-3ac1-47ad-981b-26e740c19b09" class="">My코lenka je prost치 - spousta 칰tok콢 na u쬴vatelsk칠 칰캜ty jde z ciziny, proto blokac칤 cizinc콢 eliminujete v캩t코inu pokus콢.</p>
      <p id="5656f787-a6a7-4309-aedf-704fb9175d56" class="">콎e코en칤 je je코t캩 prost캩j코칤 - proxy v zemi u쬴vatele.</p>
      <h2 id="00bc8b70-9962-4864-8af5-d71c68bb4f33" class="">Parametry banu</h2>
      <p id="c4e4629b-81ee-42cb-bdb7-96b5958b21e4" class="">Je d콢le쬴t칠 si uv캩domit, 쬰 ka쬯칳 ban m치 jasn캩 dan칠 parametry, kter칠 pot콏ebujete zjistit, abyste mohli syst칠m banov치n칤 obej칤t.</p>
      <h3 id="17f69c5f-e4ef-4db1-a870-54e2bd89d6a9" class="">Po캜et pokus콢</h3>
      <p id="d91b8ce1-0a17-4aac-b28d-7cfa55d60ad8" class="">Jedn칤m z nejd콢le쬴t캩j코칤ch parametr콢 je samoz콏ejm캩 po캜et pokus콢, kter칠 m콢쬰te vyzkou코et ne chytnete ban. Typicky to b칳v치 n캩kde mezi 5 a 10.</p>
      <h3 id="c9d867c1-7a9a-4249-9d17-1657013013ad" class="">캛asov치 jednotka</h3>
      <p id="2447e963-2086-4a63-95e8-e65b2dfaad77" class="">Dal코칤m d콢le쬴t칳m parametrem je samoz콏ejm캩 doba, kterou na pokusy m치te. M콢쬰 se jednat o vte콏iny a minuty, jen z콏칤dka jde o hodiny, 캜i dny.</p>
      <h3 id="81b37b58-e88c-4cfb-ba3e-0c59ddf84d82" class="">Na jak dlouho</h3>
      <p id="6a59ed92-bdfa-414c-a2dc-5e19a10ac6c4" class="">Jakmile ban dostanete, d콢le쬴t치 informace je za jak dlouho p콏estane platit a zda se to n캩jak stup켿uje, tedy 쬰 poprv칠 dostanete na hodinu, podruh칠 na dv캩 a pot콏et칤 na cel칳 den.</p>
      <h2 id="c27de8b0-f123-46c9-8084-de2f23deb000" class="">Z치v캩r</h2>
      <p id="12409564-60fe-4465-bab1-b33b955d9612" class="">Zat칤mco bruteforce se d치 p콏irovnat k oslovov치n칤 v코ech 쬰n, kter칠 jdou po ulici n치hodn칳mi v캩tami, dictionary je podstatn캩 칰캜inn캩j코칤, proto쬰 zkou코칤te na konkr칠tn칤 쬰nu v캩ci, o kter칳ch se obecn캩 v칤, 쬰 na 쬰nsk칠 zab칤raj칤, tedy r콢zn칠 lichotky a vtip.</p>
      <p id="72cbcdf6-6844-4d7a-a30d-be47cc92c6fc" class="">Dictionary s vlastn칤m, na m칤ru d캩lan칳m slovn칤kem je jako kdy si prvn캩 o dann칠 쬰n캩 zjist칤te v코echny dostupn칠 informace a nastudujete si jednotliv칠 detaily o obl칤ben칳ch filmech a knih치ch, tak쬰 쬰nu m콢쬰te bavit v캩cmi, kter칠 m치 r치da a kter칠 se j칤 l칤b칤, st치le v코ak nem치te jistotu, 쬰 v치s nebude br치t jen jako kamar치da.</p>
      <p id="1d1f9510-9f5c-4e2d-8bda-e010b23a0820" class="">Side-channel 칰toky jsou techniky, kter칠 dok치쬰 pou쮂셦 jen zku코en칳 sv콢dn칤k, jen um칤 vyhodnotit ka쬯칳 podv캩dom칳 pohled 쬰ny, to jak se j칤 zachv캩je sval nad 칰sty, jak pohne nosem, jak jej칤 쮂셟a na krku za캜ne viditeln캩 rychleji pulzovat, jak칳 zaujme postoj a jak se zasm캩je. S치m p콏itom neust치le zkou코칤 m캩nit vlastn칤 postoje tak, aby je zkorigoval s co nejpozitivn캩j코칤 reakc칤 a po chvilce doslova krm칤 쬰nu zp캩tnou vazbou tak, aby vyvolal co nejlep코칤 dojem. K tomu aby mohl n캩co takov칠ho prov칠st v코ak pot콏ebuje krom캩 talentu tak칠 mnoho zku코enost칤 a detailn칤 pov캩dom칤 o tom, jak 쬰ny funguj칤, proto to zvl치d치 jen pom캩rn캩 m치lo lid칤.</p>
      <h2 id="e3c35e48-08ac-4ea9-9c87-c15b98d3aca4" class="">Kontakt</h2>
      <p id="61c8a8bd-4029-403a-875e-dc0cd07b882b" class="">캛l치nek jsem napsal, proto쬰 chci a m콢쬿. Pokud se to n캩komu nel칤b칤, m콢쬰te si st캩쬺vat na <a href="http://necyklopedie.wikia.com/wiki/Lamp%C3%A1rna">lamp치rn캩</a>, nebo do zdi.</p>
      <p id="461a6fcf-1ecd-4ae5-8075-2835cbcde403" class="">Pokud m치te n캩jak칠 konstruktivn칤 p콏ipom칤nky, nebo si chcete o 캜l치nku pokecat, m콢쬰te mi napsat na:</p>
      <ul id="2b9ce547-e8fd-4614-a728-14526fdbb282" class="bulleted-list">
        <li style="list-style-type:disc">bystrousak@kitakitsune.org</li>
      </ul>
      <p id="d137d681-c84e-4658-90c6-b19dc0d0aaea" class="">Hackovat nikoho u캜it nebudu, tak to ani nezkou코ejte, podobn칠 maily ma쬿 bez odpov캩d칤, obzvl치코콘 blb칳m 쮂멳ostem se ve콏ejn캩 vysm칤v치m na IRC.</p>
      <h2 id="61c95fd5-e665-46db-a873-632fb11ab6b7" class="">Licence</h2>
      <p id="5bfb9a65-1bfe-4c03-839f-6abde59acb0b" class="">Tento 캜l치nek chce b칳t svobodn칳, proto ho 코i콏te jak se v치m zl칤b칤, ov코em v nezm캩n캩n칠 podob캩. Byl bych v코ak r치d, kdybych na to byl 코i콏itelem upozorn캩n, 캜ist캩 proto, 쬰 tak naraz칤m na zaj칤mav치 m칤sta.</p>
      <h2 id="541a3b2a-047f-4347-ae6b-7dfabee97998" class="">P콏칤loha</h2>
      <pre class="code"><code><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#</span>
<span class="c1"># czcube_server.py v1.0.0 (09.10.2012) by Bystroushaak (bystrousak@kitakitsune.org)</span>
<span class="c1">#</span>
<span class="c1">#= Imports =====================================================================</span>
<span class="kn">import</span> <span class="nn">sha</span>
<span class="kn">import</span> <span class="nn">md5</span>
<span class="kn">import</span> <span class="nn">zlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">from</span> <span class="nn">Crypto.Cipher</span> <span class="kn">import</span> <span class="n">AES</span>



<span class="c1">#= Variables ===================================================================</span>
<span class="n">HOST</span> <span class="o">=</span> <span class="s1">''</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">2222</span>


<span class="c1"># data v AES, jediny zpusob jak se k nim dostat je mit spravne heslo..</span>
<span class="n">PASSH</span>  <span class="o">=</span> <span class="s2">"17a3e23201798c2f72e1bdb1537e7721"</span>
<span class="n">MSG</span>    <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">mJqBQVYOewOT0b6wOCcaQd+MfW/PSz76qyquyNE8P9CXWUEAvJwsUSZU5gBA9YEttoZy2Jsf8pJ63d0u</span>
<span class="s2">xiIM3OUufPGapMYM27aPgTpTHB+IGFfLJ5LEwRIdPaEx5pyxVDkpr+VA2qYGCMU+aZv6T9FgHLELO6JA</span>
<span class="s2">nV6Qo76wYp2SxcRItw/QBTTl2+DSRDKBxchIgK9UA7v2B6Lh1+CBWh16AdpUx8+Ge93fzfdYIxp/p/rW</span>
<span class="s2">SFDKMP+BiwTCCgRzdIJz1tfXbqb4mlO81aIdP+b3xo0qJs4IKZu2PQ0G5tiBj2TcWS9M6/4/7V7bfBPJ</span>
<span class="s2">4bmpM9UBHFugm/cEkh7DW3B1lD7EaVUWU/cl/ZFvq0fnPEhgDLDfqfZKrB4WS9bwKVG0dOvW8XfwDQT4</span>
<span class="s2">MDhThzlqvk7O8Jxnvj2t0r9vTKssHFp+Y76HYAKYj/r2LDzvgZm1UJEAGhWZ+YX/F1jy+vGzMuZ4Cnqr</span>
<span class="s2">H0p4J+RhAylZPlgMjISzk10XDwrSqb3pcgg+ncGhN7MbFwjP5gc2/VSuKsm0fkAAkHa1pJCyq3PSjm36</span>
<span class="s2">GMvMvoQoUCszQAl1eiq2oOLagCm2SskMICOTFPfefYSRt7y0QSTEo8/Q6mELogo/0faS9nWasEdWKpYF</span>
<span class="s2">gWTlj/3JomqnBx2+kBeh+kNSOcJMfirrVBFv0Ma9s7aZ2lvuObcvsAeZnb65gev5E1QO1Vul/rVIyw6T</span>
<span class="s2">lxwlEFRlJC95rxigdg5LPKYi35LdNPW1jRxAqW7xWIE5OlFVFdvHi8aMpm13dN7pxF1gF662Cfs5K5K/</span>
<span class="s2">Yascxt3NvCw5KqCJAAE9ANzBA9Oo0U8R7Uw7TrPg5ynSkgGEQ1oCPfVkAWVlxWkv5LAMyhJZKMD4DEgC</span>
<span class="s2">YCtEsImiwzCANvMkiSEii6SCp5XuP10oTEmL8DM7LwdffyLX5CahjEw1VkEsAyWVxnEy7YYUQS+wMcR0</span>
<span class="s2">SYEE6HFEQxuancZBSmARCM+oLYMNs2TtHcsdd7uVT4ilkkEmqrJ1JtN5ZFzUO7SOehy41LMe6bWUxKcz</span>
<span class="s2">E+UqubcC6vB+bc2V2zKdXsIiJ6SaD18qwtGFSstcoIF+dYLeRbE4/3twpjovNmfwS8hh0QrnMNmb52DE</span>
<span class="s2">YcPePAL/6X0Sg11y323NP8JYat8jdERNaRArAfz3yQUKAZq0h66Zi67CpJyqhvmM0TlV33hl8ThOBCeb</span>
<span class="s2">R/+ytHexwrHWInD1dns2HMftJCZN3GCsEJjD5qfePS4xisARGVs28Lm/y2/8TVDnYxrUln3GUQf/C3xa</span>
<span class="s2">LHUCxMwdT9gLfBrceNQrJ3oBXQNIMKXyrthV44xlwVgJ+Ri96OinyHjGxKv3/R6myzkddcgW/9RFLSOK</span>
<span class="s2">A9YxQ5GXscebfd3bEj4F7ErkuLwgCFg0013IGAHRoOMnuZQebfzdqPt1K+xUx+XvZbqBQlNXrVA83w7k</span>
<span class="s2">aehkanLClBtPsw/frGMepkQdpMAhgMgeN3YDfC+cdbWeVliY+wNqFaANK+LmflZOw9JM6W0ymigvWxK7</span>
<span class="s2">SqpOBXFOKJ+d6WS/Dw3ScBuja4uUFv4KEDuQfu+BLyznRILMKTwscO5ImHObgj9fVX+I+1KIG3m4le/t</span>
<span class="s2">UUZxiEgxz4I0feNsbHWnNdjhwU0x5K/u8L5FGuZWarAJIPSwB0CyPt9/FPpdI4yRpMJ7ZfxDTmN4f++0</span>
<span class="s2">3DS16bD+ozFgl5CwIzl9j8viCm+CyCs6IWZdIoBurBuK90fXIinhnYrvRudzPN0vdMtwn1rz82BUdkAc</span>
<span class="s2">lKJWh/IM3FqBoJ5WXV1BOt7Ivm9bvKt0PJDkyWT3BkviT2XayW+7CFIfYmPxhiFqPzq59WmNib4raYo3</span>
<span class="s2">XfJiKdMrS1WVJZnk1ORNONJ4SAcFYqPnDyKS68cs5y3Vn0FmFUPsSkOQFnQi4gSaAMUVHHHemhgbNP7H</span>
<span class="s2">r0LJLifQNbSMjaCP9eeiGueatOQCf/7y0Fx25WhSJFAM/Goo57cvj24BrsqKPvKn0nDPzYpGduDuT4ZR</span>
<span class="s2">9fCcTVHEASrttIkvJqiq/LScM81CZ6g2z05z24MFI6GWRu93Dqwu2iCrixoClnp7Sq0lE02kpvB2meLz</span>
<span class="s2">PbkJrGR388IWpXYzWr8L9jCulJjH1YHBwcj8UpVqxR+zGu4PDdzhFZlbbeSx/8ZIw+9xlxIgbiaUti4x</span>
<span class="s2">EgzIvoW90EYYgfObPYS7GJgIvll6JUPbDXHeRJxkzIb3tkeZY/w/MgXqUEoJiSuj6CkqrQB84wcb2ntC</span>
<span class="s2">IddhC3FzzTXjTOijOVi+3c3d66ZdJCin2wvUgyHzj+DyAtwTrD2btIwamkO0XoDbvayGycqE6ttA+Tg3</span>
<span class="s2">mPaiOtbI3yk7pVhwCPwlM18EVPkQ0e2sFHecHcboF/frJmLHW/t4ras++NymwXHdPjA4KiRxe0G1qz0K</span>
<span class="s2">lBI5xuyAdg+KuxfMOoHnl2/Vn9McxGdbwJwYgElVFKUzccj1KIwDu5Z5TA84DAvVaqHqd7Py+7wVpeKg</span>
<span class="s2">NMUUzj663k1+kOyBoXxWLOeuLMknj6ic73hjnmzEofuJNUt6vTFQGfUL2+/P3+09jsqQzfjQJ9kvkuzc</span>
<span class="s2">gOTuk4HZ7DO6qnsJo0oZPIvbmMFlXi3DLgIsb1HZJHGz4lhv+2m7exY5RXilvp7lJaQXE5Z+wUZU3rJd</span>
<span class="s2">KRf2yhrnAGjbsHsNpEd6JWIGK8Y3Y237EBFUklVYcc6s0a7v/+SR0oeG0Q8KHyYNYZ4Yn7Ss+phA201H</span>
<span class="s2">V0CXbElbdPbUV3voH4nyXU2hlmdAqW+1alLv5E80QiEwvYVZiLrHBeCg2mTArQWw5eNWs0c51yNXdhuu</span>
<span class="s2">rXsXhikXzLFCKK98WCLi5+2KDOld7i2w/gDJRBCowMGZHVPIaX2bLyz00sqnOjt5XFc6aEQ6Ni5REE3S</span>
<span class="s2">y9PCR0SPE+Tfv/H60/mQQzIPNoSGQfjEBNRelBFQ8rwSgWkeKq14nyn99qaVzeC7Fo36WfHeLWXASbwN</span>
<span class="s2">GvEwBoTda46BaNWoHriIFBL3VJl8TRk2xlvljR4eZs5DYQ7SPYNN1sygf3MLA8VVZ6SPawO9VENvAWlJ</span>
<span class="s2">0ivMQKNuZHufhohiEuk3aif10eVFclYdX02Pl6r90WKpar+3z7ukr+lkjTTRFuNAAlEjnMBC/aqJIRby</span>
<span class="s2">JdgSGyo3QaRADPF7Ytp89qwDpPHmWsTI/WrumF3yRmLtX3/38RqiTlEpVAeMrxoz+u20Qp56lMHiKG6B</span>
<span class="s2">Vzl04jdVRpAF8pt/PA+6QJwW1drszr8ruK7vVKSoMeAS2xR8kd9/l6diwxWxf9eJ4na3cKiw3KamtfsK</span>
<span class="s2">ZjbixKTUfkrQViz3AEXqTTP9y/QCrqQ40vbW4ndvC7WwZX/x/E95YRhsNu9G4OpjYcNmtSma6YV8pM3D</span>
<span class="s2">YToAL3ackqqXnSigM1BeDgBAbsADztg6tFTlhNIddfBo+IGyD4GO+65RzLdg7QwJ+3utBZzpNJ289vjT</span>
<span class="s2">nJCMiGHxjyg8IZO4nY6LoiHM7obimEGeb1RocdJGHB4/UpEutsG2qHk0NjQzU0kTtbjHupx8Ki9Izhpn</span>
<span class="s2">jQuIxZpOSeEy7jbLDu50ZaFFwtHI7cNEReH2d8QTQx5LrT/KnGOiGr5Wr660KcP0SvTzwoyrSXkbvJ+2</span>
<span class="s2">m1ni3H6M2YIIGgtwptiyfQbFi2oZ8bDuBWMALCWpSBt3BvCkXJ/xqC5xporC3reBfMAv4SXKgKY+F5DL</span>
<span class="s2">u90spkqVOWMWQYs+jkDyUlfcMgmK97CTI1nfD6b4ZcTNiAD3zwh+WcU2TRfNGRsWSotqT/DkZfiw5eQ9</span>
<span class="s2">AYMV8QGyFEZi/LqyLLCkuycdDLAJQjfEmngA3UWdWsXn8ljBg5nGMNw6PN70KXP090166T9zYXFeYVEV</span>
<span class="s2">k9d2LAFRjOIknFvo8eilzH/mfEy+xC106DDpG0XPMkKzGJYqAx3+PtCdaDjUidVZqE+GuH4AG+X37Xub</span>
<span class="s2">LJIJpyhbnkdHAtLSizw5zd3Rj2fxnLFxD00wwJ7MuiY0d5WOulY0NWNjQMz5WhX3QmVCRJbFUh6To+8o</span>
<span class="s2">PCaWkvXOxGtzC8yEbgubFxI+9qCSss/DgWMC68Mf/F3SUJiXirn5EwtkRlg3L9pt5r2Aa94cZ4HmOC3T</span>
<span class="s2">CX7FFZ6P7AOkpv7JAHRWy+Yf1BwCsf2TBu4Hbixg+f/8Wm43tnxhUDqvQrXhMkfMKM6BwGgZY4s5+sLG</span>
<span class="s2">38Y1lVAF5hBQr/Sp7Nts4Hna+vuxorlJINbxcT2ZxHiZ37Pc+tnDyv86ABOKcpiVNQlAmFJVUE6M/j1c</span>
<span class="s2">GtpgTbB+FDavl3rpuD+O01mQg9nVl6MmiKdCw6ZTQUY9KGzVeWhzsahi3A1FTqPVLfHiUq6pcETuf1ek</span>
<span class="s2">dgHbxogGhTAJhL0yJZA9ZMX+d0Snt1188CvnWZ88IFrkiR+7jiUKTT2JfpxFWaF3o9FJdbu+3Y4GyRE/</span>
<span class="s2">gEQ5QrfgBPmAARNDKDKWlxr9+AFh5TIVunESa2JLbl8iR5EkiA0eEtUsyJzmyPD2I8/C8AD91FHMFYEE</span>
<span class="s2">fjjOwOxB6jSWbq5cygPg5cNL3GeQ6Fn8V2raxKs9xKkck8v0+KhcdM70RQtHG8oYwOR3IuUuilsJsw96</span>
<span class="s2">DcNeIpY1hU2pVwZ641Dufbe30eE6gnTI</span>
<span class="s2">"""</span>



<span class="c1">#= Functions & objects =========================================================</span>
<span class="k">def</span> <span class="nf">decdata</span><span class="p">(</span><span class="n">passwd</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="n">aes</span> <span class="o">=</span> <span class="n">AES</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">passwd</span><span class="p">,</span> <span class="n">AES</span><span class="o">.</span><span class="n">MODE_CFB</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">aes</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">MSG</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">getHash</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">salt</span><span class="p">):</span>
    <span class="n">passwd</span>  <span class="o">=</span> <span class="n">sha</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="n">passwd2</span> <span class="o">=</span> <span class="n">passwd</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">+</span> <span class="n">salt</span>
    <span class="n">passwd</span>  <span class="o">=</span> <span class="n">salt</span> <span class="o">+</span> <span class="n">passwd</span><span class="p">[</span><span class="mi">20</span><span class="p">:]</span> <span class="o">+</span> <span class="n">salt</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">passwd</span> <span class="o">+=</span> <span class="n">sha</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">passwd</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
        <span class="n">passwd2</span> <span class="o">+=</span> <span class="n">md5</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">passwd</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">7</span><span class="p">)))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">md5</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">passwd</span> <span class="o">+</span> <span class="n">passwd2</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>



<span class="c1">#= Main program ================================================================</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="nb">print</span> <span class="s2">"Client"</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="s2">"connected."</span>

        <span class="k">try</span><span class="p">:</span>
                <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">conn</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="s2">"czCube password: "</span><span class="p">)</span>

                        <span class="n">password</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
                                <span class="k">break</span>

                        <span class="n">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                                <span class="n">password</span> <span class="o">=</span> <span class="n">password</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">getHash</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="s2">"password_hash"</span><span class="p">)</span> <span class="o">==</span> <span class="n">PASSH</span><span class="p">:</span>
                                <span class="nb">print</span> <span class="s2">"Client authenticated."</span>
                                <span class="n">conn</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span>
                                        <span class="s2">"</span><span class="se">\n\n</span><span class="s2">"</span> <span class="o">+</span>
                                        <span class="n">zlib</span><span class="o">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">decdata</span><span class="p">(</span><span class="n">getHash</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="s2">"data_hash"</span><span class="p">),</span> <span class="n">MSG</span><span class="p">))</span> <span class="o">+</span> 
                                        <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
                                <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span> <span class="s2">"Authentication failed (password '"</span> <span class="o">+</span> <span class="n">password</span> <span class="o">+</span> <span class="s2">"')"</span>
                                <span class="n">conn</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="s2">"Wrong password "</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">*</span> <span class="s2">"*"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"!</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
                <span class="k">pass</span>
        
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span> <span class="s2">"Client"</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="s2">"disconnected."</span>
</code></pre>
      <p id="3e430c1f-e827-4ca9-9d1b-2d3d76da2650" class=""></p>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <span><a href="https://blog.rfox.eu/atom_cz.xml"><img src="../../rss_icon.png" style="width: 3em;"></a> &nbsp; &nbsp; <a href="https://twitter.com/Bystroushaak"><img src="../../twitter_icon.png" style="width: 3em;"></a></span>
    <div id="last_five_bottom">
      <h3>New posts</h3>
      <ul>
        <li>
          <a href="../Povidky/Software.html" title="Software">Software</a>
        </li>
        <li>
          <a href="../Ostatni/Paromobilita_je_budoucnost.html" title="Paromobilita je budoucnost">Paromobilita je budoucnost</a>
        </li>
        <li>
          <a href="../Ostatni/Algoritmus_hledani_programatorske_prace_2021-4.html" title="Algoritmus hled치n칤 program치torsk칠 pr치ce 2021/4">Algoritmus hled치n칤 program치torsk칠 pr치ce 2021/4</a>
        </li>
        <li>
          <a href="../3D_tisk/Nastaveni_Blenderu_pro_3D_tisk.html" title="Nastaven칤 Blenderu pro 3D tisk">Nastaven칤 Blenderu pro 3D tisk</a>
        </li>
        <li>
          <a href="../3D_modelovani/Geometricky_stred_Prahy.html" title="Geometrick칳 st콏ed Prahy">Geometrick칳 st콏ed Prahy</a>
        </li>
        <li>
          <a href="../../Utrzky/Posta_poezie.html" title="Po코ta (poezie)">Po코ta (poezie)</a>
        </li>
        <li>
          <a href="../Ostatni/Statni_zklamani.html" title="St치tn칤 zklam치n칤">St치tn칤 zklam치n칤</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_TODO_list_1_Drzak_na_sluchatka.html" title="3D TODO list 1; Dr쮂멺 na sluch치tka">3D TODO list 1; Dr쮂멺 na sluch치tka</a>
        </li>
        <li>
          <a href="../Ostatni/Dva_podvodnici.html" title="Dva podvodn칤ci">Dva podvodn칤ci</a>
        </li>
        <li>
          <a href="../3D_tisk/3D_tiskarna_Prusa_MK3S_sestaveni_a_prvni_tisk.html" title="3D tisk치rna Pr콢코a MK3S+; sestaven칤 a prvn칤 tisk">3D tisk치rna Pr콢코a MK3S+; sestaven칤 a prvn칤 tisk</a>
        </li>
      </ul>& <a href="../../Zmeny.html" title="Zm캩ny">more</a>
    </div>
    <div>
      <h3>Tagy</h3>
      <p><a href="../../Tagy/cracking.html" title="cracking">cracking</a>, <a href="../../Tagy/programovani.html" title="programovani">programovani</a>, <a href="../../Tagy/python.html" title="python">python</a></p>
    </div>
    <div>
      <h3>Blog categories</h3>
      <ul class="no_icon">
        <li>
          <a href="../3D_modelovani.html" title="3D modelov치n칤">游늭 3D modelov치n칤</a>
        </li>
        <li>
          <a href="../3D_tisk.html" title="3D tisk">游늭 3D tisk</a>
        </li>
        <li>
          <a href="../Abclinuxu.html" title="Abclinuxu">游늭 Abclinuxu</a>
        </li>
        <li>
          <a href="../Crypto.html" title="Crypto">游늭 Crypto</a>
        </li>
        <li>
          <a href="../Hardware.html" title="Hardware">游늭 Hardware</a>
        </li>
        <li>
          <a href="../Hrbitov.html" title="H콏bitov">游늭 H콏bitov</a>
        </li>
        <li>
          <a href="../Knihy.html" title="Knihy">游늭 Knihy</a>
        </li>
        <li>
          <a href="../Ostatni.html" title="Ostatn칤">游늭 Ostatn칤</a>
        </li>
        <li>
          <a href="../Povidky.html" title="Pov칤dky">游늭 Pov칤dky</a>
        </li>
        <li>
          <a href="../Predstaveni.html" title="P콏edstaven칤">游늭 P콏edstaven칤</a>
        </li>
        <li>
          <a href="../Programovani.html" title="Programov치n칤">游늭 Programov치n칤</a>
        </li>
        <li>
          <a href="../index.html" title="Czech section">游늭 Czech section</a>
        </li>
      </ul>
    </div>
  </div>
</body>
</html>
