<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.2.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Jak se p√≠≈°e programovac√≠ jazyk 2: Lexer</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css">
  <link rel="alternate" type="application/atom+xml" href="http://blog.rfox.eu/atom.xml">
  <link rel="shortcut icon" href="http://blog.rfox.eu/favicon.ico"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script src="https://www.googletagmanager.com/gtag/js?id=UA-142545439-1">
  </script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-142545439-1');
  </script>
  <style>
  .hll { background-color: #ffffcc }
  .c { color: #408080; font-style: italic } /* Comment */
  .err { border: 1px solid #FF0000 } /* Error */
  .k { color: #008000; font-weight: bold } /* Keyword */
  .o { color: #666666 } /* Operator */
  .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
  .cm { color: #408080; font-style: italic } /* Comment.Multiline */
  .cp { color: #BC7A00 } /* Comment.Preproc */
  .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
  .c1 { color: #408080; font-style: italic } /* Comment.Single */
  .cs { color: #408080; font-style: italic } /* Comment.Special */
  .gd { color: #A00000 } /* Generic.Deleted */
  .ge { font-style: italic } /* Generic.Emph */
  .gr { color: #FF0000 } /* Generic.Error */
  .gh { color: #000080; font-weight: bold } /* Generic.Heading */
  .gi { color: #00A000 } /* Generic.Inserted */
  .go { color: #888888 } /* Generic.Output */
  .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
  .gs { font-weight: bold } /* Generic.Strong */
  .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
  .gt { color: #0044DD } /* Generic.Traceback */
  .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
  .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
  .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
  .kp { color: #008000 } /* Keyword.Pseudo */
  .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
  .kt { color: #B00040 } /* Keyword.Type */
  .m { color: #666666 } /* Literal.Number */
  .s { color: #BA2121 } /* Literal.String */
  .na { color: #7D9029 } /* Name.Attribute */
  .nb { color: #008000 } /* Name.Builtin */
  .nc { color: #0000FF; font-weight: bold } /* Name.Class */
  .no { color: #880000 } /* Name.Constant */
  .nd { color: #AA22FF } /* Name.Decorator */
  .ni { color: #999999; font-weight: bold } /* Name.Entity */
  .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
  .nf { color: #0000FF } /* Name.Function */
  .nl { color: #A0A000 } /* Name.Label */
  .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
  .nt { color: #008000; font-weight: bold } /* Name.Tag */
  .nv { color: #19177C } /* Name.Variable */
  .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
  .w { color: #bbbbbb } /* Text.Whitespace */
  .mb { color: #666666 } /* Literal.Number.Bin */
  .mf { color: #666666 } /* Literal.Number.Float */
  .mh { color: #666666 } /* Literal.Number.Hex */
  .mi { color: #666666 } /* Literal.Number.Integer */
  .mo { color: #666666 } /* Literal.Number.Oct */
  .sa { color: #BA2121 } /* Literal.String.Affix */
  .sb { color: #BA2121 } /* Literal.String.Backtick */
  .sc { color: #BA2121 } /* Literal.String.Char */
  .dl { color: #BA2121 } /* Literal.String.Delimiter */
  .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
  .s2 { color: #BA2121 } /* Literal.String.Double */
  .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
  .sh { color: #BA2121 } /* Literal.String.Heredoc */
  .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
  .sx { color: #008000 } /* Literal.String.Other */
  .sr { color: #BB6688 } /* Literal.String.Regex */
  .s1 { color: #BA2121 } /* Literal.String.Single */
  .ss { color: #19177C } /* Literal.String.Symbol */
  .bp { color: #008000 } /* Name.Builtin.Pseudo */
  .fm { color: #0000FF } /* Name.Function.Magic */
  .vc { color: #19177C } /* Name.Variable.Class */
  .vg { color: #19177C } /* Name.Variable.Global */
  .vi { color: #19177C } /* Name.Variable.Instance */
  .vm { color: #19177C } /* Name.Variable.Magic */
  .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Bystroushaak">
  <meta name="twitter:creator" content="@Bystroushaak">
  <meta name="twitter:title" content="Jak se p√≠≈°e programovac√≠ jazyk 2: Lexer">
  <meta name="twitter:description" content="V p≈ôedchoz√≠ ƒç√°sti (Jak se p√≠≈°e programovac√≠ jazyk 1: Motivace) jsem popsal motivaci, jen≈æ mƒõ zavedla na trnitou cestu v√Ωvoj√°≈ô≈Ø vlastn√≠ho jazyka. V dne≈°n√≠ ƒç√°sti se pod√≠v√°me na to jak vlastnƒõ m√° m≈Øj jazyk vypadat a taky se na prvn√≠ a pravdƒõpodobnƒõ nejjednodu≈°≈°√≠ komponentu: lexer.">
  <meta name="twitter:image" content="http://blog.rfox.eu/cz/Jak_se_pise_programovaci_jazyk/Jak_se_pise_programovaci_jazyk_2_Lexer/self_syntax_overview_thumb.jpg">
  <script src="../../../scripts.js">
  </script>
</head>
<body onload="on_body_load();">
  <div id="sidebar_top">
    <div id="last_five_top">
      <h3>New posts:</h3>
      <ul>
        <li>
          <a href="../../../en/Improvements/The_Most_Personal_Device_experiment/Pebble_smartwatches.html">Pebble smartwatches</a>
        </li>
        <li>
          <a href="../../../en/Improvements/The_Most_Personal_Device_experiment.html"><span class="icon">üìÇ</span>The Most Personal Device experiment</a>
        </li>
        <li>
          <a href="../../../en/About_this_blog/Unicode_font_subset.html">Unicode font subset</a>
        </li>
        <li>
          <a href="../../../en/Weekly_updates/Lifelog_2020-05-25_Work_in_progress_everywhere.html">Lifelog 2020-05-25; Work in progress everywhere</a>
        </li>
        <li>
          <a href="http://blog.rfox.eu/en/Improvements/Vitamins_nootropics_and_other_boosters.html">Vitamins, nootropics and other boosters</a>
        </li>
      </ul>& <a href="../../../Changelog.html">more</a>
    </div>
  </div><a class="breadcrumb" href="../../../index.html">Bystroushaak's blog</a> / <a class="breadcrumb" href="../../index.html">Czech section</a> / <a class="breadcrumb" href="../index.html">Jak se p√≠≈°e programovac√≠ jazyk</a> / Jak se p√≠≈°e programovac√≠ jazyk 2: Lexer
  <article id="9524512c-8edc-4049-b39e-5b512821d5ee" class="page sans">
    <header>
      <h1 class="page-title">Jak se p√≠≈°e programovac√≠ jazyk 2: Lexer</h1>
    </header>
    <div class="page-body">
      <p id="c864860e-9b70-46e5-b852-41fd1131b488" class=""><time>@2019/02/09</time></p>
      <p id="5f2c0a54-ca38-440b-a5d9-69db0750c99a" class="">V p≈ôedchoz√≠ ƒç√°sti (<a href="../Jak_se_pise_programovaci_jazyk_1_Motivace.html">Jak se p√≠≈°e programovac√≠ jazyk 1: Motivace</a>) jsem popsal motivaci, jen≈æ mƒõ zavedla na trnitou cestu v√Ωvoj√°≈ô≈Ø vlastn√≠ho jazyka. V dne≈°n√≠ ƒç√°sti se pod√≠v√°me na to jak vlastnƒõ m√° m≈Øj jazyk vypadat a taky se na prvn√≠ a pravdƒõpodobnƒõ nejjednodu≈°≈°√≠ komponentu: <em>lexer</em>.</p>
      <h1 id="8b20632d-d3a1-4428-9fba-071aee8b6a86" class="">Self</h1>
      <p id="35bfa657-671b-4658-b31f-e45f2fbdfe8c" class="">Z√°kladn√≠ syntaxi Selfu dob≈ôe popisuje n√°sleduj√≠c√≠ obr√°zek:</p>
      <figure id="8772dd13-3403-4daa-bfde-5edbd6d41144" class="image">
        <a href="self_syntax_overview.png"><img style="width:1640px" src="self_syntax_overview_thumb.jpg"></a>
      </figure>
      <p id="53b667d9-a548-42fd-a028-cef2344665c1" class="">Pokud by v√°s zaj√≠maly podrobnosti, doporuƒçuji <a href="https://en.wikipedia.org/wiki/Self_(programming_language)#Description">anglickou wikipedii</a>, <a href="http://handbook.selflanguage.org/">Self handbook</a>, ƒçi m≈Øj paralelnƒõ vych√°zej√≠c√≠ <a href="../../Serial_o_Selfu.html"><span class="icon">üìÇ</span>Seri√°l o Selfu</a>.</p>
      <h1 id="0a6fd39f-fc58-4c70-9004-c0f8b81b7385" class="">tinySelf</h1>
      <p id="85b76b84-dddf-405a-9136-ff09dc65637e" class="">tinySelf, jak jsem se kdysi nerozv√°≈ænƒõ (uk√°zalo se, ≈æe stejnƒõ pojmenovan√Ω projekt u≈æ kdysi existoval) rozhodl m≈Øj jazyk nazvat, je v podstatƒõ Self, i kdy≈æ trochu ‚Äûvylep≈°en√Ω‚Äú po str√°nce syntaxe.</p>
      <p id="23ea7e83-9ed6-4c1f-997a-2bae013e0097" class="">Nap≈ô√≠klad jsem p≈ôidal podporu pro kask√°dy, jak je pou≈æ√≠v√° Smalltalk. Nikdy jsem nech√°pal, proƒç v p≈Øvodn√≠m Selfu nejsou, kdy≈æ tam dokonale sednou. Taky jsem zmƒõnil <code>"koment√°≈ô"</code> na <code># koment√°≈ô</code>, proto≈æe uvozovky se podle m√©ho n√°zoru v√≠c hod√≠ na stringy, ne≈æ na koment√°≈ôe a tak√© se l√©pe p√≠≈°ou na ƒçesk√© kl√°vesnici, ne≈æ standardn√≠ Selfovsk√© <code>'stringy'</code> psan√© jednoduch√Ωmi uvozovkami. Pro stringy je nyn√≠ mo≈æn√© pou≈æ√≠vat oboj√≠, co≈æ ƒçlovƒõku ≈°et≈ô√≠ escapov√°n√≠, pokud zrovna pot≈ôebuje napsat string s uvozovkami.</p>
      <p id="d530fb48-2a2b-49fe-81c1-3b509a152291" class="">Kromƒõ toho jsem zmƒõnil i syntaxi objekt≈Ø a blok≈Ø, kde jsem umo≈ænil vynech√°n√≠ otev√≠rac√≠ho <code>|</code>, tak≈æe je mo≈æn√© ps√°t <code>(slot |)</code> m√≠sto <code>(| slot |)</code>. K parsov√°n√≠ to stejnƒõ nen√≠ zapot≈ôeb√≠ a v≈ædycky mi to p≈ôi≈°lo jako zbyteƒçn√Ω opruz. Chtƒõl jsem p≈ôidat i <code>(| code)</code>, ale uk√°zalo se, ≈æe to u≈æ parseru vad√≠ hodnƒõ, tak≈æe je nutn√© zapisovat objekty bez slot≈Ø jako <code>(|| code)</code>.</p>
      <p id="a70d23a9-f928-4c45-bb4b-7c44100ac5cf" class="">Oproti Selfu tak√© nen√≠ podtr≈æ√≠tko na zaƒç√°tku zpr√°vy rezervovan√© pro vol√°n√≠ primitivn√≠ch zpr√°v. <code>_s</code> je norm√°lnƒõ pou≈æiteln√° un√°rn√≠ zpr√°va. Primitivn√≠ zpr√°vy (vol√°n√≠ k√≥du interpretru) jsou implementovan√© jako zpr√°vy poslan√© objektu <code>primitive</code>. Primitivn√≠ch zpr√°v je stejnƒõ v bƒõ≈æn√©m k√≥du minimum, tak mi nikdy nebylo jasn√©, proƒç by pro nƒõ mƒõla b√Ωt vyhrazen√° syntaxe.</p>
      <h1 id="b5088aa4-3756-46a4-a4fe-dba95d964e61" class="">Lexer</h1>
      <p id="b967d2f3-3fc8-491b-ba3a-c8198a728852" class="">Psan√≠ jazyka zaƒç√≠n√° lexerem. Ten definuje, z jak√Ωch komponent se jazyk skl√°d√° roz≈ôez√°n√≠m zdrojov√©ho k√≥du na <em>tokeny</em>. Ve standardn√≠m imperativn√≠m jazyce to m≈Ø≈æou b√Ωt r≈Øzn√© p≈ô√≠kazy, definice funkce, if podm√≠nky, kl√≠ƒçov√° slova a tak podobnƒõ. V tinySelfu je to vesmƒõs definice objekt≈Ø, slot≈Ø, blok≈Ø, nebo pos√≠l√°n√≠ zpr√°v mezi nimi.</p>
      <p id="c591eed2-1cfb-4674-bbe9-e535edef102e" class="">Lexer v√°m k√≥d roz≈ôe≈æe na pole jednotliv√Ωch element≈Ø. Z k√≥du jako:</p>
      <pre class="code"><code><span class="p">(</span><span class="o">|</span> <span class="n">asd</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">|</span> <span class="o">^</span><span class="n">asd</span><span class="o">.</span><span class="p">)</span>
</code></pre>
      <p id="eed70684-d623-4ab4-82f0-415229e1cabc" class="">v√°m udƒõl√° pole ve stylu:</p>
      <pre id="a0491164-811b-49ff-9b15-30ae5f383f1d" class="code"><code>[
  Token("OBJ_START", "("),
  Token("SEPARATOR", "|"),
  Token("IDENTIFIER", "asd"),
  Token("ASSIGNMENT", "="),
  Token("NUMBER", "1"),
  Token("SEPARATOR", "|"),
  Token("RETURN", "^"),
  Token("IDENTIFIER", "asd"),
  Token("OBJ_END", ")")
]</code></pre>
      <p id="6988b7fd-2227-4e54-b0b6-d1f3bc32bb66" class="">V√Ωstupem je ploch√° struktura, do kter√© byl jen roz≈ôez√°n vstupn√≠ ≈ôetƒõzec a kde byly ke ka≈æd√© ƒç√°sti p≈ôi≈ôazeny typy tokenu.</p>
      <p id="07be088b-1e29-45c9-939e-e38dbe0a1a2a" class="">Lexer je mo≈æn√© si napsat ruƒçnƒõ, formou stavov√©ho automatu, kter√Ω v cyklu proch√°z√≠ k√≥d znak po znaku a postupnƒõ ho roz≈ôez√°v√° a analyzuje roz≈ôezan√© kousky (<em>tokeny</em>), aby jim p≈ôisoudil typ. Kdysi jsem nƒõco podobn√©ho z neznalosti a z nutnosti <a href="https://github.com/Bystroushaak/pyDHTMLParser/blob/master/src/dhtmlparser/__init__.py#L43">udƒõlal</a> (tenkr√°t v D nebyl ≈æ√°dn√Ω lexer), kdy≈æ jsem si psal <a href="https://github.com/Bystroushaak/pyDHTMLParser">HTML parser</a>, proto mi vƒõ≈ôte, kdy≈æ v√°m tento p≈ô√≠stup <strong>D√öRAZNƒö NEDOPORUƒå√çM</strong>.</p>
      <p id="96dce62b-2407-4d7b-96d3-2ec58ffb46dd" class="">Jedn√° o nepru≈æn√Ω, k chyb√°m n√°chyln√Ω, na pochopen√≠ slo≈æit√Ω a tƒõ≈æce udr≈æiteln√Ω p≈ô√≠stup. A≈æ na nƒõkter√© velmi speci√°ln√≠ p≈ô√≠pady, kdy p≈ôesnƒõ v√≠te co dƒõl√°te a proƒç, se v√°m v≈ædy vyplat√≠ pou≈æ√≠t nƒõjakou knihovnu, kterou nakrm√≠te popisy token≈Ø a ona v√°m stavov√Ω automat na z√°kladƒõ popisu vygeneruje.</p>
      <p id="205b13b8-66bb-4fc4-aa0d-d8db05e899b6" class="">V m√©m p≈ô√≠padƒõ se jedn√° o knihovnu <a href="https://rply.readthedocs.io/">rply</a> (podrobnosti p≈ôinese p≈ô√≠≈°t√≠ d√≠l), konkr√©tnƒõ ƒç√°st <a href="https://rply.readthedocs.io/en/latest/users-guide/lexers.html">rply.LexerGenerator</a>.</p>
      <h2 id="7a092455-a136-4588-b1bc-a710628ebeeb" class="">tinySelfov√© tokeny</h2>
      <p id="be067035-9c53-4d35-918c-929c2c214ad8" class="">tinySelf je tvo≈ôen n√°sleduj√≠c√≠mi tokeny:</p>
      <h2 id="753ec819-5d46-4d5f-9826-cb51795b679e" class="">SELF</h2>
      <p id="95bf47e9-46db-4f62-8dbf-0f6129aa5e80" class="">Kl√≠ƒçov√© slovo <code>self</code> tvo≈ô√≠ token Self. Pou≈æit√≠ je podobn√© jako t≈ôeba v pythonu, ƒçi <code>this</code> v javƒõ.</p>
      <h2 id="6da31ed7-77cc-4825-a6a4-7f633529b25a" class="">NUMBER</h2>
      <p id="e712e7b6-a317-499b-9bd7-bd5244b77956" class="">ƒå√≠sla. <code>5</code> je ƒç√≠slo. <code>-5</code> je ƒç√≠slo. <code>4.32</code> je taky ƒç√≠slo, stejnƒõ jako <code>\xFF</code>.</p>
      <h2 id="9c4ae08a-e2ab-49c4-a874-81427d1d398f" class="">OBJ_START</h2>
      <p id="f7519207-a16c-4a33-8597-f2654a468bca" class="">Zaƒç√°tek definice objektu. Jedn√° se jednodu≈°e o z√°vorku <code>(</code> za n√≠≈æ n√°sleduje zbytek objektu.</p>
      <h2 id="0d973a4b-623f-4228-8d84-8c636e52f04b" class="">OBJ_END</h2>
      <p id="09b83185-30d7-4478-b7d5-67c5dfaf09a7" class="">Ukonƒçovac√≠ z√°vorka <code>)</code> znaƒç√≠c√≠ konec objektu. Nejkrat≈°√≠ (pr√°zdn√Ω) objekt v Selfu je <code>()</code>.</p>
      <h2 id="5d3b1b67-1097-4ec5-8f4d-33c3e9a0d1ba" class="">BLOCK_START</h2>
      <p id="293fdb5d-e7b4-40a5-a179-afbf36468b63" class="">Zaƒç√°tek bloku <code>[</code>. Bloky jsou objekty, kter√© maj√≠ <em>parenta</em> nadefinovan√©ho na <em>lok√°ln√≠ scope</em>, tak≈æe se chovaj√≠ podobnƒõ jako lambda funkce.</p>
      <h2 id="bbcac4bb-6d47-469e-8c34-65ffeb33bb53" class="">BLOCK_END</h2>
      <p id="79712cf1-cf03-4d20-a316-35d1dc96d500" class="">Konec bloku <code>]</code>. Nejkrat≈°√≠ blok vypad√° takhle; <code>[]</code>.</p>
      <h2 id="798e3a20-2ac9-4d61-b78c-e8389ba78cce" class="">SINGLE_Q_STRING a DOUBLE_Q_STRING</h2>
      <p id="22934ff7-b6b2-47f3-9648-399ec4069c1a" class="">Definice string≈Ø. Jak jsem zmi≈àoval, bere se ‚Äòstring‚Äô a ‚Äústring‚Äù se standardn√≠ma escape sekvencema.</p>
      <h2 id="037650cd-5a6b-4006-bf34-25b1ea6de368" class="">FIRST_KW</h2>
      <p id="956ffdc7-49a4-4107-907a-4745f844cf41" class="">V Selfu existuj√≠ t≈ôi druhy zpr√°v objekt≈Øm; un√°rn√≠, bin√°rn√≠ a <em>keyword</em>. Un√°rn√≠ nep≈ôij√≠m√° ≈æ√°dn√Ω parametr. Bin√°rn√≠ jeden, <em>keyword</em> pak libovoln√Ω poƒçet.</p>
      <p id="2be4ac3c-b7b5-4a2a-9987-48a7074d9dd6" class="">Self p≈ôinesl oproti Smalltalku drobn√© vylep≈°en√≠, kde <em>keyword</em> zpr√°vy jsou jednoznaƒçnƒõ parsovateln√© prost√Ωm okem t√≠m, ≈æe vynucuje ka≈æd√© n√°sleduj√≠c√≠ kl√≠ƒçov√© slovo zpr√°vy zaƒç√≠nat velk√Ωm p√≠smenem.</p>
      <p id="8db8ad88-5df2-4337-a78c-609b3da1b28c" class="">Ve Smalltalku m≈Ø≈æe zpr√°va <code>at: 1 put: 2</code> znamenat buƒè <code>(at: 1) put: 2</code>, tedy posl√°n√≠ zpr√°vy <code>at:</code> a n√°sledn√© posl√°n√≠ zpr√°vy <code>put:</code> v√Ωsledku z prvn√≠ho vol√°n√≠, nebo posl√°n√≠ zpr√°vy <code>at:put:</code> se dvƒõma parametry <code>1</code> a <code>2</code>. V Selfu je nutn√© druh√Ω popsan√Ω p≈ô√≠pad zapsat jako <code>at: 1 Put: 2</code>, co≈æ jednoznaƒçnƒõ identifikuje kde <em>keyword</em> zpr√°va zaƒç√≠n√° a konƒç√≠. Proto taky lexer rozli≈°uje zaƒç√°tek <em>keyword</em> zpr√°vy (string zaƒç√≠naj√≠c√≠ mal√Ωm p√≠smenem s dvojteƒçkou na konci) a pokraƒçov√°n√≠.</p>
      <h2 id="47b4fb3b-7701-46f4-9cf6-8ac15bd3e90f" class="">KEYWORD</h2>
      <p id="4afa751c-fc37-49fa-b2fb-645baf5381d4" class="">Zmi≈àovan√© pokraƒçov√°n√≠ zpr√°vy. String zaƒç√≠naj√≠c√≠ velk√Ωm p√≠smenem, s dvojteƒçkou na konci.</p>
      <h2 id="52d75364-61cf-4bde-8dee-50775b16516e" class="">IDENTIFIER</h2>
      <p id="619b51c3-dd6e-4e89-acae-64dd5edb2cd1" class="">String zaƒç√≠naj√≠c√≠ mal√Ωm ƒçi velk√Ωm p√≠smenem, ƒçi podtr≈æ√≠tkem n√°sleduj√≠c√≠ t√≠m sam√Ωm, ƒçi ƒç√≠slic√≠. <code>asd</code>, <code>BSD</code>, <code>_A</code> ƒçi <code>_35</code> jsou validn√≠ identifik√°tory, respektive un√°rn√≠ zpr√°vy.</p>
      <h2 id="16353b7e-bb0a-4845-a314-c6d7c81b78cc" class="">OPERATOR</h2>
      <p id="944f2249-c94b-424b-ae5c-6a7b0267378e" class="">Jako oper√°tor (bin√°rn√≠ zpr√°vu) je mo≈æn√© pou≈æ√≠t znaky z mno≈æiny: <code>!@$%&amp;*-+~/?&lt;&gt;,</code> v libovoln√©m poƒçtu opakov√°n√≠. <code>@</code> je oper√°tor, stejnƒõ jako <code>@@</code>.</p>
      <p id="4a7f7a05-ec7c-4d41-9163-3314650a815d" class="">Oper√°tory v≈ædy oƒçek√°vaj√≠ jeden parametr. <code>a + b</code> je bin√°rn√≠ zpr√°va oprer√°toru <code>+</code> s parametrem <code>b</code> zaslan√° objektu <code>a</code>.</p>
      <h2 id="83da27ec-5146-4ae7-b966-7a5f058d56d2" class="">ARGUMENT</h2>
      <p id="af5e9b81-888b-4968-9726-11e51edd655f" class="">Hlavnƒõ u blok≈Ø je pot≈ôeba napsat co za argumenty p≈ôij√≠maj√≠. Argumenty se zapisuj√≠ jako identifik√°tory zaƒç√≠naj√≠c√≠ dvojteƒçkou.</p>
      <p id="cd7690aa-b983-42e2-b580-a09333e94018" class="">Uk√°zky:</p>
      <p id="cce17b42-6bd2-401b-8f38-2a2fd9ecc5e8" class=""><code>:a</code></p>
      <p id="2031c169-76a8-4870-9c91-bd2b10b8ad01" class=""><code>:parameter</code></p>
      <p id="0426728d-0e56-43fe-a07b-5ccf6c6f8531" class=""><code>:_</code></p>
      <p id="dee373ce-6fdf-440f-b6dc-af457a9b457d" class=""><code>:_5OK</code></p>
      <h2 id="230107dd-1f0c-42d8-9619-de7d4f3d426a" class="">ASSIGNMENT</h2>
      <p id="714a6f95-b883-4470-927b-5b28d387b80c" class="">Speci√°ln√≠ oper√°tor p≈ôi≈ôazen√≠. M√° v√Ωznam v definici slot≈Ø, kde definuje sloty pouze ke ƒçten√≠. Tak√© je ho mo≈æn√© pou≈æ√≠t jako bƒõ≈æn√Ω oper√°tor (bin√°rn√≠ zpr√°vu). Zapisuje se jako znak pro rovn√° se (<code>=</code>).</p>
      <h2 id="a391da66-4ccf-417d-a1b9-ab4a28815dfb" class="">RW_ASSIGNMENT</h2>
      <p id="b6874338-b77d-45fd-8843-9d399c3ba91b" class="">P≈ôi≈ôazen√≠ do slotu ke ƒçten√≠ i z√°pisu. Takto jde p≈ôi≈ôazovat pouze konstanty, nebo reference na jin√© objekty, nikoliv metody.</p>
      <p id="d6c99af6-1725-49a5-b148-f3fea8dd7b1c" class="">Zapisuje se jako ≈°ipka do leva (<code>&lt;-</code>).</p>
      <h2 id="078a79d8-8ac5-4b80-b775-eba8a111d1c8" class="">RETURN</h2>
      <p id="c8cdc9dc-6a85-482b-a70b-03954b4ff9be" class="">Vr√°cen√≠ hodnoty z objektu / bloku. Zapisuje se jako st≈ô√≠≈°ka (<code>^</code>).</p>
      <h2 id="0b8a4c07-48a4-489e-973e-d303d0e43288" class="">END_OF_EXPR</h2>
      <p id="fba1e9ba-e31b-407f-9082-8b922d444534" class="">Konec v√Ωrazu. Oddƒõluje ≈ôetƒõzce zpr√°v. Zapisuje se stejnƒõ jako ve Smalltalku teƒçkou (<code>.</code>).</p>
      <h2 id="d77d9cfc-80f0-495f-a861-fd2c4eaeae8f" class="">SEPARATOR</h2>
      <p id="f2074862-865a-4470-953e-0bdd7810ad80" class="">Oddƒõlovaƒç slot≈Ø od k√≥du. Zapisuje se jako svisl√° ƒç√°rka (<code>|</code>).</p>
      <h2 id="b616fedf-4097-4b20-9c07-d26fcacd17de" class="">CASCADE</h2>
      <p id="d67732f0-d366-4dec-a741-e363fc388d4b" class="">Vyhrazen√Ω oper√°tor kask√°dy. Zapisuje se jako st≈ôedn√≠k (<code>;</code>). Sdƒõluje interpretru, ≈æe n√°sleduj√≠c√≠ zpr√°va se pos√≠l√° stejn√©mu objektu jako p≈ôedchoz√≠.</p>
      <h2 id="451df77c-70c1-457d-af0d-856221443d37" class="">COMMENT</h2>
      <p id="ca8fb076-fc00-42d4-a340-2886f55334c6" class="">Koment√°≈ô zaƒç√≠naj√≠c√≠ <code>#</code>, konƒç√≠c√≠ koncem ≈ô√°dku.</p>
      <h2 id="043f5e92-cbb7-4fa1-9e88-c1140e50ee46" class="">Je≈°tƒõ k lexeru</h2>
      <p id="c6cf9848-af5d-440a-8396-0269c5afd865" class="">M≈Ø≈æe se zd√°t, ≈æe v lexeru je toho spousta, ale ve skuteƒçnosti je cel√Ω jazyk dost jednoduch√Ω a uk√°zka v≈°eho co je v nƒõm mo≈æn√© se vejde tak nƒõjak na pohlednici:</p>
      <pre class="code"><code><span class="p">()</span>  <span class="c1"># Pr√°zdn√Ω objekt.</span>
<span class="p">(</span><span class="o">|</span> <span class="o">|</span><span class="p">)</span>  <span class="c1"># Taky pr√°zdn√Ω objekt, ale s definic√≠ (pr√°zdn√Ωch) slot≈Ø.</span>
<span class="p">(</span><span class="o">|</span> <span class="n">slot</span> <span class="o">|</span><span class="p">)</span>  <span class="c1"># Objekt obsahuj√≠c√≠ jeden slot (key/val storage, kde slot = nil.).</span>

<span class="c1"># Objekt obsahuj√≠c√≠ definice dvou slot≈Ø; read only ‚Äös‚Äò a zapisovateln√©ho slotu ‚Äös2‚Äò.</span>
<span class="c1"># Ekvivalentn√≠ slovn√≠ku {"s": None, "s2": 1}, kdy≈æ pominu zapisovatelnost slot≈Ø.</span>
<span class="p">(</span><span class="o">|</span> <span class="n">s</span> <span class="o">=</span> <span class="n">nil</span><span class="o">.</span> <span class="n">s2</span> <span class="o">&lt;-</span> <span class="mi">1</span> <span class="o">|</span><span class="p">)</span>

<span class="c1"># Objekt obsahuj√≠c√≠ slot ‚Äös‚Äò, a taky k√≥d, kter√Ω tomuto slotu po≈°le un√°rn√≠ zpr√°vu ‚ÄöprintLine‚Äò. Posledn√≠ v√Ωraz je v≈ædy vr√°cen, tak≈æe bude vr√°cena hodnota slotu ‚Äös‚Äò.</span>
<span class="p">(</span><span class="n">s</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">s</span> <span class="n">printLine</span><span class="o">.</span> <span class="n">s</span><span class="p">)</span>
<span class="p">(</span><span class="o">|</span> <span class="n">s</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">|</span> <span class="n">s</span> <span class="n">printLine</span><span class="o">.</span> <span class="o">^</span><span class="n">s</span><span class="o">.</span> <span class="p">)</span>  <span class="c1"># Toto≈æn√Ω k√≥d jako v p≈ôedchoz√≠m p≈ô√≠padƒõ s alternativn√≠ syntax√≠ slot≈Ø a explicitn√≠ return.</span>

<span class="p">[</span> <span class="p">]</span>  <span class="c1"># pr√°zdn√Ω blok</span>
<span class="p">[:</span><span class="n">a</span> <span class="o">|</span> <span class="n">a</span> <span class="n">printLine</span><span class="o">.</span> <span class="n">a</span><span class="p">]</span>  <span class="c1"># blok p≈ôij√≠maj√≠c√≠ parametr ‚Äöa‚Äò, kter√Ω vyp√≠≈°e posl√°n√≠m zpr√°vy ‚ÄöprintLine‚Äò a vr√°t√≠.</span>
<span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">a</span> <span class="o">|</span> <span class="n">a</span> <span class="n">printLine</span><span class="o">.</span> <span class="n">exit</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="p">]</span>  <span class="c1"># toto≈æn√Ω k√≥d - return v bloku vrac√≠ z nad≈ôazen√©ho scope, nikoliv jen z bloku samotn√©ho!.</span>

<span class="c1"># Komplexnƒõj≈°√≠ objekt obsahuj√≠c√≠ asi v≈°echny elementy jazyka.</span>
<span class="p">(</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">1.</span> <span class="n">b</span> <span class="o">&lt;-</span> <span class="mf">2.</span> <span class="n">c</span> <span class="o">|</span>
  <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">ifTrue</span><span class="p">:</span> <span class="p">[</span><span class="n">c</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">.</span> <span class="o">^</span><span class="n">c</span><span class="p">]</span>
    <span class="kc">False</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span> <span class="n">logger</span> <span class="n">log</span><span class="p">:</span> <span class="n">a</span><span class="p">;</span> <span class="n">log</span> <span class="n">b</span><span class="o">.</span><span class="p">]</span><span class="o">.</span>

  <span class="n">logger</span> <span class="n">log</span><span class="p">:</span> <span class="s1">'Vsechny zpravy se prvne resolvuji na Self'</span><span class="o">.</span>
  <span class="bp">self</span> <span class="n">logger</span> <span class="n">log</span><span class="p">:</span> <span class="s2">"Toto je tedy totozna zprava"</span><span class="o">.</span>

  <span class="o">^</span> <span class="p">(</span><span class="o">|</span> <span class="n">output</span> <span class="o">=</span> <span class="s2">"vysledek"</span><span class="o">.</span> <span class="n">line</span> <span class="o">&lt;-</span> <span class="s2">"metody"</span> <span class="o">|</span><span class="p">)</span>
<span class="p">)</span>
</code></pre>
      <p id="544b8f83-4919-4bff-90f9-ac89f91115d2" class="">Cel√Ω k√≥d lexeru se vejde na 40 ≈ô√°dek a jde jen o definici jednotliv√Ωch element≈Ø jazyka pomoc√≠ regexp≈Ø:</p>
      <pre class="code"><code><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">rply</span> <span class="kn">import</span> <span class="n">LexerGenerator</span>


<span class="n">lg</span> <span class="o">=</span> <span class="n">LexerGenerator</span><span class="p">()</span>
<span class="n">lg</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="sa">r</span><span class="s1">'\s+'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'SELF'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'self'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'NUMBER'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'(0x[0-9a-fA-F]+)|((\-)?\d+(\.\d)?)'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'OBJ_START'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\('</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'OBJ_END'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\)'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'BLOCK_START'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\['</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'BLOCK_END'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\]'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'SINGLE_Q_STRING'</span><span class="p">,</span> <span class="sa">r</span><span class="s2">"'(?:</span><span class="se">\\</span><span class="s2">.|[^'</span><span class="se">\\</span><span class="s2">])*'"</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'DOUBLE_Q_STRING'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'"(?:</span><span class="se">\\</span><span class="s1">.|[^"</span><span class="se">\\</span><span class="s1">])*"'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'FIRST_KW'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'([a-z_][a-zA-Z0-9_]*\.)*[a-z_]+[a-zA-Z0-9_]*:'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'KEYWORD'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'[A-Z]+[a-zA-Z0-9_]*:'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'ARGUMENT'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">':[a-zA-Z_]*[a-zA-Z0-9_]+'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'RW_ASSIGNMENT'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\&lt;-'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'OPERATOR'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'[!@\$%&amp;\*\-\+~/?&lt;&gt;,]+|==+'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'RETURN'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\^'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'END_OF_EXPR'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\.'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'SEPARATOR'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\|'</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'CASCADE'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'\;'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'IDENTIFIER'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'([a-zA-Z_][a-zA-Z0-9_]*\.)*[a-zA-Z_]*[a-zA-Z0-9_\*]+'</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'ASSIGNMENT'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'='</span><span class="p">)</span>

<span class="n">lg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'COMMENT'</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'#.*[\n|$]?'</span><span class="p">)</span>


<span class="n">lexer</span> <span class="o">=</span> <span class="n">lg</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</code></pre>
      <h1 id="1583ad73-574e-45ec-abb1-961d09c57101" class="">Pokraƒçov√°n√≠</h1>
      <p id="68d98e0a-9d17-47fc-8427-86b8e9a270d7" class="">V p≈ô√≠≈°t√≠m d√≠le se pod√≠v√°me na parser, kter√Ω tokeny bere a sestavuje z nich AST - <a href="https://cs.wikipedia.org/wiki/Syntaktick%C3%BD_strom">abstraktn√≠ syntaktick√Ω strom</a>.</p>
      <h1 id="18653535-6f1e-4db5-924a-13246757a5a2" class="">Relevantn√≠ diskuze</h1>
      <ul id="8e9b3cbf-e1b8-4784-a1d8-c42b17cd866c" class="bulleted-list">
        <li>
          <a href="http://www.abclinuxu.cz/blog/bystroushaak/2019/2/jak-se-pise-programovaci-jazyk-2-lexer">Jak se p√≠≈°e programovac√≠ jazyk 2: Lexer</a> (abclinuxu)
        </li>
      </ul>
      <p id="e830f99a-ad2b-4be8-af9a-4f96fee5965b" class=""></p>
    </div>
  </article>
  <div class="corner-ribbon top-right red">
    <a href="https://www.patreon.com/bePatron?u=2618881">Become a Patron</a>
  </div><a class="twitter-share-button" id="twitter_button" href="#"><img src="../../../tweet_button.svg"></a>
  <div id="sidebar_bottom">
    <div id="last_five_bottom">
      <h3>New posts:</h3>
      <ul>
        <li>
          <a href="../../../en/Improvements/The_Most_Personal_Device_experiment/Pebble_smartwatches.html">Pebble smartwatches</a>
        </li>
        <li>
          <a href="../../../en/Improvements/The_Most_Personal_Device_experiment.html"><span class="icon">üìÇ</span>The Most Personal Device experiment</a>
        </li>
        <li>
          <a href="../../../en/About_this_blog/Unicode_font_subset.html">Unicode font subset</a>
        </li>
        <li>
          <a href="../../../en/Weekly_updates/Lifelog_2020-05-25_Work_in_progress_everywhere.html">Lifelog 2020-05-25; Work in progress everywhere</a>
        </li>
        <li>
          <a href="http://blog.rfox.eu/en/Improvements/Vitamins_nootropics_and_other_boosters.html">Vitamins, nootropics and other boosters</a>
        </li>
      </ul>& <a href="../../../Changelog.html">more</a>
    </div>
  </div>
</body>
</html>
